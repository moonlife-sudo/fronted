{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"leave-apply\"\n};\nconst _hoisted_2 = {\n  class: \"card form-card\"\n};\nconst _hoisted_3 = {\n  class: \"form-group\"\n};\nconst _hoisted_4 = [\"value\"];\nconst _hoisted_5 = {\n  class: \"form-group\"\n};\nconst _hoisted_6 = {\n  class: \"form-group\"\n};\nconst _hoisted_7 = {\n  class: \"date-row\"\n};\nconst _hoisted_8 = {\n  class: \"datetime-container\"\n};\nconst _hoisted_9 = {\n  class: \"datetime-container\"\n};\nconst _hoisted_10 = {\n  class: \"form-group\"\n};\nconst _hoisted_11 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[14] || (_cache[14] = _createElementVNode(\"h3\", null, \"üìÖ Fill Leave Application\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_3, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", null, \"Course\", -1 /* CACHED */)), _createElementVNode(\"input\", {\n    type: \"text\",\n    value: $setup.courseName,\n    readonly: \"\",\n    class: \"course-input\"\n  }, null, 8 /* PROPS */, _hoisted_4)]), _createElementVNode(\"div\", _hoisted_5, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", null, \"Leave Type\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.form.type = $event)\n  }, [...(_cache[9] || (_cache[9] = [_createElementVNode(\"option\", {\n    value: \"sick\"\n  }, \"Sick Leave\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"personal\"\n  }, \"Personal Leave\", -1 /* CACHED */)]))], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.form.type]])]), _createElementVNode(\"div\", _hoisted_6, [_cache[12] || (_cache[12] = _createElementVNode(\"label\", null, \"Time Range\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"datetime-local\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.form.start = $event),\n    ref: \"startDatetime\",\n    class: \"hidden-datetime\",\n    onChange: $setup.updateDisplayStart\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.form.start]]), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.displayStart = $event),\n    placeholder: \"YYYY-MM-DD HH:MM\",\n    class: \"visible-text\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.displayStart]]), _createElementVNode(\"span\", {\n    class: \"calendar-icon\",\n    onClick: _cache[3] || (_cache[3] = $event => _ctx.$refs.startDatetime.click())\n  }, \"üìÖ\")]), _cache[11] || (_cache[11] = _createElementVNode(\"span\", {\n    class: \"to-text\"\n  }, \"to\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_9, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"datetime-local\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.form.end = $event),\n    ref: \"endDatetime\",\n    class: \"hidden-datetime\",\n    onChange: $setup.updateDisplayEnd\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.form.end]]), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.displayEnd = $event),\n    placeholder: \"YYYY-MM-DD HH:MM\",\n    class: \"visible-text\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.displayEnd]]), _createElementVNode(\"span\", {\n    class: \"calendar-icon\",\n    onClick: _cache[6] || (_cache[6] = $event => _ctx.$refs.endDatetime.click())\n  }, \"üìÖ\")])])]), _createElementVNode(\"div\", _hoisted_10, [_cache[13] || (_cache[13] = _createElementVNode(\"label\", null, \"Leave Reason\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $setup.form.reason = $event),\n    rows: \"4\",\n    placeholder: \"Please explain the leave reason in detail...\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.reason]])]), _createElementVNode(\"button\", {\n    class: \"submit-btn\",\n    onClick: $setup.submit,\n    disabled: $setup.submitting\n  }, _toDisplayString($setup.submitting ? 'Submitting...' : 'Submit Application'), 9 /* TEXT, PROPS */, _hoisted_11)])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","type","value","$setup","courseName","readonly","_hoisted_5","form","$event","_hoisted_6","_hoisted_7","_hoisted_8","start","ref","onChange","updateDisplayStart","displayStart","placeholder","onClick","_cache","_ctx","$refs","startDatetime","click","_hoisted_9","end","updateDisplayEnd","displayEnd","endDatetime","_hoisted_10","reason","rows","submit","disabled","submitting","_hoisted_11"],"sources":["/Users/zhouzhou/Downloads/fronted-fronted_new/883Fronted_English/src/views/Student/Teaching/course/leave/Apply.vue"],"sourcesContent":["<template>\n  <div class=\"leave-apply\">\n    <div class=\"card form-card\">\n      <h3>üìÖ Fill Leave Application</h3>\n      <div class=\"form-group\">\n        <label>Course</label>\n        <input type=\"text\" :value=\"courseName\" readonly class=\"course-input\">\n      </div>\n      <div class=\"form-group\">\n        <label>Leave Type</label>\n        <select v-model=\"form.type\">\n          <option value=\"sick\">Sick Leave</option>\n          <option value=\"personal\">Personal Leave</option>\n        </select>\n      </div>\n      <div class=\"form-group\">\n        <label>Time Range</label>\n        <div class=\"date-row\">\n          <div class=\"datetime-container\">\n            <input type=\"datetime-local\" v-model=\"form.start\" ref=\"startDatetime\" class=\"hidden-datetime\" @change=\"updateDisplayStart\">\n            <input type=\"text\" v-model=\"displayStart\" placeholder=\"YYYY-MM-DD HH:MM\" class=\"visible-text\">\n            <span class=\"calendar-icon\" @click=\"$refs.startDatetime.click()\">üìÖ</span>\n          </div>\n          <span class=\"to-text\">to</span>\n          <div class=\"datetime-container\">\n            <input type=\"datetime-local\" v-model=\"form.end\" ref=\"endDatetime\" class=\"hidden-datetime\" @change=\"updateDisplayEnd\">\n            <input type=\"text\" v-model=\"displayEnd\" placeholder=\"YYYY-MM-DD HH:MM\" class=\"visible-text\">\n            <span class=\"calendar-icon\" @click=\"$refs.endDatetime.click()\">üìÖ</span>\n          </div>\n        </div>\n      </div>\n      <div class=\"form-group\">\n        <label>Leave Reason</label>\n        <textarea v-model=\"form.reason\" rows=\"4\" placeholder=\"Please explain the leave reason in detail...\"></textarea>\n      </div>\n      <button class=\"submit-btn\" @click=\"submit\" :disabled=\"submitting\">\n        {{ submitting ? 'Submitting...' : 'Submit Application' }}\n      </button>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { reactive, ref, onMounted, watch } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useStore } from 'vuex'\n\nconst router = useRouter()\nconst store = useStore()\nconst submitting = ref(false)\nconst courseName = ref('')\nconst form = reactive({ type: 'sick', start: '', end: '', reason: '' })\nconst startDatetime = ref(null)\nconst endDatetime = ref(null)\nconst displayStart = ref('')\nconst displayEnd = ref('')\n\nonMounted(() => {\n  courseName.value = localStorage.getItem('currentCourseName') || 'Modern Cryptography'\n})\n\n// Êõ¥Êñ∞ÊòæÁ§∫ÁöÑÊó∂Èó¥Â≠óÁ¨¶‰∏≤\nfunction updateDisplayStart() {\n  displayStart.value = formatDateTime(form.start)\n}\n\nfunction updateDisplayEnd() {\n  displayEnd.value = formatDateTime(form.end)\n}\n\n// Ê†ºÂºèÂåñÊó•ÊúüÊó∂Èó¥‰∏∫YYYY-MM-DD HH:MMÊ†ºÂºè\nfunction formatDateTime(dateString) {\n  if (!dateString) return ''\n  const date = new Date(dateString)\n  const year = date.getFullYear()\n  const month = String(date.getMonth() + 1).padStart(2, '0')\n  const day = String(date.getDate()).padStart(2, '0')\n  const hours = String(date.getHours()).padStart(2, '0')\n  const minutes = String(date.getMinutes()).padStart(2, '0')\n  return `${year}-${month}-${day} ${hours}:${minutes}`\n}\n\n// ÁõëÂê¨form.startÂíåform.endÁöÑÂèòÂåñÔºåÊõ¥Êñ∞ÊòæÁ§∫\nwatch(() => form.start, (newValue) => {\n  updateDisplayStart()\n})\n\nwatch(() => form.end, (newValue) => {\n  updateDisplayEnd()\n})\n\nconst submit = async () => {\n  if (!form.reason) {\n    alert('Please fill in the leave reason')\n    return\n  }\n  \n  if (!form.start || !form.end) {\n    alert('Please select leave time')\n    return\n  }\n  \n  if (new Date(form.start) >= new Date(form.end)) {\n    alert('End time must be later than start time')\n    return\n  }\n  \n  try {\n    submitting.value = true\n    \n    // ÈÄöËøáVuexÊèê‰∫§ËØ∑ÂÅáÁî≥ËØ∑\n    await store.dispatch('submitLeaveApplication', {\n      type: form.type,\n      start: form.start,\n      end: form.end,\n      reason: form.reason,\n      courseName: courseName.value\n    })\n    \n    alert('Leave application submitted, waiting for teacher approval')\n    \n    // Navigate to records page\n    router.push('records')\n    \n  } catch (error) {\n    console.error('Failed to submit leave application:', error)\n    alert('Submission failed, please try again later')\n  } finally {\n    submitting.value = false\n  }\n}\n</script>\n\n<style scoped>\n.leave-apply { padding: 24px; max-width: 800px; margin: 0 auto; }\n.card { background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); }\n h3 { margin-top: 0; margin-bottom: 24px; color: #333; }\n.form-group { margin-bottom: 20px; }\nlabel { display: block; margin-bottom: 8px; font-weight: 500; color: #666; }\nselect, textarea, .course-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }\n.date-row { display: flex; gap: 10px; align-items: center; }\n.datetime-container {\n  position: relative;\n  flex: 1;\n}\n.hidden-datetime {\n  position: absolute;\n  opacity: 0;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 2;\n  cursor: pointer;\n}\n\n.visible-text {\n  width: 100%;\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  box-sizing: border-box;\n  font-family: Arial, sans-serif;\n  color: #333;\n  position: relative;\n}\n\n.calendar-icon {\n  position: absolute;\n  right: 10px;\n  top: 50%;\n  transform: translateY(-50%);\n  cursor: pointer;\n  color: #666;\n  font-size: 16px;\n  z-index: 3;\n}\n\n.calendar-icon:hover {\n  color: #2A5CAA;\n}\n.course-input { background:#f5f5f5; color:#666; }\n.to-text {\n  margin: 0 5px;\n  color: #666;\n}\n.submit-btn { background: #2A5CAA; color: white; border: none; padding: 12px 30px; border-radius: 4px; cursor: pointer; font-size: 16px; width: 100%; margin-top: 10px; }\n.submit-btn:hover { opacity: 0.9; }\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}