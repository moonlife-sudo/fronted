{"ast":null,"code":"import { reactive, ref, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useStore } from 'vuex';\nexport default {\n  __name: 'Apply',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const store = useStore();\n    const submitting = ref(false);\n    const courseName = ref('');\n    const form = reactive({\n      type: 'sick',\n      start: '',\n      end: '',\n      reason: ''\n    });\n    onMounted(() => {\n      courseName.value = localStorage.getItem('currentCourseName') || 'Modern Cryptography';\n    });\n    const submit = async () => {\n      if (!form.reason) {\n        alert('è¯·å¡«å†™è¯·å‡ç†ç”±');\n        return;\n      }\n      if (!form.start || !form.end) {\n        alert('è¯·é€‰æ‹©è¯·å‡æ—¶é—´');\n        return;\n      }\n      if (new Date(form.start) >= new Date(form.end)) {\n        alert('ç»“æŸæ—¶é—´å¿…é¡»æ™šäºå¼€å§‹æ—¶é—´');\n        return;\n      }\n      try {\n        submitting.value = true;\n\n        // é€šè¿‡Vuexæäº¤è¯·å‡ç”³è¯·\n        await store.dispatch('submitLeaveApplication', {\n          type: form.type,\n          start: form.start,\n          end: form.end,\n          reason: form.reason,\n          courseName: courseName.value\n        });\n        alert('è¯·å‡ç”³è¯·å·²æäº¤ï¼Œç­‰å¾…è€å¸ˆå®¡æ‰¹');\n\n        // è·³è½¬åˆ°è®°å½•é¡µé¢\n        router.push('records');\n      } catch (error) {\n        console.error('æäº¤è¯·å‡ç”³è¯·å¤±è´¥:', error);\n        alert('æäº¤å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');\n      } finally {\n        submitting.value = false;\n      }\n    };\n    const __returned__ = {\n      router,\n      store,\n      submitting,\n      courseName,\n      form,\n      submit,\n      reactive,\n      ref,\n      onMounted,\n      get useRouter() {\n        return useRouter;\n      },\n      get useStore() {\n        return useStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["reactive","ref","onMounted","useRouter","useStore","router","store","submitting","courseName","form","type","start","end","reason","value","localStorage","getItem","submit","alert","Date","dispatch","push","error","console"],"sources":["D:/vvvvvvvvvscode_workspace/fronted/883Fronted_Final/src/views/Student/Teaching/course/leave/Apply.vue"],"sourcesContent":["<template>\n  <div class=\"leave-apply\">\n    <div class=\"card form-card\">\n      <h3>ğŸ“… å¡«å†™è¯·å‡ç”³è¯·</h3>\n      <div class=\"form-group\">\n        <label>è¯¾ç¨‹</label>\n        <input type=\"text\" :value=\"courseName\" readonly style=\"background:#f5f5f5; color:#666;\">\n      </div>\n      <div class=\"form-group\">\n        <label>è¯·å‡ç±»å‹</label>\n        <select v-model=\"form.type\">\n          <option value=\"sick\">ç—…å‡</option>\n          <option value=\"personal\">äº‹å‡</option>\n        </select>\n      </div>\n      <div class=\"form-group\">\n        <label>æ—¶é—´èŒƒå›´</label>\n        <div class=\"date-row\">\n          <input type=\"datetime-local\" v-model=\"form.start\"> è‡³ <input type=\"datetime-local\" v-model=\"form.end\">\n        </div>\n      </div>\n      <div class=\"form-group\">\n        <label>è¯·å‡äº‹ç”±</label>\n        <textarea v-model=\"form.reason\" rows=\"4\" placeholder=\"è¯·è¯¦ç»†è¯´æ˜è¯·å‡åŸå› ...\"></textarea>\n      </div>\n      <button class=\"submit-btn\" @click=\"submit\" :disabled=\"submitting\">\n        {{ submitting ? 'æäº¤ä¸­...' : 'æäº¤ç”³è¯·' }}\n      </button>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { reactive, ref, onMounted } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useStore } from 'vuex'\n\nconst router = useRouter()\nconst store = useStore()\nconst submitting = ref(false)\nconst courseName = ref('')\nconst form = reactive({ type: 'sick', start: '', end: '', reason: '' })\n\nonMounted(() => {\n  courseName.value = localStorage.getItem('currentCourseName') || 'Modern Cryptography'\n})\n\nconst submit = async () => {\n  if (!form.reason) {\n    alert('è¯·å¡«å†™è¯·å‡ç†ç”±')\n    return\n  }\n  \n  if (!form.start || !form.end) {\n    alert('è¯·é€‰æ‹©è¯·å‡æ—¶é—´')\n    return\n  }\n  \n  if (new Date(form.start) >= new Date(form.end)) {\n    alert('ç»“æŸæ—¶é—´å¿…é¡»æ™šäºå¼€å§‹æ—¶é—´')\n    return\n  }\n  \n  try {\n    submitting.value = true\n    \n    // é€šè¿‡Vuexæäº¤è¯·å‡ç”³è¯·\n    await store.dispatch('submitLeaveApplication', {\n      type: form.type,\n      start: form.start,\n      end: form.end,\n      reason: form.reason,\n      courseName: courseName.value\n    })\n    \n    alert('è¯·å‡ç”³è¯·å·²æäº¤ï¼Œç­‰å¾…è€å¸ˆå®¡æ‰¹')\n    \n    // è·³è½¬åˆ°è®°å½•é¡µé¢\n    router.push('records')\n    \n  } catch (error) {\n    console.error('æäº¤è¯·å‡ç”³è¯·å¤±è´¥:', error)\n    alert('æäº¤å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•')\n  } finally {\n    submitting.value = false\n  }\n}\n</script>\n\n<style scoped>\n.leave-apply { padding: 24px; max-width: 800px; margin: 0 auto; }\n.card { background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); }\nh3 { margin-top: 0; margin-bottom: 24px; color: #333; }\n.form-group { margin-bottom: 20px; }\nlabel { display: block; margin-bottom: 8px; font-weight: 500; color: #666; }\nselect, input, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }\n.date-row { display: flex; gap: 10px; align-items: center; }\n.submit-btn { background: #2A5CAA; color: white; border: none; padding: 12px 30px; border-radius: 4px; cursor: pointer; font-size: 16px; width: 100%; margin-top: 10px; }\n.submit-btn:hover { opacity: 0.9; }\n</style>"],"mappings":"AAiCA,SAASA,QAAQ,EAAEC,GAAG,EAAEC,SAAS,QAAQ,KAAI;AAC7C,SAASC,SAAS,QAAQ,YAAW;AACrC,SAASC,QAAQ,QAAQ,MAAK;;;;;;;IAE9B,MAAMC,MAAM,GAAGF,SAAS,CAAC;IACzB,MAAMG,KAAK,GAAGF,QAAQ,CAAC;IACvB,MAAMG,UAAU,GAAGN,GAAG,CAAC,KAAK;IAC5B,MAAMO,UAAU,GAAGP,GAAG,CAAC,EAAE;IACzB,MAAMQ,IAAI,GAAGT,QAAQ,CAAC;MAAEU,IAAI,EAAE,MAAM;MAAEC,KAAK,EAAE,EAAE;MAAEC,GAAG,EAAE,EAAE;MAAEC,MAAM,EAAE;IAAG,CAAC;IAEtEX,SAAS,CAAC,MAAM;MACdM,UAAU,CAACM,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,mBAAmB,CAAC,IAAI,qBAAoB;IACtF,CAAC;IAED,MAAMC,MAAM,GAAG,MAAAA,CAAA,KAAY;MACzB,IAAI,CAACR,IAAI,CAACI,MAAM,EAAE;QAChBK,KAAK,CAAC,SAAS;QACf;MACF;MAEA,IAAI,CAACT,IAAI,CAACE,KAAK,IAAI,CAACF,IAAI,CAACG,GAAG,EAAE;QAC5BM,KAAK,CAAC,SAAS;QACf;MACF;MAEA,IAAI,IAAIC,IAAI,CAACV,IAAI,CAACE,KAAK,CAAC,IAAI,IAAIQ,IAAI,CAACV,IAAI,CAACG,GAAG,CAAC,EAAE;QAC9CM,KAAK,CAAC,cAAc;QACpB;MACF;MAEA,IAAI;QACFX,UAAU,CAACO,KAAK,GAAG,IAAG;;QAEtB;QACA,MAAMR,KAAK,CAACc,QAAQ,CAAC,wBAAwB,EAAE;UAC7CV,IAAI,EAAED,IAAI,CAACC,IAAI;UACfC,KAAK,EAAEF,IAAI,CAACE,KAAK;UACjBC,GAAG,EAAEH,IAAI,CAACG,GAAG;UACbC,MAAM,EAAEJ,IAAI,CAACI,MAAM;UACnBL,UAAU,EAAEA,UAAU,CAACM;QACzB,CAAC;QAEDI,KAAK,CAAC,gBAAgB;;QAEtB;QACAb,MAAM,CAACgB,IAAI,CAAC,SAAS;MAEvB,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,WAAW,EAAEA,KAAK;QAChCJ,KAAK,CAAC,YAAY;MACpB,CAAC,SAAS;QACRX,UAAU,CAACO,KAAK,GAAG,KAAI;MACzB;IACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}