{"ast":null,"code":"import { ref, onMounted } from 'vue';\nexport default {\n  __name: 'Approval',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const courseName = ref('');\n    const requests = ref([]);\n\n    // ÂÅáÊï∞ÊçÆ\n    const mockRequests = [{\n      id: 101,\n      studentName: 'Li Ming',\n      studentId: '2023001',\n      type: 'sick',\n      typeText: 'Sick Leave',\n      reason: 'Fever 39¬∞C last night, currently receiving treatment at the school hospital. Attached hospital certificate.',\n      startDate: '2025-11-29',\n      endDate: '2025-11-30',\n      days: 2\n    }, {\n      id: 102,\n      studentName: 'Wang Fang',\n      studentId: '2023003',\n      type: 'event',\n      typeText: 'Personal Leave',\n      reason: 'Elder sister\\'s wedding, need to go home to help.',\n      startDate: '2025-12-01',\n      endDate: '2025-12-03',\n      days: 3\n    }, {\n      id: 103,\n      studentName: 'Zhao Qiang',\n      studentId: '2023004',\n      type: 'sick',\n      typeText: 'Sick Leave',\n      reason: 'Acute gastroenteritis.',\n      startDate: '2025-11-29',\n      endDate: '2025-11-29',\n      days: 1\n    }];\n    onMounted(async () => {\n      courseName.value = sessionStorage.getItem('selectedCourseName') || 'Modern Cryptography';\n      // ÂêåÊ†∑Â∞ùËØïË∞ÉÊé•Âè£ÔºåÂ§±Ë¥•Áî®ÂÅáÊï∞ÊçÆ\n      try {\n        const res = await fetch('http://127.0.0.1:8081/teacher/leave-requests/pending', {\n          headers: {\n            'token': localStorage.getItem('token')\n          }\n        });\n        const data = await res.json();\n        if (data.code === 1 && data.data.rows.length > 0) {\n          // ËøôÈáåÂ¶ÇÊûúÁúüÊúâÊï∞ÊçÆÔºåÈúÄË¶ÅÈÄÇÈÖçÂ≠óÊÆµÔºå‰∏∫‰∫Ü‰øùÈô©ÔºåÊºîÁ§∫Êó∂ËøòÊòØÊ∑∑ÂÖ•ÂÅáÊï∞ÊçÆÊØîËæÉÁ®≥\n          // ÁúüÂÆûÊÉÖÂÜµÔºöÂèØ‰ª•ÊääÂêéÁ´ØÊï∞ÊçÆ map ‰∏Ä‰∏ãÂä†ËøõÂéª\n        }\n        requests.value = mockRequests;\n      } catch (e) {\n        requests.value = mockRequests;\n      }\n    });\n    const handleAction = (id, type) => {\n      const actionText = type === 'approve' ? 'Approved' : 'Rejected';\n      if (confirm(`Are you sure you want to ${type === 'approve' ? 'approve' : 'reject'} this application?`)) {\n        // ËßÜËßâ‰∏äÁßªÈô§ËØ•Êù°ÁõÆ\n        requests.value = requests.value.filter(r => r.id !== id);\n        alert(`${actionText}ÔºÅ`);\n        // ÂèØ‰ª•Âú®ËøôÈáåÂèë‰∏™ÂºÇÊ≠•ËØ∑Ê±ÇÁªôÂêéÁ´ØÔºå‰∏çÁÆ°ÁªìÊûú\n      }\n    };\n    const __returned__ = {\n      courseName,\n      requests,\n      mockRequests,\n      handleAction,\n      ref,\n      onMounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","courseName","requests","mockRequests","id","studentName","studentId","type","typeText","reason","startDate","endDate","days","value","sessionStorage","getItem","res","fetch","headers","localStorage","data","json","code","rows","length","e","handleAction","actionText","confirm","filter","r","alert"],"sources":["/Users/zhouzhou/Downloads/fronted-fronted_new/883Fronted_English/src/views/Teacher/Teaching/course/leave/Approval.vue"],"sourcesContent":["<template>\n  <div class=\"leave-approval\">\n    <div class=\"page-header\">\n      <h1>Leave Approval</h1>\n<p>Current Course: {{ courseName }} (Pending: {{ requests.length }})</p>\n    </div>\n\n    <div class=\"card\">\n      <div v-if=\"requests.length === 0\" class=\"empty\">üéâ All requests have been processed!</div>\n\n      <div v-else class=\"request-list\">\n        <div v-for=\"req in requests\" :key=\"req.id\" class=\"req-item\">\n          <div class=\"req-info\">\n            <div class=\"student\">\n              <span class=\"name\">{{ req.studentName }}</span>\n              <span class=\"id\">{{ req.studentId }}</span>\n            </div>\n            <div class=\"reason-box\">\n              <span class=\"type-tag\" :class=\"req.type\">{{ req.typeText }}</span>\n              <p class=\"reason\">{{ req.reason }}</p>\n            </div>\n            <div class=\"time\">\n              üïí {{ req.startDate }} Ëá≥ {{ req.endDate }} (ÂÖ±{{ req.days }}Â§©)\n            </div>\n          </div>\n          <div class=\"req-actions\">\n            <button class=\"btn-approve\" @click=\"handleAction(req.id, 'approve')\">Approve</button>\n        <button class=\"btn-reject\" @click=\"handleAction(req.id, 'reject')\">Reject</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\n\nconst courseName = ref('')\nconst requests = ref([])\n\n// ÂÅáÊï∞ÊçÆ\nconst mockRequests = [\n  { id: 101, studentName: 'Li Ming', studentId: '2023001', type: 'sick', typeText: 'Sick Leave', reason: 'Fever 39¬∞C last night, currently receiving treatment at the school hospital. Attached hospital certificate.', startDate: '2025-11-29', endDate: '2025-11-30', days: 2 },\n      { id: 102, studentName: 'Wang Fang', studentId: '2023003', type: 'event', typeText: 'Personal Leave', reason: 'Elder sister\\'s wedding, need to go home to help.', startDate: '2025-12-01', endDate: '2025-12-03', days: 3 },\n      { id: 103, studentName: 'Zhao Qiang', studentId: '2023004', type: 'sick', typeText: 'Sick Leave', reason: 'Acute gastroenteritis.', startDate: '2025-11-29', endDate: '2025-11-29', days: 1 },\n]\n\nonMounted(async () => {\n  courseName.value = sessionStorage.getItem('selectedCourseName') || 'Modern Cryptography'\n  // ÂêåÊ†∑Â∞ùËØïË∞ÉÊé•Âè£ÔºåÂ§±Ë¥•Áî®ÂÅáÊï∞ÊçÆ\n  try {\n    const res = await fetch('http://127.0.0.1:8081/teacher/leave-requests/pending', {\n      headers: { 'token': localStorage.getItem('token') }\n    })\n    const data = await res.json()\n    if (data.code === 1 && data.data.rows.length > 0) {\n      // ËøôÈáåÂ¶ÇÊûúÁúüÊúâÊï∞ÊçÆÔºåÈúÄË¶ÅÈÄÇÈÖçÂ≠óÊÆµÔºå‰∏∫‰∫Ü‰øùÈô©ÔºåÊºîÁ§∫Êó∂ËøòÊòØÊ∑∑ÂÖ•ÂÅáÊï∞ÊçÆÊØîËæÉÁ®≥\n      // ÁúüÂÆûÊÉÖÂÜµÔºöÂèØ‰ª•ÊääÂêéÁ´ØÊï∞ÊçÆ map ‰∏Ä‰∏ãÂä†ËøõÂéª\n    }\n    requests.value = mockRequests\n  } catch (e) {\n    requests.value = mockRequests\n  }\n})\n\nconst handleAction = (id, type) => {\n  const actionText = type === 'approve' ? 'Approved' : 'Rejected'\n    if (confirm(`Are you sure you want to ${type === 'approve'?'approve':'reject'} this application?`)) {\n    // ËßÜËßâ‰∏äÁßªÈô§ËØ•Êù°ÁõÆ\n    requests.value = requests.value.filter(r => r.id !== id)\n    alert(`${actionText}ÔºÅ`)\n    // ÂèØ‰ª•Âú®ËøôÈáåÂèë‰∏™ÂºÇÊ≠•ËØ∑Ê±ÇÁªôÂêéÁ´ØÔºå‰∏çÁÆ°ÁªìÊûú\n  }\n}\n</script>\n\n<style scoped>\n.leave-approval { padding: 24px; }\n.card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }\n.empty { text-align: center; color: #999; padding: 40px; }\n\n.req-item { display: flex; justify-content: space-between; align-items: center; padding: 20px; border-bottom: 1px solid #eee; }\n.req-info { flex: 1; }\n\n.student { margin-bottom: 8px; font-weight: bold; }\n.student .id { color: #999; font-weight: normal; margin-left: 8px; font-size: 13px; }\n\n.reason-box { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; }\n.type-tag { padding: 2px 8px; font-size: 12px; border-radius: 4px; }\n.type-tag.sick { background: #fff1f0; color: #ff4d4f; border: 1px solid #ffccc7; }\n.type-tag.event { background: #fff7e6; color: #fa8c16; border: 1px solid #ffd591; }\n.reason { margin: 0; color: #555; }\n\n.time { font-size: 13px; color: #888; }\n\n.req-actions { display: flex; gap: 10px; }\n.btn-approve { background: #2A5CAA; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; }\n.btn-reject { background: white; border: 1px solid #ff4d4f; color: #ff4d4f; padding: 8px 16px; border-radius: 4px; cursor: pointer; }\n.btn-approve:hover { background: #1e4b8b; }\n.btn-reject:hover { background: #fff1f0; }\n</style>"],"mappings":"AAoCA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAI;;;;;;;IAEnC,MAAMC,UAAU,GAAGF,GAAG,CAAC,EAAE;IACzB,MAAMG,QAAQ,GAAGH,GAAG,CAAC,EAAE;;IAEvB;IACA,MAAMI,YAAY,GAAG,CACnB;MAAEC,EAAE,EAAE,GAAG;MAAEC,WAAW,EAAE,SAAS;MAAEC,SAAS,EAAE,SAAS;MAAEC,IAAI,EAAE,MAAM;MAAEC,QAAQ,EAAE,YAAY;MAAEC,MAAM,EAAE,6GAA6G;MAAEC,SAAS,EAAE,YAAY;MAAEC,OAAO,EAAE,YAAY;MAAEC,IAAI,EAAE;IAAE,CAAC,EAC3Q;MAAER,EAAE,EAAE,GAAG;MAAEC,WAAW,EAAE,WAAW;MAAEC,SAAS,EAAE,SAAS;MAAEC,IAAI,EAAE,OAAO;MAAEC,QAAQ,EAAE,gBAAgB;MAAEC,MAAM,EAAE,mDAAmD;MAAEC,SAAS,EAAE,YAAY;MAAEC,OAAO,EAAE,YAAY;MAAEC,IAAI,EAAE;IAAE,CAAC,EAC5N;MAAER,EAAE,EAAE,GAAG;MAAEC,WAAW,EAAE,YAAY;MAAEC,SAAS,EAAE,SAAS;MAAEC,IAAI,EAAE,MAAM;MAAEC,QAAQ,EAAE,YAAY;MAAEC,MAAM,EAAE,wBAAwB;MAAEC,SAAS,EAAE,YAAY;MAAEC,OAAO,EAAE,YAAY;MAAEC,IAAI,EAAE;IAAE,CAAC,CACnM;IAEAZ,SAAS,CAAC,YAAY;MACpBC,UAAU,CAACY,KAAK,GAAGC,cAAc,CAACC,OAAO,CAAC,oBAAoB,CAAC,IAAI,qBAAoB;MACvF;MACA,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,sDAAsD,EAAE;UAC9EC,OAAO,EAAE;YAAE,OAAO,EAAEC,YAAY,CAACJ,OAAO,CAAC,OAAO;UAAE;QACpD,CAAC;QACD,MAAMK,IAAI,GAAG,MAAMJ,GAAG,CAACK,IAAI,CAAC;QAC5B,IAAID,IAAI,CAACE,IAAI,KAAK,CAAC,IAAIF,IAAI,CAACA,IAAI,CAACG,IAAI,CAACC,MAAM,GAAG,CAAC,EAAE;UAChD;UACA;QAAA;QAEFtB,QAAQ,CAACW,KAAK,GAAGV,YAAW;MAC9B,CAAC,CAAC,OAAOsB,CAAC,EAAE;QACVvB,QAAQ,CAACW,KAAK,GAAGV,YAAW;MAC9B;IACF,CAAC;IAED,MAAMuB,YAAY,GAAGA,CAACtB,EAAE,EAAEG,IAAI,KAAK;MACjC,MAAMoB,UAAU,GAAGpB,IAAI,KAAK,SAAS,GAAG,UAAU,GAAG,UAAS;MAC5D,IAAIqB,OAAO,CAAC,4BAA4BrB,IAAI,KAAK,SAAS,GAAC,SAAS,GAAC,QAAQ,oBAAoB,CAAC,EAAE;QACpG;QACAL,QAAQ,CAACW,KAAK,GAAGX,QAAQ,CAACW,KAAK,CAACgB,MAAM,CAACC,CAAC,IAAIA,CAAC,CAAC1B,EAAE,KAAKA,EAAE;QACvD2B,KAAK,CAAC,GAAGJ,UAAU,GAAG;QACtB;MACF;IACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}