{"ast":null,"code":"import { ref, reactive, onMounted } from 'vue';\nexport default /*@__PURE__*/Object.assign({\n  name: 'LeaveRecords'\n}, {\n  __name: 'Records',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const queryForm = reactive({\n      status: null\n    });\n    const loading = ref(false);\n    const records = ref([]);\n    onMounted(() => {\n      loadRecords();\n    });\n    const loadRecords = async () => {\n      loading.value = true;\n      try {\n        const params = new URLSearchParams();\n        params.append('page', '1');\n        params.append('pageSize', '100');\n        if (queryForm.status !== null) {\n          params.append('status', queryForm.status.toString());\n        }\n        const response = await fetch(`http://127.0.0.1:8081/teacher/leave-requests/pending?${params.toString()}`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({}));\n          throw new Error(errorData.msg || `Request failed: ${response.status}`);\n        }\n        const result = await response.json();\n        if (result.code === 1 && result.data) {\n          records.value = result.data.rows || [];\n        } else {\n          throw new Error(result.msg || 'Search failed');\n        }\n      } catch (error) {\n        console.error('Failed to search leave records:', error);\n        alert(error instanceof Error ? error.message : 'Search failed, please try again later');\n        records.value = [];\n      } finally {\n        loading.value = false;\n      }\n    };\n    const getStatusName = status => {\n      const statusMap = {\n        1: 'Pending',\n        2: 'Approved',\n        3: 'Rejected'\n      };\n      return statusMap[status] || 'Unknown';\n    };\n    const formatTime = time => {\n      if (!time) return '-';\n      try {\n        const date = new Date(time);\n        return date.toLocaleString('en-US');\n      } catch {\n        return time;\n      }\n    };\n    const __returned__ = {\n      queryForm,\n      loading,\n      records,\n      loadRecords,\n      getStatusName,\n      formatTime,\n      ref,\n      reactive,\n      onMounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n});","map":{"version":3,"names":["ref","reactive","onMounted","queryForm","status","loading","records","loadRecords","value","params","URLSearchParams","append","toString","response","fetch","method","headers","ok","errorData","json","catch","Error","msg","result","code","data","rows","error","console","alert","message","getStatusName","statusMap","formatTime","time","date","Date","toLocaleString"],"sources":["/Users/zhouzhou/Downloads/fronted-fronted_new/883Fronted_English/src/views/Teacher/Teaching/course/leave/Records.vue"],"sourcesContent":["<!-- src/views/teaching/leave/Records.vue -->\n<template>\n  <div class=\"leave-records\">\n    <div class=\"page-header\">\n      <h1>Leave Records</h1>\n      <p class=\"page-description\">View all leave application records</p>\n    </div>\n\n    <!-- 筛选区域 -->\n    <section class=\"card filter-card\">\n      <div class=\"filter-form\">\n        <div class=\"form-row\">\n          <div class=\"form-group\">\n            <label for=\"status_filter\" class=\"form-label\">Status Filter</label>\n            <select id=\"status_filter\" v-model.number=\"queryForm.status\" class=\"form-select\">\n              <option :value=\"null\">All</option>\n        <option :value=\"1\">Pending</option>\n        <option :value=\"2\">Approved</option>\n        <option :value=\"3\">Rejected</option>\n            </select>\n          </div>\n          <div class=\"form-actions-inline\">\n            <button type=\"button\" class=\"button\" @click=\"loadRecords\" :disabled=\"loading\">\n              <span v-if=\"loading\">Searching...</span>\n          <span v-else>Search</span>\n            </button>\n          </div>\n        </div>\n      </div>\n    </section>\n\n    <!-- 请假记录列表 -->\n    <section v-if=\"records.length > 0\" class=\"card records-card\">\n      <header class=\"card-header\">\n        <h3>Leave Records</h3>\n      </header>\n      <div class=\"records-table-wrapper\">\n        <table class=\"records-table\">\n          <thead>\n            <tr>\n              <th>Application ID</th>\n          <th>Reason</th>\n          <th>Start Time</th>\n          <th>End Time</th>\n          <th>Status</th>\n          <th>Approval Comments</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"record in records\" :key=\"record.request_id\">\n              <td>{{ record.request_id }}</td>\n              <td>{{ record.reason }}</td>\n              <td>{{ formatTime(record.start_time) }}</td>\n              <td>{{ formatTime(record.end_time) }}</td>\n              <td>\n                <span :class=\"['status-badge', `status-${record.status}`]\">\n                  {{ getStatusName(record.status) }}\n                </span>\n              </td>\n              <td>\n                <span v-if=\"record.approval_remarks\">{{ record.approval_remarks }}</span>\n                <span v-else class=\"text-muted\">-</span>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </section>\n\n    <!-- 空状态 -->\n    <section v-if=\"!loading && records.length === 0\" class=\"card empty-card\">\n      <div class=\"empty-state\">\n        <p>No leave records available</p>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted } from 'vue'\n\ndefineOptions({\n  name: 'LeaveRecords'\n})\n\nconst queryForm = reactive({\n  status: null\n})\n\nconst loading = ref(false)\nconst records = ref([])\n\nonMounted(() => {\n  loadRecords()\n})\n\nconst loadRecords = async () => {\n  loading.value = true\n  try {\n    const params = new URLSearchParams()\n    params.append('page', '1')\n    params.append('pageSize', '100')\n    if (queryForm.status !== null) {\n      params.append('status', queryForm.status.toString())\n    }\n\n    const response = await fetch(\n      `http://127.0.0.1:8081/teacher/leave-requests/pending?${params.toString()}`,\n      {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }\n    )\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}))\n      throw new Error(errorData.msg || `Request failed: ${response.status}`)\n    }\n\n    const result = await response.json()\n\n    if (result.code === 1 && result.data) {\n      records.value = result.data.rows || []\n    } else {\n      throw new Error(result.msg || 'Search failed')\n    }\n  } catch (error) {\n    console.error('Failed to search leave records:', error)\n    alert(error instanceof Error ? error.message : 'Search failed, please try again later')\n    records.value = []\n  } finally {\n    loading.value = false\n  }\n}\n\nconst getStatusName = status => {\n  const statusMap = {\n    1: 'Pending',\n    2: 'Approved',\n    3: 'Rejected'\n  }\n  return statusMap[status] || 'Unknown'\n}\n\nconst formatTime = time => {\n  if (!time) return '-'\n  try {\n    const date = new Date(time)\n    return date.toLocaleString('en-US')\n  } catch {\n    return time\n  }\n}\n</script>\n\n<style scoped>\n.leave-records {\n  padding: 24px;\n  max-inline-size: 1400px;\n  margin: 0 auto;\n}\n\n.page-header {\n  margin-block-end: 24px;\n}\n\n.page-header h1 {\n  font-size: 24px;\n  font-weight: 600;\n  color: #333;\n  margin: 0 0 8px 0;\n}\n\n.page-description {\n  color: #666;\n  font-size: 14px;\n  margin: 0;\n}\n\n.filter-card,\n.records-card,\n.empty-card {\n  margin-block-start: 24px;\n}\n\n.card {\n  background: #fff;\n  border-radius: 8px;\n  border: 1px solid #e8e8e8;\n  box-shadow: 0 6px 24px rgba(0, 0, 0, 0.05);\n}\n\n.card-header {\n  padding: 20px 24px;\n  border-block-end: 1px solid #f0f0f0;\n}\n\n.card-header h3 {\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: #333;\n}\n\n.button {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  padding: 8px 16px;\n  border-radius: 4px;\n  border: none;\n  background: #2A5CAA;\n  color: #fff;\n  font-size: 14px;\n  cursor: pointer;\n  transition: background 0.2s ease, opacity 0.2s ease;\n}\n\n.button:hover:not(:disabled) {\n  background: #214a88;\n}\n\n.button:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.filter-form {\n  padding: 24px;\n}\n\n.form-row {\n  display: flex;\n  gap: 16px;\n  align-items: flex-end;\n  flex-wrap: wrap;\n}\n\n.form-group {\n  flex: 1;\n  min-inline-size: 200px;\n}\n\n.form-label {\n  display: block;\n  font-size: 14px;\n  font-weight: 500;\n  color: #333;\n  margin-block-end: 8px;\n}\n\n.form-select {\n  inline-size: 100%;\n  padding: 8px 12px;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  font-size: 14px;\n  background-color: #fff;\n  outline: none;\n  transition: all 0.3s;\n}\n\n.form-select:focus {\n  border-color: #2A5CAA;\n  box-shadow: 0 0 0 2px rgba(42, 92, 170, 0.1);\n}\n\n.form-actions-inline {\n  display: flex;\n  gap: 12px;\n  flex-shrink: 0;\n}\n\n.records-table-wrapper {\n  overflow-x: auto;\n  padding: 16px;\n}\n\n.records-table {\n  inline-size: 100%;\n  border-collapse: collapse;\n  font-size: 14px;\n}\n\n.records-table th,\n.records-table td {\n  padding: 12px;\n  text-align: start;\n  border-block-end: 1px solid #e8e8e8;\n}\n\n.records-table th {\n  background: #fafafa;\n  font-weight: 600;\n  color: #333;\n}\n\n.records-table tbody tr:hover {\n  background: #f5f7fa;\n}\n\n.status-badge {\n  display: inline-block;\n  padding: 2px 8px;\n  border-radius: 4px;\n  font-size: 12px;\n  font-weight: 500;\n}\n\n.status-1 {\n  background: #fff2e8;\n  color: #fa8c16;\n  border: 1px solid #ffd591;\n}\n\n.status-2 {\n  background: #f6ffed;\n  color: #52c41a;\n  border: 1px solid #b7eb8f;\n}\n\n.status-3 {\n  background: #fff1f0;\n  color: #ff4d4f;\n  border: 1px solid #ffccc7;\n}\n\n.text-muted {\n  color: #999;\n}\n\n.empty-state {\n  padding: 48px;\n  text-align: center;\n  color: #999;\n  font-size: 16px;\n}\n</style>\n"],"mappings":"AA+EA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,KAAI;;;;;;;;;IAM7C,MAAMC,SAAS,GAAGF,QAAQ,CAAC;MACzBG,MAAM,EAAE;IACV,CAAC;IAED,MAAMC,OAAO,GAAGL,GAAG,CAAC,KAAK;IACzB,MAAMM,OAAO,GAAGN,GAAG,CAAC,EAAE;IAEtBE,SAAS,CAAC,MAAM;MACdK,WAAW,CAAC;IACd,CAAC;IAED,MAAMA,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC9BF,OAAO,CAACG,KAAK,GAAG,IAAG;MACnB,IAAI;QACF,MAAMC,MAAM,GAAG,IAAIC,eAAe,CAAC;QACnCD,MAAM,CAACE,MAAM,CAAC,MAAM,EAAE,GAAG;QACzBF,MAAM,CAACE,MAAM,CAAC,UAAU,EAAE,KAAK;QAC/B,IAAIR,SAAS,CAACC,MAAM,KAAK,IAAI,EAAE;UAC7BK,MAAM,CAACE,MAAM,CAAC,QAAQ,EAAER,SAAS,CAACC,MAAM,CAACQ,QAAQ,CAAC,CAAC;QACrD;QAEA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAC1B,wDAAwDL,MAAM,CAACG,QAAQ,CAAC,CAAC,EAAE,EAC3E;UACEG,MAAM,EAAE,KAAK;UACbC,OAAO,EAAE;YACP,cAAc,EAAE;UAClB;QACF,CACF;QAEA,IAAI,CAACH,QAAQ,CAACI,EAAE,EAAE;UAChB,MAAMC,SAAS,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;UACxD,MAAM,IAAIC,KAAK,CAACH,SAAS,CAACI,GAAG,IAAI,mBAAmBT,QAAQ,CAACT,MAAM,EAAE;QACvE;QAEA,MAAMmB,MAAM,GAAG,MAAMV,QAAQ,CAACM,IAAI,CAAC;QAEnC,IAAII,MAAM,CAACC,IAAI,KAAK,CAAC,IAAID,MAAM,CAACE,IAAI,EAAE;UACpCnB,OAAO,CAACE,KAAK,GAAGe,MAAM,CAACE,IAAI,CAACC,IAAI,IAAI,EAAC;QACvC,CAAC,MAAM;UACL,MAAM,IAAIL,KAAK,CAACE,MAAM,CAACD,GAAG,IAAI,eAAe;QAC/C;MACF,CAAC,CAAC,OAAOK,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,iCAAiC,EAAEA,KAAK;QACtDE,KAAK,CAACF,KAAK,YAAYN,KAAK,GAAGM,KAAK,CAACG,OAAO,GAAG,uCAAuC;QACtFxB,OAAO,CAACE,KAAK,GAAG,EAAC;MACnB,CAAC,SAAS;QACRH,OAAO,CAACG,KAAK,GAAG,KAAI;MACtB;IACF;IAEA,MAAMuB,aAAa,GAAG3B,MAAM,IAAI;MAC9B,MAAM4B,SAAS,GAAG;QAChB,CAAC,EAAE,SAAS;QACZ,CAAC,EAAE,UAAU;QACb,CAAC,EAAE;MACL;MACA,OAAOA,SAAS,CAAC5B,MAAM,CAAC,IAAI,SAAQ;IACtC;IAEA,MAAM6B,UAAU,GAAGC,IAAI,IAAI;MACzB,IAAI,CAACA,IAAI,EAAE,OAAO,GAAE;MACpB,IAAI;QACF,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAACF,IAAI;QAC1B,OAAOC,IAAI,CAACE,cAAc,CAAC,OAAO;MACpC,CAAC,CAAC,MAAM;QACN,OAAOH,IAAG;MACZ;IACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}