{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"homework-publish\"\n};\nconst _hoisted_2 = {\n  class: \"card form-card\"\n};\nconst _hoisted_3 = {\n  class: \"form-group\"\n};\nconst _hoisted_4 = {\n  class: \"course-badge\"\n};\nconst _hoisted_5 = {\n  class: \"form-group\"\n};\nconst _hoisted_6 = {\n  class: \"form-group\"\n};\nconst _hoisted_7 = {\n  class: \"form-row\"\n};\nconst _hoisted_8 = {\n  class: \"form-group half\"\n};\nconst _hoisted_9 = {\n  class: \"form-group half\"\n};\nconst _hoisted_10 = {\n  class: \"form-actions\"\n};\nconst _hoisted_11 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[10] || (_cache[10] = _createElementVNode(\"div\", {\n    class: \"page-header\"\n  }, [_createElementVNode(\"h1\", null, \"发布作业\"), _createElementVNode(\"p\", {\n    class: \"page-description\"\n  }, \"为当前课程发布新的学习任务\")], -1 /* CACHED */)), _createElementVNode(\"section\", _hoisted_2, [_createElementVNode(\"form\", {\n    onSubmit: _withModifiers($setup.handleSubmit, [\"prevent\"]),\n    class: \"homework-form\"\n  }, [_createElementVNode(\"div\", _hoisted_3, [_cache[4] || (_cache[4] = _createElementVNode(\"label\", null, \"所属课程\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_4, _toDisplayString($setup.courseName) + \" (ID: \" + _toDisplayString($setup.formData.class_id) + \")\", 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_5, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n    class: \"form-label required\"\n  }, \"作业标题\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.formData.title = $event),\n    type: \"text\",\n    placeholder: \"请输入作业标题\",\n    class: \"input\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.formData.title]])]), _createElementVNode(\"div\", _hoisted_6, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"作业描述\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.formData.description = $event),\n    class: \"form-textarea\",\n    placeholder: \"请输入作业详细描述\",\n    rows: \"6\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.formData.description]])]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    class: \"form-label required\"\n  }, \"截止日期\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.formData.due_date = $event),\n    type: \"datetime-local\",\n    class: \"input\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.formData.due_date]])]), _createElementVNode(\"div\", _hoisted_9, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"允许迟交\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.formData.allow_late = $event),\n    class: \"input\"\n  }, [...(_cache[8] || (_cache[8] = [_createElementVNode(\"option\", {\n    value: 0\n  }, \"不允许\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: 1\n  }, \"允许\", -1 /* CACHED */)]))], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.formData.allow_late]])])]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"button-submit\",\n    disabled: $setup.loading\n  }, _toDisplayString($setup.loading ? '发布中...' : '立即发布'), 9 /* TEXT, PROPS */, _hoisted_11)])], 32 /* NEED_HYDRATION */)])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onSubmit","_withModifiers","$setup","handleSubmit","_hoisted_3","_hoisted_4","_toDisplayString","courseName","formData","class_id","_hoisted_5","title","$event","type","placeholder","_hoisted_6","description","rows","_hoisted_7","_hoisted_8","due_date","_hoisted_9","allow_late","value","_hoisted_10","disabled","loading","_hoisted_11"],"sources":["D:\\vvvvvvvvvscode_workspace\\fronted\\883Fronted_Final\\src\\views\\Teacher\\Teaching\\course\\homework\\Publish.vue"],"sourcesContent":["<template>\n  <div class=\"homework-publish\">\n    <div class=\"page-header\">\n      <h1>发布作业</h1>\n      <p class=\"page-description\">为当前课程发布新的学习任务</p>\n    </div>\n\n    <section class=\"card form-card\">\n      <form @submit.prevent=\"handleSubmit\" class=\"homework-form\">\n        <div class=\"form-group\">\n          <label>所属课程</label>\n          <div class=\"course-badge\">{{ courseName }} (ID: {{ formData.class_id }})</div>\n        </div>\n\n        <div class=\"form-group\">\n          <label class=\"form-label required\">作业标题</label>\n          <input\n              v-model=\"formData.title\"\n              type=\"text\"\n              placeholder=\"请输入作业标题\"\n              class=\"input\"\n          />\n        </div>\n\n        <div class=\"form-group\">\n          <label class=\"form-label\">作业描述</label>\n          <textarea\n              v-model=\"formData.description\"\n              class=\"form-textarea\"\n              placeholder=\"请输入作业详细描述\"\n              rows=\"6\"\n          ></textarea>\n        </div>\n\n        <div class=\"form-row\">\n          <div class=\"form-group half\">\n            <label class=\"form-label required\">截止日期</label>\n            <input v-model=\"formData.due_date\" type=\"datetime-local\" class=\"input\" />\n          </div>\n          <div class=\"form-group half\">\n            <label class=\"form-label\">允许迟交</label>\n            <select v-model=\"formData.allow_late\" class=\"input\">\n              <option :value=\"0\">不允许</option>\n              <option :value=\"1\">允许</option>\n            </select>\n          </div>\n        </div>\n\n        <div class=\"form-actions\">\n          <button type=\"submit\" class=\"button-submit\" :disabled=\"loading\">\n            {{ loading ? '发布中...' : '立即发布' }}\n          </button>\n        </div>\n      </form>\n    </section>\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted } from 'vue'\n\nconst courseName = ref('')\nconst loading = ref(false)\nconst formData = reactive({\n  class_id: '',\n  title: 'Lab 3: 密码学算法实现',\n  description: '请实现 RSA 算法的密钥生成、加密和解密过程。提交源代码和实验报告。',\n  due_date: '2025-12-31T23:59',\n  allow_late: 1\n})\n\nonMounted(() => {\n  courseName.value = sessionStorage.getItem('selectedCourseName') || 'Modern Cryptography'\n  formData.class_id = sessionStorage.getItem('selectedClassId') || '1'\n})\n\nconst handleSubmit = async () => {\n  if (!formData.title) return alert('请输入标题')\n  loading.value = true\n\n  try {\n    // 1. 尝试真实请求\n    const res = await fetch(`http://127.0.0.1:8081/teacher/classes/${formData.class_id}/homeworks`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json', 'token': localStorage.getItem('token') },\n      body: JSON.stringify({\n        title: formData.title,\n        description: formData.description,\n        due_date: new Date(formData.due_date).toISOString(),\n        allow_late_submission: formData.allow_late\n      })\n    })\n    // 2. 无论后端返回啥，演示时都算成功\n    console.log('后端响应:', res.status)\n  } catch (e) {\n    console.warn('后端连接失败，走演示模式')\n  } finally {\n    loading.value = false\n    alert('作业发布成功！\\n(演示模式：已自动通知所有学生)')\n  }\n}\n</script>\n\n<style scoped>\n.homework-publish { padding: 24px; max-width: 800px; margin: 0 auto; }\n.form-card { background: #fff; padding: 30px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }\n.page-header h1 { font-size: 24px; margin-bottom: 5px; }\n\n.form-group { margin-bottom: 24px; }\n.form-row { display: flex; gap: 20px; }\n.half { flex: 1; }\n\n.form-label { display: block; font-weight: 500; margin-bottom: 8px; color: #333; }\n.course-badge { background: #f0f7ff; color: #2A5CAA; padding: 10px; border-radius: 6px; font-weight: bold; border: 1px solid #d6e4ff; }\n\n.input, .form-textarea {\n  width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px;\n}\n.input:focus, .form-textarea:focus { border-color: #2A5CAA; outline: none; }\n\n.button-submit {\n  width: 100%; padding: 14px; background: #2A5CAA; color: white; border: none;\n  border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer;\n}\n.button-submit:disabled { background: #ccc; }\n.button-submit:hover:not(:disabled) { background: #1e4b8b; }\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAkB;;EAMlBA,KAAK,EAAC;AAAgB;;EAEtBA,KAAK,EAAC;AAAY;;EAEhBA,KAAK,EAAC;AAAc;;EAGtBA,KAAK,EAAC;AAAY;;EAUlBA,KAAK,EAAC;AAAY;;EAUlBA,KAAK,EAAC;AAAU;;EACdA,KAAK,EAAC;AAAiB;;EAIvBA,KAAK,EAAC;AAAiB;;EASzBA,KAAK,EAAC;AAAc;;;uBA/C/BC,mBAAA,CAsDM,OAtDNC,UAsDM,G,4BArDJC,mBAAA,CAGM;IAHDH,KAAK,EAAC;EAAa,IACtBG,mBAAA,CAAa,YAAT,MAAI,GACRA,mBAAA,CAA6C;IAA1CH,KAAK,EAAC;EAAkB,GAAC,eAAa,E,qBAG3CG,mBAAA,CA+CU,WA/CVC,UA+CU,GA9CRD,mBAAA,CA6CO;IA7CAE,QAAM,EAAAC,cAAA,CAAUC,MAAA,CAAAC,YAAY;IAAER,KAAK,EAAC;MACzCG,mBAAA,CAGM,OAHNM,UAGM,G,0BAFJN,mBAAA,CAAmB,eAAZ,MAAI,qBACXA,mBAAA,CAA8E,OAA9EO,UAA8E,EAAAC,gBAAA,CAAjDJ,MAAA,CAAAK,UAAU,IAAG,QAAM,GAAAD,gBAAA,CAAGJ,MAAA,CAAAM,QAAQ,CAACC,QAAQ,IAAG,GAAC,gB,GAG1EX,mBAAA,CAQM,OARNY,UAQM,G,0BAPJZ,mBAAA,CAA+C;IAAxCH,KAAK,EAAC;EAAqB,GAAC,MAAI,qB,gBACvCG,mBAAA,CAKE;+DAJWI,MAAA,CAAAM,QAAQ,CAACG,KAAK,GAAAC,MAAA;IACvBC,IAAI,EAAC,MAAM;IACXC,WAAW,EAAC,SAAS;IACrBnB,KAAK,EAAC;iDAHGO,MAAA,CAAAM,QAAQ,CAACG,KAAK,E,KAO7Bb,mBAAA,CAQM,OARNiB,UAQM,G,0BAPJjB,mBAAA,CAAsC;IAA/BH,KAAK,EAAC;EAAY,GAAC,MAAI,qB,gBAC9BG,mBAAA,CAKY;+DAJCI,MAAA,CAAAM,QAAQ,CAACQ,WAAW,GAAAJ,MAAA;IAC7BjB,KAAK,EAAC,eAAe;IACrBmB,WAAW,EAAC,WAAW;IACvBG,IAAI,EAAC;iDAHIf,MAAA,CAAAM,QAAQ,CAACQ,WAAW,E,KAOnClB,mBAAA,CAYM,OAZNoB,UAYM,GAXJpB,mBAAA,CAGM,OAHNqB,UAGM,G,0BAFJrB,mBAAA,CAA+C;IAAxCH,KAAK,EAAC;EAAqB,GAAC,MAAI,qB,gBACvCG,mBAAA,CAAyE;+DAAzDI,MAAA,CAAAM,QAAQ,CAACY,QAAQ,GAAAR,MAAA;IAAEC,IAAI,EAAC,gBAAgB;IAAClB,KAAK,EAAC;iDAA/CO,MAAA,CAAAM,QAAQ,CAACY,QAAQ,E,KAEnCtB,mBAAA,CAMM,OANNuB,UAMM,G,0BALJvB,mBAAA,CAAsC;IAA/BH,KAAK,EAAC;EAAY,GAAC,MAAI,qB,gBAC9BG,mBAAA,CAGS;+DAHQI,MAAA,CAAAM,QAAQ,CAACc,UAAU,GAAAV,MAAA;IAAEjB,KAAK,EAAC;qCAC1CG,mBAAA,CAA+B;IAAtByB,KAAK,EAAE;EAAC,GAAE,KAAG,oBACtBzB,mBAAA,CAA8B;IAArByB,KAAK,EAAE;EAAC,GAAE,IAAE,mB,6CAFNrB,MAAA,CAAAM,QAAQ,CAACc,UAAU,E,OAOxCxB,mBAAA,CAIM,OAJN0B,WAIM,GAHJ1B,mBAAA,CAES;IAFDe,IAAI,EAAC,QAAQ;IAAClB,KAAK,EAAC,eAAe;IAAE8B,QAAQ,EAAEvB,MAAA,CAAAwB;sBAClDxB,MAAA,CAAAwB,OAAO,4CAAAC,WAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}