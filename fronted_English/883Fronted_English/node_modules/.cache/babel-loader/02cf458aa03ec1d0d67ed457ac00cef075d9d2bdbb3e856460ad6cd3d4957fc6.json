{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelCheckbox as _vModelCheckbox, createTextVNode as _createTextVNode, withModifiers as _withModifiers, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nimport _imports_0 from '@/assets/images/login_left_image.jpg';\nconst _hoisted_1 = {\n  class: \"login-container\"\n};\nconst _hoisted_2 = {\n  class: \"login-content\"\n};\nconst _hoisted_3 = {\n  class: \"login-right\"\n};\nconst _hoisted_4 = {\n  class: \"login-form-wrapper\"\n};\nconst _hoisted_5 = {\n  class: \"form-group\"\n};\nconst _hoisted_6 = {\n  class: \"form-group\"\n};\nconst _hoisted_7 = {\n  class: \"form-options\"\n};\nconst _hoisted_8 = {\n  class: \"checkbox-label\"\n};\nconst _hoisted_9 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[10] || (_cache[10] = _createElementVNode(\"div\", {\n    class: \"login-left\"\n  }, [_createElementVNode(\"div\", {\n    class: \"campus-image\"\n  }, [_createElementVNode(\"img\", {\n    src: _imports_0,\n    alt: \"Campus Image\",\n    class: \"cover-img\"\n  })])], -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_cache[8] || (_cache[8] = _createElementVNode(\"div\", {\n    class: \"login-header\"\n  }, [_createElementVNode(\"h1\", null, \"Welcome to Smart Campus\"), _createElementVNode(\"p\", null, \"Smart Campus Management System\")], -1 /* CACHED */)), _createElementVNode(\"form\", {\n    onSubmit: _cache[4] || (_cache[4] = _withModifiers((...args) => $setup.handleLogin && $setup.handleLogin(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_5, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n    for: \"username\"\n  }, \"Student ID / Employee ID\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.loginForm.username = $event),\n    placeholder: \"Please enter student ID or employee ID\",\n    class: \"form-input\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.loginForm.username]])]), _createElementVNode(\"div\", _hoisted_6, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    for: \"password\"\n  }, \"Password\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.loginForm.password = $event),\n    placeholder: \"Please enter password\",\n    class: \"form-input\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.loginForm.password]])]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"label\", _hoisted_8, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"checkbox\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.loginForm.rememberMe = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelCheckbox, $setup.loginForm.rememberMe]]), _cache[7] || (_cache[7] = _createTextVNode(\" Remember Me \", -1 /* CACHED */))]), _createElementVNode(\"a\", {\n    href: \"#\",\n    class: \"forgot-password\",\n    onClick: _cache[3] || (_cache[3] = _withModifiers((...args) => $setup.handleForgotPassword && $setup.handleForgotPassword(...args), [\"prevent\"]))\n  }, \"Forgot Password?\")]), _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"login-btn\",\n    disabled: $setup.loading\n  }, _toDisplayString($setup.loading ? 'Logging in...' : 'Login'), 9 /* TEXT, PROPS */, _hoisted_9)], 32 /* NEED_HYDRATION */), _cache[9] || (_cache[9] = _createElementVNode(\"div\", {\n    class: \"account-help\"\n  }, [_createElementVNode(\"p\", null, [_createTextVNode(\"üìã \"), _createElementVNode(\"strong\", null, \"Account Information\")]), _createElementVNode(\"p\", null, \"‚Ä¢ Student Account: Student ID \"), _createElementVNode(\"p\", null, \"‚Ä¢ Teacher Account: Employee ID \"), _createElementVNode(\"p\", null, \"‚Ä¢ Admin Account: Admin ID \")], -1 /* CACHED */))])])])]);\n}","map":{"version":3,"names":["_imports_0","class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","src","alt","_hoisted_3","_hoisted_4","onSubmit","_cache","_withModifiers","args","$setup","handleLogin","_hoisted_5","for","type","id","loginForm","username","$event","placeholder","required","_hoisted_6","password","_hoisted_7","_hoisted_8","rememberMe","href","onClick","handleForgotPassword","disabled","loading","_hoisted_9"],"sources":["/Users/zhouzhou/Downloads/fronted-fronted_new/883Fronted_Final/src/views/Login.vue"],"sourcesContent":["<template>\n    <div class=\"login-container\">\n        <div class=\"login-content\">\n            <div class=\"login-left\">\n                <div class=\"campus-image\">\n                    <img src=\"@/assets/images/login_left_image.jpg\" alt=\"Campus Image\" class=\"cover-img\">\n                </div>\n            </div>\n\n            <div class=\"login-right\">\n                <div class=\"login-form-wrapper\">\n                    <div class=\"login-header\">\n                        <h1>Welcome to Smart Campus</h1>\n                        <p>Smart Campus Management System</p>\n                    </div>\n\n                    <form @submit.prevent=\"handleLogin\">\n                        <div class=\"form-group\">\n                            <label for=\"username\">Student ID / Employee ID</label>\n                            <input type=\"text\" id=\"username\" v-model=\"loginForm.username\" placeholder=\"Please enter student ID or employee ID\"\n                                class=\"form-input\" required>\n                        </div>\n\n                        <div class=\"form-group\">\n                            <label for=\"password\">Password</label>\n                            <input type=\"password\" id=\"password\" v-model=\"loginForm.password\" placeholder=\"Please enter password\"\n                                class=\"form-input\" required>\n                        </div>\n\n                        <div class=\"form-options\">\n                            <label class=\"checkbox-label\">\n                                <input type=\"checkbox\" v-model=\"loginForm.rememberMe\">\n                                Remember Me\n                            </label>\n                            <a href=\"#\" class=\"forgot-password\" @click.prevent=\"handleForgotPassword\">Forgot Password?</a>\n                        </div>\n\n                        <button type=\"submit\" class=\"login-btn\" :disabled=\"loading\">\n                            {{ loading ? 'Logging in...' : 'Login' }}\n                        </button>\n                    </form>\n\n                    <div class=\"account-help\">\n                        <p>üìã <strong>Account Information</strong></p>\n                        <p>‚Ä¢ Student Account: Student ID </p>\n                        <p>‚Ä¢ Teacher Account: Employee ID </p>\n                        <p>‚Ä¢ Admin Account: Admin ID </p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { ref, reactive } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { login } from '@/api/user'\n\nexport default {\n    name: 'Login',\n    setup() {\n        const router = useRouter()\n        const loading = ref(false)\n\n        // ÁôªÂΩïË°®ÂçïÊï∞ÊçÆ\n        const loginForm = reactive({\n            username: '',\n            password: '',\n            rememberMe: false\n        })\n\n        // ÁôªÂΩïÂ§ÑÁêÜÈÄªËæë\n        const handleLogin = async () => {\n            if (!loginForm.username || !loginForm.password) {\n                alert('Please enter username and password')\n                return\n            }\n\n            loading.value = true\n\n            try {\n                // Ë∞ÉÁî®ÁôªÂΩïAPI\n                const result = await login({\n                    username: loginForm.username,\n                    password: loginForm.password\n                })\n\n                if (result.code === 1 && result.data) {\n                    // ÂêéÁ´ØËøîÂõûÁöÑÂ≠óÊÆµÂêçÊòØcamelCase\n                    const { token, userId, username, fullName, roles } = result.data\n\n                    console.log('üîç ÁôªÂΩïÊàêÂäüÔºåÂêéÁ´ØËøîÂõûÁöÑÊï∞ÊçÆ:', result.data)\n\n                    // ‰øùÂ≠òtokenÂíåÁî®Êà∑‰ø°ÊÅØ\n                    localStorage.setItem('token', token)\n                    const userInfoToSave = {\n                        user_id: userId,           // ËΩ¨Êç¢Â≠óÊÆµÂêç\n                        username,\n                        full_name: fullName,       // ËΩ¨Êç¢Â≠óÊÆµÂêç\n                        roles,\n                        token\n                    }\n                    console.log('üíæ ‰øùÂ≠òÂà∞localStorageÁöÑÁî®Êà∑‰ø°ÊÅØ:', userInfoToSave)\n                    localStorage.setItem('userInfo', JSON.stringify(userInfoToSave))\n\n                  // Ê†πÊçÆrolesÂà§Êñ≠ËßíËâ≤Âπ∂Ë∑≥ËΩ¨\n                  const roleKeys = roles || []\n                  console.log('ÂΩìÂâçÁî®Êà∑ËßíËâ≤:', roleKeys) // Âª∫ËÆÆÂä†‰∏äËøôË°åÊó•ÂøóÔºåÊñπ‰æøÊåâF12ÁúãÁúãÂà∞Â∫ïËøîÂõû‰∫ÜÂï•\n\n                  let redirectPath = '/student/home' // ÈªòËÆ§Ë∑≥ËΩ¨\n\n                  // 1. ‰ºòÂÖàÁ≤æÁ°ÆÂåπÈÖç admin\n                  if (roleKeys.includes('super_admin')) {\n                    redirectPath = '/admin/home'\n                  }\n                  // 2. ÂÖ∂Ê¨°ÂåπÈÖç teacher\n                  else if (roleKeys.includes('teacher')) {\n                    redirectPath = '/teacher/home'\n                  }\n                  // 3. ÂÖ∂‰ªñÊÉÖÂÜµÔºàÂåÖÊã¨ studentÔºâÈÉΩÂéªÂ≠¶ÁîüÈ¶ñÈ°µ\n                  else {\n                    redirectPath = '/student/home'\n                  }\n\n                    router.push(redirectPath)\n                } else {\n                    alert(result.msg || 'Login failed, please check username and password')\n                }\n            } catch (error) {\n                console.error('ÁôªÂΩïÈîôËØØ:', error)\n                alert(error.message || 'Login failed, please try again later')\n            } finally {\n                loading.value = false\n            }\n        }\n\n        const handleForgotPassword = () => {\n            alert('Please contact administrator to reset password')\n        }\n\n        return {\n            loginForm,\n            loading,\n            handleLogin,\n            handleForgotPassword\n        }\n    }\n}\n</script>\n\n<style scoped>\n.login-container {\n    min-block-size: 100vh;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: #f0f2f5;\n}\n\n.login-content {\n    display: flex;\n    inline-size: 85%;\n    max-inline-size: 1000px;\n    block-size: 600px;\n    background: white;\n    border-radius: 16px;\n    overflow: hidden;\n    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);\n}\n\n/* Â∑¶‰æßÂõæÁâáÂå∫ */\n.login-left {\n    flex: 1.2;\n    background: #f8f9fa;\n    position: relative;\n    overflow: hidden;\n}\n\n.campus-image {\n    inline-size: 100%;\n    block-size: 100%;\n}\n\n.cover-img {\n    inline-size: 100%;\n    block-size: 100%;\n    object-fit: cover;\n    display: block;\n}\n\n/* Âè≥‰æßË°®ÂçïÂå∫ */\n.login-right {\n    flex: 1;\n    padding: 40px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    background: white;\n}\n\n.login-form-wrapper {\n    inline-size: 100%;\n    max-inline-size: 360px;\n    margin: 0 auto;\n}\n\n.login-header {\n    text-align: center;\n    margin-block-end: 30px;\n}\n\n.login-header h1 {\n    color: #2c3e50;\n    font-size: 26px;\n    font-weight: 600;\n    margin-block-end: 8px;\n}\n\n.login-header p {\n    color: #7f8c8d;\n    font-size: 14px;\n}\n\n.form-group {\n    margin-block-end: 20px;\n}\n\n.form-group label {\n    display: block;\n    margin-block-end: 8px;\n    font-weight: 500;\n    color: #2d3748;\n    font-size: 14px;\n}\n\n.form-input {\n    inline-size: 100%;\n    padding: 12px 16px;\n    border: 1px solid #e2e8f0;\n    border-radius: 8px;\n    font-size: 14px;\n    transition: all 0.3s ease;\n    background: #fafafa;\n    box-sizing: border-box;\n}\n\n.form-input:focus {\n    outline: none;\n    border-color: #2A5CAA;\n    box-shadow: 0 0 0 3px rgba(42, 92, 170, 0.1);\n    background: #fff;\n}\n\n.form-options {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-block-end: 25px;\n    font-size: 14px;\n}\n\n.checkbox-label {\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n    color: #5a6c7d;\n}\n\n.checkbox-label input {\n    margin-inline-end: 8px;\n}\n\n.forgot-password {\n    color: #2A5CAA;\n    text-decoration: none;\n    transition: color 0.2s;\n}\n\n.forgot-password:hover {\n    color: #1e4b8b;\n    text-decoration: underline;\n}\n\n.login-btn {\n    inline-size: 100%;\n    padding: 12px;\n    background: #2A5CAA;\n    color: white;\n    border: none;\n    border-radius: 8px;\n    font-size: 16px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: all 0.3s ease;\n    margin-block-end: 20px;\n}\n\n.login-btn:hover {\n    background: #1e4b8b;\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(42, 92, 170, 0.3);\n}\n\n.login-btn:disabled {\n    background: #a0aec0;\n    cursor: not-allowed;\n}\n\n/* Account InformationÂå∫Âüü */\n.account-help {\n    font-size: 12px;\n    color: #7f8c8d;\n    margin-block-start: 20px;\n    line-height: 1.6;\n    padding: 15px;\n    background-color: #f8f9fa;\n    border-radius: 8px;\n    border: 1px solid #eee;\n}\n\n.account-help p {\n    margin: 4px 0;\n}\n\n.account-help strong {\n    color: #2c3e50;\n}\n\n/* ÂìçÂ∫îÂºèËÆæËÆ° */\n@media (max-width: 768px) {\n    .login-content {\n        flex-direction: column;\n        block-size: auto;\n        inline-size: 90%;\n        margin: 20px 0;\n    }\n\n    .login-left {\n        block-size: 200px;\n        flex: none;\n    }\n\n    .login-right {\n        padding: 30px 20px;\n    }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}