{"ast":null,"code":"export default {\n  name: 'StuForum',\n  data() {\n    return {\n      searchTerm: '',\n      likingPosts: [] // Ê≠£Âú®ÁÇπËµûÁöÑÂ∏ñÂ≠êIDÂàóË°®\n    };\n  },\n  computed: {\n    // ‰ªéstoreËé∑ÂèñÊâÄÊúâÂ∏ñÂ≠ê\n    allPosts() {\n      return this.$store.getters.getAllPosts;\n    },\n    // Ëé∑ÂèñÂä†ËΩΩÁä∂ÊÄÅ\n    loadingState() {\n      return this.$store.getters.getLoadingState;\n    },\n    // ËøáÊª§ÊêúÁ¥¢ÁªìÊûú\n    filteredPosts() {\n      if (!this.searchTerm) {\n        return this.allPosts;\n      }\n      const term = this.searchTerm.toLowerCase();\n      return this.allPosts.filter(post => post.title.toLowerCase().includes(term) || post.content.toLowerCase().includes(term));\n    }\n  },\n  methods: {\n    searchPosts() {\n      if (this.searchTerm && this.filteredPosts.length === 0) {\n        alert('Ê≤°ÊúâÊâæÂà∞ÂåπÈÖçÁöÑÂ∏ñÂ≠ê');\n      }\n    },\n    goToPostDetail(postId) {\n      // üéØ Ë∑≥ËΩ¨Âà∞Â∏ñÂ≠êËØ¶ÊÉÖÈ°µ - ‰ΩøÁî®Ê≠£Á°ÆÁöÑË∑ØÂæÑ /student/postdetail\n      this.$router.push('/student/postdetail');\n    },\n    createNewPost() {\n      // Ë∑≥ËΩ¨Âà∞È¶ñÈ°µÁöÑÂø´ÈÄüÂèëÂ∏ñÂäüËÉΩ\n      this.$router.push('/student/campus');\n    },\n    // ÁÇπËµûÂ∏ñÂ≠ê\n    async likePost(postId) {\n      if (this.likingPosts.includes(postId)) return;\n      try {\n        this.likingPosts.push(postId);\n        await this.$store.dispatch('likePost', postId);\n      } catch (error) {\n        console.error('ÁÇπËµûÂ§±Ë¥•:', error);\n        this.$message?.error('ÁÇπËµûÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï');\n      } finally {\n        this.likingPosts = this.likingPosts.filter(id => id !== postId);\n      }\n    },\n    // Ê†ºÂºèÂåñÊó•Êúü\n    formatDate(dateStr) {\n      const date = new Date(dateStr);\n      const now = new Date();\n      const diff = now - date;\n      const diffDays = Math.floor(diff / (1000 * 60 * 60 * 24));\n      if (diffDays === 0) {\n        const diffHours = Math.floor(diff / (1000 * 60 * 60));\n        const diffMinutes = Math.floor(diff / (1000 * 60));\n        if (diffHours === 0) {\n          if (diffMinutes < 1) return 'ÂàöÂàö';\n          return `${diffMinutes}ÂàÜÈíüÂâç`;\n        }\n        return `${diffHours}Â∞èÊó∂Ââç`;\n      } else if (diffDays === 1) {\n        return 'Êò®Â§©';\n      } else if (diffDays < 7) {\n        return `${diffDays}Â§©Ââç`;\n      } else {\n        return date.toLocaleDateString('zh-CN', {\n          month: '2-digit',\n          day: '2-digit'\n        });\n      }\n    }\n  },\n  async mounted() {\n    // ÁªÑ‰ª∂ÊåÇËΩΩÊó∂Ëé∑ÂèñÂ∏ñÂ≠êÊï∞ÊçÆ\n    try {\n      await this.$store.dispatch('fetchPosts');\n    } catch (error) {\n      console.error('Ëé∑ÂèñÂ∏ñÂ≠êÂ§±Ë¥•:', error);\n    }\n  }\n};","map":{"version":3,"names":["name","data","searchTerm","likingPosts","computed","allPosts","$store","getters","getAllPosts","loadingState","getLoadingState","filteredPosts","term","toLowerCase","filter","post","title","includes","content","methods","searchPosts","length","alert","goToPostDetail","postId","$router","push","createNewPost","likePost","dispatch","error","console","$message","id","formatDate","dateStr","date","Date","now","diff","diffDays","Math","floor","diffHours","diffMinutes","toLocaleDateString","month","day","mounted"],"sources":["D:\\vvvvvvvvvscode_workspace\\fronted\\883Fronted_Final\\src\\views\\Student\\Campus\\StuForum.vue"],"sourcesContent":["<template>\n  <div class=\"forum-page\">\n    <main class=\"forum-container\">\n      <div class=\"forum-header\">\n        <h1>‰∫§ÊµÅÂπ≥Âè∞</h1>\n        <div class=\"search-container\">\n          <input \n            type=\"text\" \n            placeholder=\"ÊêúÁ¥¢Â∏ñÂ≠ê...\" \n            class=\"search-input\"\n            v-model=\"searchTerm\"\n            @keypress.enter=\"searchPosts\"\n          >\n          <button class=\"search-button\" @click=\"searchPosts\">\n            <i class=\"bi bi-search\"></i>\n          </button>\n        </div>\n      </div>\n\n      <div class=\"post-list\">\n        <div v-if=\"loadingState\" class=\"loading-state\">\n          <i class=\"bi bi-hourglass-split spinning\"></i>\n          <span>Âä†ËΩΩ‰∏≠...</span>\n        </div>\n        <div v-else-if=\"filteredPosts.length === 0\" class=\"empty-state\">\n          <i class=\"bi bi-chat-dots\"></i>\n          <span>{{ searchTerm ? 'Ê≤°ÊúâÊâæÂà∞ÂåπÈÖçÁöÑÂ∏ñÂ≠ê' : 'ÊöÇÊó†Â∏ñÂ≠êÔºåÂø´Êù•ÂèëÂ∏ÉÁ¨¨‰∏ÄÊù°ÂêßÔºÅ' }}</span>\n        </div>\n        <article \n          v-for=\"post in filteredPosts\" \n          :key=\"post.id\"\n          class=\"post-card\"\n          @click=\"goToPostDetail(post.id)\"\n        >\n          <div class=\"post-header\">\n            <h2 class=\"post-title\">{{ post.title }}</h2>\n            <div class=\"post-meta\">\n              <span class=\"post-author\">{{ post.author }}</span>\n              <span class=\"post-date\">{{ formatDate(post.createTime) }}</span>\n            </div>\n          </div>\n          <div class=\"post-content\">\n            <p>{{ post.content }}</p>\n          </div>\n          <div class=\"post-footer\">\n            <!-- üéØ ÁÇπÂáª\"ÈòÖËØªÊõ¥Â§ö\"Ë∑≥ËΩ¨Âà∞Â∏ñÂ≠êËØ¶ÊÉÖÈ°µ -->\n            <button class=\"read-more\" @click.stop=\"goToPostDetail(post.id)\">ÈòÖËØªÊõ¥Â§ö</button>\n            <div class=\"post-actions\">\n              <button class=\"like-btn\" @click.stop=\"likePost(post.id)\" :disabled=\"likingPosts.includes(post.id)\">\n                <i class=\"bi bi-heart\"></i> {{ post.likes || 0 }}\n              </button>\n              <span class=\"comment-count\">\n                <i class=\"bi bi-chat-left-text\"></i> {{ post.comments || 0 }}\n              </span>\n            </div>\n          </div>\n        </article>\n      </div>\n\n      <button \n        class=\"create-post-btn\" \n        aria-label=\"ÂàõÂª∫Êñ∞Â∏ñÂ≠ê\"\n        @click=\"createNewPost\"\n      >\n        <i class=\"bi bi-plus-lg\"></i>\n      </button>\n    </main>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'StuForum',\n  data() {\n    return {\n      searchTerm: '',\n      likingPosts: [] // Ê≠£Âú®ÁÇπËµûÁöÑÂ∏ñÂ≠êIDÂàóË°®\n    }\n  },\n  computed: {\n    // ‰ªéstoreËé∑ÂèñÊâÄÊúâÂ∏ñÂ≠ê\n    allPosts() {\n      return this.$store.getters.getAllPosts\n    },\n    // Ëé∑ÂèñÂä†ËΩΩÁä∂ÊÄÅ\n    loadingState() {\n      return this.$store.getters.getLoadingState\n    },\n    // ËøáÊª§ÊêúÁ¥¢ÁªìÊûú\n    filteredPosts() {\n      if (!this.searchTerm) {\n        return this.allPosts\n      }\n      \n      const term = this.searchTerm.toLowerCase()\n      return this.allPosts.filter(post => \n        post.title.toLowerCase().includes(term) || \n        post.content.toLowerCase().includes(term)\n      )\n    }\n  },\n  methods: {\n    searchPosts() {\n      if (this.searchTerm && this.filteredPosts.length === 0) {\n        alert('Ê≤°ÊúâÊâæÂà∞ÂåπÈÖçÁöÑÂ∏ñÂ≠ê')\n      }\n    },\n    goToPostDetail(postId) {\n      // üéØ Ë∑≥ËΩ¨Âà∞Â∏ñÂ≠êËØ¶ÊÉÖÈ°µ - ‰ΩøÁî®Ê≠£Á°ÆÁöÑË∑ØÂæÑ /student/postdetail\n      this.$router.push('/student/postdetail')\n    },\n    createNewPost() {\n      // Ë∑≥ËΩ¨Âà∞È¶ñÈ°µÁöÑÂø´ÈÄüÂèëÂ∏ñÂäüËÉΩ\n      this.$router.push('/student/campus')\n    },\n    \n    // ÁÇπËµûÂ∏ñÂ≠ê\n    async likePost(postId) {\n      if (this.likingPosts.includes(postId)) return\n      \n      try {\n        this.likingPosts.push(postId)\n        await this.$store.dispatch('likePost', postId)\n      } catch (error) {\n        console.error('ÁÇπËµûÂ§±Ë¥•:', error)\n        this.$message?.error('ÁÇπËµûÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï')\n      } finally {\n        this.likingPosts = this.likingPosts.filter(id => id !== postId)\n      }\n    },\n    \n    // Ê†ºÂºèÂåñÊó•Êúü\n    formatDate(dateStr) {\n      const date = new Date(dateStr)\n      const now = new Date()\n      const diff = now - date\n      const diffDays = Math.floor(diff / (1000 * 60 * 60 * 24))\n      \n      if (diffDays === 0) {\n        const diffHours = Math.floor(diff / (1000 * 60 * 60))\n        const diffMinutes = Math.floor(diff / (1000 * 60))\n        \n        if (diffHours === 0) {\n          if (diffMinutes < 1) return 'ÂàöÂàö'\n          return `${diffMinutes}ÂàÜÈíüÂâç`\n        }\n        return `${diffHours}Â∞èÊó∂Ââç`\n      } else if (diffDays === 1) {\n        return 'Êò®Â§©'\n      } else if (diffDays < 7) {\n        return `${diffDays}Â§©Ââç`\n      } else {\n        return date.toLocaleDateString('zh-CN', { \n          month: '2-digit', \n          day: '2-digit' \n        })\n      }\n    }\n  },\n  \n  async mounted() {\n    // ÁªÑ‰ª∂ÊåÇËΩΩÊó∂Ëé∑ÂèñÂ∏ñÂ≠êÊï∞ÊçÆ\n    try {\n      await this.$store.dispatch('fetchPosts')\n    } catch (error) {\n      console.error('Ëé∑ÂèñÂ∏ñÂ≠êÂ§±Ë¥•:', error)\n    }\n  }\n}\n</script>\n\n<style>\n/* Ê†∑Âºè‰øùÊåÅ‰∏çÂèò */\n:root {\n  --primary-color: #2A5CAA;\n  --secondary-color: #4CAF50;\n  --text-color: #333;\n  --light-text: #666;\n  --lighter-text: #999;\n  --bg-color: #f8f9fa;\n  --card-bg: #fff;\n  --border-color: #e0e0e0;\n  --shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  --radius: 8px;\n  --spacing: 16px;\n  --small-spacing: 8px;\n}\n\n.forum-page {\n  font-family: 'Roboto', 'PingFang SC', 'Microsoft YaHei', sans-serif;\n  color: var(--text-color);\n  background-color: var(--bg-color);\n  margin: 0;\n  padding: 0;\n  line-height: 1.6;\n}\n\n.forum-container {\n  max-inline-size: 1200px;\n  margin: 80px auto 40px;\n  padding: 0 var(--spacing);\n}\n\n.forum-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-block-end: var(--spacing);\n  flex-wrap: wrap;\n  gap: var(--spacing);\n}\n\n.forum-header h1 {\n  color: var(--primary-color);\n  margin: 0;\n  font-size: 24px;\n}\n\n.search-container {\n  display: flex;\n  align-items: center;\n  max-inline-size: 400px;\n  inline-size: 100%;\n}\n\n.search-input {\n  flex: 1;\n  padding: 10px 15px;\n  border: 1px solid var(--border-color);\n  border-radius: var(--radius) 0 0 var(--radius);\n  font-size: 16px;\n  transition: border-color 0.3s;\n}\n\n.search-input:focus {\n  outline: none;\n  border-color: var(--primary-color);\n}\n\n.search-button {\n  background-color: var(--primary-color);\n  color: white;\n  border: none;\n  padding: 10px 15px;\n  border-radius: 0 var(--radius) var(--radius) 0;\n  cursor: pointer;\n  transition: background-color 0.3s;\n}\n\n.search-button:hover {\n  background-color: #1e4a8a;\n}\n\n.post-list {\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: var(--spacing);\n  margin-block-start: var(--spacing);\n}\n\n.post-card {\n  background-color: var(--card-bg);\n  border-radius: var(--radius);\n  box-shadow: var(--shadow);\n  padding: var(--spacing);\n  transition: transform 0.3s, box-shadow 0.3s;\n  cursor: pointer;\n}\n\n.post-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n\n.post-header {\n  margin-block-end: var(--small-spacing);\n}\n\n.post-title {\n  font-size: 18px;\n  margin: 0 0 var(--small-spacing);\n  color: var(--primary-color);\n}\n\n.post-meta {\n  display: flex;\n  gap: var(--spacing);\n  font-size: 14px;\n  color: var(--light-text);\n}\n\n.post-content {\n  margin-block-end: var(--spacing);\n  color: var(--text-color);\n}\n\n.post-content p {\n  margin: 0;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n.post-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.read-more {\n  background-color: transparent;\n  color: var(--primary-color);\n  border: 1px solid var(--primary-color);\n  border-radius: var(--radius);\n  padding: 6px 12px;\n  font-size: 14px;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n\n.read-more:hover {\n  background-color: var(--primary-color);\n  color: white;\n}\n\n.post-actions {\n  display: flex;\n  align-items: center;\n  gap: var(--small-spacing);\n}\n\n.like-btn {\n  background: none;\n  border: 1px solid #e0e0e0;\n  color: var(--light-text);\n  font-size: 14px;\n  padding: 4px 8px;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.like-btn:hover:not(:disabled) {\n  background-color: #fff5f5;\n  border-color: #ff6b6b;\n  color: #ff6b6b;\n}\n\n.like-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.comment-count {\n  color: var(--light-text);\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n/* Âä†ËΩΩÂíåÁ©∫Áä∂ÊÄÅÊ†∑Âºè */\n.loading-state,\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n  color: var(--lighter-text);\n  text-align: center;\n}\n\n.loading-state i,\n.empty-state i {\n  font-size: 2.5rem;\n  margin-bottom: 16px;\n  color: var(--lighter-text);\n}\n\n.loading-state i.spinning {\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.create-post-btn {\n  position: fixed;\n  inset-block-end: 30px;\n  inset-inline-end: 30px;\n  inline-size: 56px;\n  block-size: 56px;\n  background-color: var(--secondary-color);\n  color: white;\n  border: none;\n  border-radius: 50%;\n  font-size: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n  transition: all 0.3s;\n}\n\n.create-post-btn:hover {\n  background-color: #3d8b40;\n  transform: scale(1.1);\n}\n\n/* ÂìçÂ∫îÂºèËÆæËÆ° */\n@media (max-width: 768px) {\n  .forum-header {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n  \n  .search-container {\n    max-inline-size: 100%;\n  }\n  \n  .post-footer {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: var(--small-spacing);\n  }\n  \n  .post-actions {\n    align-self: flex-end;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}