{"ast":null,"code":"import { ref, onMounted } from 'vue';\nexport default /*@__PURE__*/Object.assign({\n  name: 'HomeworkCorrect'\n}, {\n  __name: 'Correct',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n\n    // 模拟作业数据\n    const homeworkList = ref([{\n      id: 1,\n      title: 'Cryptography Basics Assignment',\n      description: 'Complete the assignment on symmetric and asymmetric encryption principles.'\n    }, {\n      id: 2,\n      title: 'Network Security Protection Assignment',\n      description: 'Analyze common network security threats and propose protection measures.'\n    }, {\n      id: 3,\n      title: 'Data Encryption Technology Assignment',\n      description: 'Implement the AES algorithm and analyze its performance characteristics.'\n    }]);\n\n    // 模拟学生数据\n    const studentsList = ref([{\n      id: 1,\n      name: 'John Smith',\n      grade: 85\n    }, {\n      id: 2,\n      name: 'Michael Johnson',\n      grade: 92\n    }, {\n      id: 3,\n      name: 'Robert Williams',\n      grade: 78\n    }, {\n      id: 4,\n      name: 'David Brown',\n      grade: 88\n    }, {\n      id: 5,\n      name: 'James Jones',\n      grade: 95\n    }]);\n    const selectedHomework = ref(null);\n    const selectedStudents = ref([]);\n    const generatingSuggestions = ref(false);\n    const teachingSuggestions = ref([]);\n    const errorMessage = ref('');\n\n    // 示例建议（AI 接口出错时显示）\n    const exampleSuggestions = [{\n      title: 'Overall Mastery',\n      content: 'Students have a good grasp of the knowledge points, with an average score around 85.'\n    }, {\n      title: 'Common Mistakes',\n      content: 'Some students confuse algorithm principles or application scenarios.'\n    }, {\n      title: 'Teaching Strategies',\n      content: 'Increase algorithm explanation and practice sessions.'\n    }, {\n      title: 'Classroom Activities',\n      content: 'Organize discussions and case analyses.'\n    }, {\n      title: 'Follow-up Homework Suggestions',\n      content: 'Design algorithm implementation and security assessment assignments.'\n    }];\n    onMounted(() => {\n      if (homeworkList.value.length > 0) {\n        selectedHomework.value = homeworkList.value[0];\n      }\n    });\n\n    // 切换学生选中状态\n    const toggleStudent = student => {\n      const index = selectedStudents.value.indexOf(student);\n      if (index === -1) selectedStudents.value.push(student);else selectedStudents.value.splice(index, 1);\n    };\n\n    // 调用 AI 教学建议接口\n    const generateTeachingSuggestions = async () => {\n      if (!selectedHomework.value || selectedStudents.value.length === 0) {\n        errorMessage.value = 'Please select homework and students';\n        return;\n      }\n      generatingSuggestions.value = true;\n      errorMessage.value = '';\n      teachingSuggestions.value = [];\n      try {\n        const response = await fetch('http://127.0.0.1:8000/api/analyze/teaching', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            homework_title: selectedHomework.value.title,\n            homework_description: selectedHomework.value.description,\n            student_submissions: selectedStudents.value.map(s => ({\n              student_name: s.name,\n              content: `${s.name}'s homework content`,\n              grade: s.grade\n            }))\n          })\n        });\n        const result = await response.json();\n        if (result.success && result.data) {\n          // 后端 AI 返回的数据结构决定这里怎么展示\n          if (Array.isArray(result.data)) {\n            teachingSuggestions.value = result.data;\n          } else if (typeof result.data === 'string') {\n            teachingSuggestions.value = [{\n              title: 'AI 建议',\n              content: result.data\n            }];\n          } else {\n            teachingSuggestions.value = [...exampleSuggestions];\n            errorMessage.value = 'AI returned unclear data format, using sample data';\n          }\n        } else {\n          teachingSuggestions.value = [...exampleSuggestions];\n          errorMessage.value = 'AI service call failed, displaying sample data';\n        }\n      } catch (err) {\n        console.error(err);\n        teachingSuggestions.value = [...exampleSuggestions];\n        errorMessage.value = 'Unable to connect to AI service, please check if 127.0.0.1:8000 is running';\n      } finally {\n        generatingSuggestions.value = false;\n      }\n    };\n    const __returned__ = {\n      homeworkList,\n      studentsList,\n      selectedHomework,\n      selectedStudents,\n      generatingSuggestions,\n      teachingSuggestions,\n      errorMessage,\n      exampleSuggestions,\n      toggleStudent,\n      generateTeachingSuggestions,\n      ref,\n      onMounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n});","map":{"version":3,"names":["ref","onMounted","homeworkList","id","title","description","studentsList","name","grade","selectedHomework","selectedStudents","generatingSuggestions","teachingSuggestions","errorMessage","exampleSuggestions","content","value","length","toggleStudent","student","index","indexOf","push","splice","generateTeachingSuggestions","response","fetch","method","headers","body","JSON","stringify","homework_title","homework_description","student_submissions","map","s","student_name","result","json","success","data","Array","isArray","err","console","error"],"sources":["/Users/zhouzhou/Downloads/fronted-fronted_new/883Fronted_English/src/views/Teacher/Teaching/course/homework/Correct.vue"],"sourcesContent":["<template>\n  <div class=\"homework-correct\">\n    <div class=\"page-header\">\n      <h1>Teaching Suggestions</h1>\n      <p class=\"page-description\">AI-assisted Homework Teaching Suggestions</p>\n    </div>\n\n    <!-- AI 教学建议区域 -->\n    <section class=\"card ai-card\">\n      <header class=\"card-header\">\n        <h3>Generate Teaching Suggestions</h3>\n      </header>\n\n      <div class=\"ai-section\">\n        <!-- 作业选择 -->\n        <div class=\"form-group\">\n          <label for=\"homeworkSelect\">Select Homework</label>\n          <select id=\"homeworkSelect\" v-model=\"selectedHomework\" class=\"input\">\n            <option value=\"\">Please select homework</option>\n            <option v-for=\"homework in homeworkList\" :key=\"homework.id\" :value=\"homework\">\n              {{ homework.title }}\n            </option>\n          </select>\n        </div>\n\n        <!-- 学生选择 -->\n        <div class=\"form-group\">\n          <label>Select Students</label>\n          <div class=\"students-select\">\n            <div v-for=\"student in studentsList\" :key=\"student.id\" class=\"student-item\"\n              :class=\"{ active: selectedStudents.includes(student) }\" @click=\"toggleStudent(student)\">\n              <input type=\"checkbox\" :value=\"student\" v-model=\"selectedStudents\" />\n              <label>{{ student.name }}</label>\n            </div>\n          </div>\n        </div>\n\n        <!-- 状态提示 -->\n        <div class=\"selected-info\">\n          <p v-if=\"selectedStudents.length > 0\">\n            Selected {{ selectedStudents.length }} students\n          </p>\n          <p v-else class=\"text-muted\">Please select at least one student</p>\n        </div>\n\n        <!-- 操作按钮 -->\n        <div class=\"form-actions\">\n          <button type=\"button\" class=\"button\" @click=\"generateTeachingSuggestions\"\n            :disabled=\"generatingSuggestions || !selectedHomework || selectedStudents.length === 0\">\n            {{ generatingSuggestions ? 'Generating...' : 'Generate Teaching Suggestions' }}\n          </button>\n        </div>\n\n        <!-- 加载/错误/结果展示 -->\n        <div v-if=\"generatingSuggestions\" class=\"loading-state\">\n          Generating teaching suggestions, please wait...\n        </div>\n        <div v-else-if=\"errorMessage\" class=\"error-state\">\n          {{ errorMessage }}\n        </div>\n        <div v-else-if=\"teachingSuggestions && teachingSuggestions.length > 0\" class=\"suggestions-result\">\n          <h4>Generated Teaching Suggestions</h4>\n          <div class=\"suggestions-list\">\n            <div v-for=\"(suggestion, index) in teachingSuggestions\" :key=\"index\" class=\"suggestion-item\">\n              <h5>{{ suggestion.title }}</h5>\n              <p>{{ suggestion.content }}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\n\ndefineOptions({ name: 'HomeworkCorrect' })\n\n// 模拟作业数据\nconst homeworkList = ref([\n  { id: 1, title: 'Cryptography Basics Assignment', description: 'Complete the assignment on symmetric and asymmetric encryption principles.' },\n  { id: 2, title: 'Network Security Protection Assignment', description: 'Analyze common network security threats and propose protection measures.' },\n  { id: 3, title: 'Data Encryption Technology Assignment', description: 'Implement the AES algorithm and analyze its performance characteristics.' }\n])\n\n// 模拟学生数据\nconst studentsList = ref([\n  { id: 1, name: 'John Smith', grade: 85 },\n  { id: 2, name: 'Michael Johnson', grade: 92 },\n  { id: 3, name: 'Robert Williams', grade: 78 },\n  { id: 4, name: 'David Brown', grade: 88 },\n  { id: 5, name: 'James Jones', grade: 95 }\n])\n\nconst selectedHomework = ref(null)\nconst selectedStudents = ref([])\nconst generatingSuggestions = ref(false)\nconst teachingSuggestions = ref([])\nconst errorMessage = ref('')\n\n// 示例建议（AI 接口出错时显示）\nconst exampleSuggestions = [\n  { title: 'Overall Mastery', content: 'Students have a good grasp of the knowledge points, with an average score around 85.' },\n  { title: 'Common Mistakes', content: 'Some students confuse algorithm principles or application scenarios.' },\n  { title: 'Teaching Strategies', content: 'Increase algorithm explanation and practice sessions.' },\n  { title: 'Classroom Activities', content: 'Organize discussions and case analyses.' },\n  { title: 'Follow-up Homework Suggestions', content: 'Design algorithm implementation and security assessment assignments.' }\n]\n\nonMounted(() => {\n  if (homeworkList.value.length > 0) {\n    selectedHomework.value = homeworkList.value[0]\n  }\n})\n\n// 切换学生选中状态\nconst toggleStudent = student => {\n  const index = selectedStudents.value.indexOf(student)\n  if (index === -1) selectedStudents.value.push(student)\n  else selectedStudents.value.splice(index, 1)\n}\n\n// 调用 AI 教学建议接口\nconst generateTeachingSuggestions = async () => {\n  if (!selectedHomework.value || selectedStudents.value.length === 0) {\n    errorMessage.value = 'Please select homework and students'\n    return\n  }\n\n  generatingSuggestions.value = true\n  errorMessage.value = ''\n  teachingSuggestions.value = []\n\n  try {\n    const response = await fetch('http://127.0.0.1:8000/api/analyze/teaching', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        homework_title: selectedHomework.value.title,\n        homework_description: selectedHomework.value.description,\n        student_submissions: selectedStudents.value.map(s => ({\n          student_name: s.name,\n          content: `${s.name}'s homework content`,\n          grade: s.grade\n        }))\n      })\n    })\n\n    const result = await response.json()\n    if (result.success && result.data) {\n      // 后端 AI 返回的数据结构决定这里怎么展示\n      if (Array.isArray(result.data)) {\n        teachingSuggestions.value = result.data\n      } else if (typeof result.data === 'string') {\n        teachingSuggestions.value = [{ title: 'AI 建议', content: result.data }]\n      } else {\n        teachingSuggestions.value = [...exampleSuggestions]\n        errorMessage.value = 'AI returned unclear data format, using sample data'\n      }\n    } else {\n      teachingSuggestions.value = [...exampleSuggestions]\n      errorMessage.value = 'AI service call failed, displaying sample data'\n    }\n  } catch (err) {\n      console.error(err)\n      teachingSuggestions.value = [...exampleSuggestions]\n      errorMessage.value = 'Unable to connect to AI service, please check if 127.0.0.1:8000 is running'\n    } finally {\n    generatingSuggestions.value = false\n  }\n}\n</script>\n\n<style scoped>\n.homework-correct {\n  padding: 24px;\n  max-inline-size: 1400px;\n  margin: 0 auto;\n}\n\n.page-header {\n  margin-block-end: 24px;\n}\n\n.page-header h1 {\n  font-size: 24px;\n  font-weight: 600;\n  color: #333;\n}\n\n.page-description {\n  color: #666;\n  font-size: 14px;\n}\n\n/* 卡片样式 */\n.card {\n  background: #fff;\n  border-radius: 10px;\n  border: 1px solid #e8e8e8;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);\n}\n\n.card-header {\n  padding: 20px 24px;\n  border-block-end: 1px solid #f0f0f0;\n}\n\n.card-header h3 {\n  font-size: 18px;\n  color: #2A5CAA;\n}\n\n.ai-section {\n  padding: 24px;\n}\n\n/* 输入框与按钮 */\n.input {\n  inline-size: 100%;\n  padding: 10px 12px;\n  border: 1px solid #d9d9d9;\n  border-radius: 6px;\n  font-size: 14px;\n}\n\n.button {\n  background: linear-gradient(135deg, #2A5CAA 0%, #1e40af 100%);\n  color: white;\n  padding: 10px 24px;\n  border-radius: 6px;\n  border: none;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.button:hover:not(:disabled) {\n  background: linear-gradient(135deg, #1e40af 0%, #1939b7 100%);\n}\n\n.button:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n/* 学生选择区域 */\n.students-select {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 12px;\n  margin-block-start: 12px;\n}\n\n.student-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 14px;\n  border: 1px solid #e0e0e0;\n  border-radius: 6px;\n  cursor: pointer;\n}\n\n.student-item.active {\n  background: #2A5CAA;\n  color: #fff;\n}\n\n/* 状态提示 */\n.selected-info {\n  margin-block-start: 20px;\n  padding: 12px 16px;\n  background: #f6ffed;\n  border: 1px solid #b7eb8f;\n  border-radius: 6px;\n  color: #52c41a;\n  font-size: 14px;\n}\n\n.text-muted {\n  color: #999;\n}\n\n/* 加载与错误 */\n.loading-state,\n.error-state {\n  margin-block-start: 20px;\n  padding: 20px;\n  border-radius: 6px;\n  text-align: center;\n  font-size: 14px;\n}\n\n.error-state {\n  background: #fff2f0;\n  border: 1px solid #ffccc7;\n  color: #cf1322;\n}\n\n/* 建议显示区域 */\n.suggestions-result {\n  margin-block-start: 24px;\n  background: #fff;\n  border: 1px solid #e8e8e8;\n  border-radius: 8px;\n  padding: 20px;\n}\n\n.suggestion-item {\n  padding: 16px;\n  border-inline-start: 4px solid #2A5CAA;\n  border-radius: 6px;\n  background: #f9fafb;\n  margin-block-end: 16px;\n}\n\n.suggestion-item h5 {\n  color: #2A5CAA;\n  margin-block-end: 8px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}