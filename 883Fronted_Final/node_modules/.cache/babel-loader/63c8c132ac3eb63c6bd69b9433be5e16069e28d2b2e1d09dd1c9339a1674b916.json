{"ast":null,"code":"import _regenerator from \"D:/vvvvvvvvvscode_workspace/fronted/883Fronted_Final/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"D:/vvvvvvvvvscode_workspace/fronted/883Fronted_Final/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { ref, onMounted } from 'vue';\nexport default {\n  __name: 'Detail',\n  setup: function setup(__props, _ref) {\n    var __expose = _ref.expose;\n    __expose();\n    var courseName = ref('');\n    var students = ref([]);\n\n    // 假数据生成器\n    var mockStudents = [{\n      id: '2023001',\n      name: '陈同学',\n      score1: 85,\n      score2: 88,\n      score3: 90,\n      total: 88.1\n    }, {\n      id: '2023002',\n      name: '林同学',\n      score1: 90,\n      score2: 92,\n      score3: 95,\n      total: 92.6\n    }, {\n      id: '2023003',\n      name: '张同学',\n      score1: 70,\n      score2: 65,\n      score3: 58,\n      total: 63.7\n    }, {\n      id: '2023004',\n      name: '刘同学',\n      score1: 60,\n      score2: 55,\n      score3: 40,\n      total: 50.5\n    }, {\n      id: '2023005',\n      name: '王同学',\n      score1: 95,\n      score2: 96,\n      score3: 98,\n      total: 96.5\n    }];\n    onMounted(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n      var classId, res, data, _t;\n      return _regenerator().w(function (_context) {\n        while (1) switch (_context.p = _context.n) {\n          case 0:\n            courseName.value = sessionStorage.getItem('selectedCourseName') || 'Modern Cryptography';\n            classId = sessionStorage.getItem('selectedClassId');\n            _context.p = 1;\n            _context.n = 2;\n            return fetch(\"http://127.0.0.1:8081/teacher/classes/\".concat(classId, \"/gradebook\"), {\n              headers: {\n                'token': localStorage.getItem('token')\n              }\n            });\n          case 2:\n            res = _context.v;\n            _context.n = 3;\n            return res.json();\n          case 3:\n            data = _context.v;\n            if (data.code === 1 && data.data && data.data.students && data.data.students.length > 0) {\n              students.value = data.data.students; // 使用真数据\n            } else {\n              students.value = mockStudents; // 使用假数据\n            }\n            _context.n = 5;\n            break;\n          case 4:\n            _context.p = 4;\n            _t = _context.v;\n            students.value = mockStudents; // 出错也用假数据\n          case 5:\n            return _context.a(2);\n        }\n      }, _callee, null, [[1, 4]]);\n    })));\n    var __returned__ = {\n      courseName: courseName,\n      students: students,\n      mockStudents: mockStudents,\n      ref: ref,\n      onMounted: onMounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","courseName","students","mockStudents","id","name","score1","score2","score3","total","_asyncToGenerator","_regenerator","m","_callee","classId","res","data","_t","w","_context","p","n","value","sessionStorage","getItem","fetch","concat","headers","localStorage","v","json","code","length","a"],"sources":["D:/vvvvvvvvvscode_workspace/fronted/883Fronted_Final/src/views/Teacher/Teaching/course/attendance/Detail.vue"],"sourcesContent":["<template>\r\n  <div class=\"grades-detail\">\r\n    <div class=\"page-header\">\r\n      <h1>成绩管理</h1>\r\n      <p>当前课程：{{ courseName }}</p>\r\n    </div>\r\n\r\n    <div class=\"card\">\r\n      <div class=\"toolbar\">\r\n        <button class=\"btn btn-primary\" @click=\"$router.push('input')\">录入成绩</button>\r\n        <button class=\"btn btn-outline\" @click=\"$router.push('composition')\">设置权重</button>\r\n        <span class=\"info\">总人数: {{ students.length }}</span>\r\n      </div>\r\n\r\n      <table class=\"data-table\">\r\n        <thead>\r\n        <tr>\r\n          <th>学号</th>\r\n          <th>姓名</th>\r\n          <th>平时 (30%)</th>\r\n          <th>期中 (30%)</th>\r\n          <th>期末 (40%)</th>\r\n          <th>总成绩</th>\r\n          <th>状态</th>\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n        <tr v-for=\"stu in students\" :key=\"stu.id\">\r\n          <td>{{ stu.id }}</td>\r\n          <td>{{ stu.name }}</td>\r\n          <td>{{ stu.score1 || '-' }}</td>\r\n          <td>{{ stu.score2 || '-' }}</td>\r\n          <td>{{ stu.score3 || '-' }}</td>\r\n          <td class=\"total\">{{ stu.total }}</td>\r\n          <td><span class=\"tag\" :class=\"stu.total >= 60 ? 'pass' : 'fail'\">{{ stu.total >= 60 ? '及格' : '不及格' }}</span></td>\r\n        </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\n\r\nconst courseName = ref('')\r\nconst students = ref([])\r\n\r\n// 假数据生成器\r\nconst mockStudents = [\r\n  { id: '2023001', name: '陈同学', score1: 85, score2: 88, score3: 90, total: 88.1 },\r\n  { id: '2023002', name: '林同学', score1: 90, score2: 92, score3: 95, total: 92.6 },\r\n  { id: '2023003', name: '张同学', score1: 70, score2: 65, score3: 58, total: 63.7 },\r\n  { id: '2023004', name: '刘同学', score1: 60, score2: 55, score3: 40, total: 50.5 },\r\n  { id: '2023005', name: '王同学', score1: 95, score2: 96, score3: 98, total: 96.5 },\r\n]\r\n\r\nonMounted(async () => {\r\n  courseName.value = sessionStorage.getItem('selectedCourseName') || 'Modern Cryptography'\r\n  const classId = sessionStorage.getItem('selectedClassId')\r\n\r\n  try {\r\n    // 尝试从后端获取\r\n    const res = await fetch(`http://127.0.0.1:8081/teacher/classes/${classId}/gradebook`, {\r\n      headers: { 'token': localStorage.getItem('token') }\r\n    })\r\n    const data = await res.json()\r\n    if (data.code === 1 && data.data && data.data.students && data.data.students.length > 0) {\r\n      students.value = data.data.students // 使用真数据\r\n    } else {\r\n      students.value = mockStudents // 使用假数据\r\n    }\r\n  } catch (e) {\r\n    students.value = mockStudents // 出错也用假数据\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.grades-detail { padding: 24px; }\r\n.card { background: white; padding: 24px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }\r\n.toolbar { display: flex; gap: 10px; margin-bottom: 20px; align-items: center; }\r\n.info { margin-left: auto; color: #666; font-size: 14px; }\r\n\r\n.btn { padding: 8px 16px; border-radius: 4px; cursor: pointer; border: none; font-size: 14px; }\r\n.btn-primary { background: #2A5CAA; color: white; }\r\n.btn-outline { background: white; border: 1px solid #ddd; color: #333; }\r\n\r\n.data-table { width: 100%; border-collapse: collapse; }\r\n.data-table th, .data-table td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }\r\n.data-table th { background: #f9fafb; font-weight: 600; color: #555; }\r\n.total { font-weight: bold; color: #2A5CAA; }\r\n\r\n.tag { padding: 2px 8px; border-radius: 4px; font-size: 12px; }\r\n.tag.pass { background: #f6ffed; color: #52c41a; }\r\n.tag.fail { background: #fff2f0; color: #ff4d4f; }\r\n</style>"],"mappings":";;;;AA2CA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;;;;;;IAEpC,IAAMC,UAAU,GAAGF,GAAG,CAAC,EAAE,CAAC;IAC1B,IAAMG,QAAQ,GAAGH,GAAG,CAAC,EAAE,CAAC;;IAExB;IACA,IAAMI,YAAY,GAAG,CACnB;MAAEC,EAAE,EAAE,SAAS;MAAEC,IAAI,EAAE,KAAK;MAAEC,MAAM,EAAE,EAAE;MAAEC,MAAM,EAAE,EAAE;MAAEC,MAAM,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAK,CAAC,EAC/E;MAAEL,EAAE,EAAE,SAAS;MAAEC,IAAI,EAAE,KAAK;MAAEC,MAAM,EAAE,EAAE;MAAEC,MAAM,EAAE,EAAE;MAAEC,MAAM,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAK,CAAC,EAC/E;MAAEL,EAAE,EAAE,SAAS;MAAEC,IAAI,EAAE,KAAK;MAAEC,MAAM,EAAE,EAAE;MAAEC,MAAM,EAAE,EAAE;MAAEC,MAAM,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAK,CAAC,EAC/E;MAAEL,EAAE,EAAE,SAAS;MAAEC,IAAI,EAAE,KAAK;MAAEC,MAAM,EAAE,EAAE;MAAEC,MAAM,EAAE,EAAE;MAAEC,MAAM,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAK,CAAC,EAC/E;MAAEL,EAAE,EAAE,SAAS;MAAEC,IAAI,EAAE,KAAK;MAAEC,MAAM,EAAE,EAAE;MAAEC,MAAM,EAAE,EAAE;MAAEC,MAAM,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAK,CAAC,CAChF;IAEDT,SAAS,cAAAU,iBAAA,cAAAC,YAAA,GAAAC,CAAA,CAAC,SAAAC,QAAA;MAAA,IAAAC,OAAA,EAAAC,GAAA,EAAAC,IAAA,EAAAC,EAAA;MAAA,OAAAN,YAAA,GAAAO,CAAA,WAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,CAAA,GAAAD,QAAA,CAAAE,CAAA;UAAA;YACRpB,UAAU,CAACqB,KAAK,GAAGC,cAAc,CAACC,OAAO,CAAC,oBAAoB,CAAC,IAAI,qBAAqB;YAClFV,OAAO,GAAGS,cAAc,CAACC,OAAO,CAAC,iBAAiB,CAAC;YAAAL,QAAA,CAAAC,CAAA;YAAAD,QAAA,CAAAE,CAAA;YAAA,OAIrCI,KAAK,0CAAAC,MAAA,CAA0CZ,OAAO,iBAAc;cACpFa,OAAO,EAAE;gBAAE,OAAO,EAAEC,YAAY,CAACJ,OAAO,CAAC,OAAO;cAAE;YACpD,CAAC,CAAC;UAAA;YAFIT,GAAG,GAAAI,QAAA,CAAAU,CAAA;YAAAV,QAAA,CAAAE,CAAA;YAAA,OAGUN,GAAG,CAACe,IAAI,CAAC,CAAC;UAAA;YAAvBd,IAAI,GAAAG,QAAA,CAAAU,CAAA;YACV,IAAIb,IAAI,CAACe,IAAI,KAAK,CAAC,IAAIf,IAAI,CAACA,IAAI,IAAIA,IAAI,CAACA,IAAI,CAACd,QAAQ,IAAIc,IAAI,CAACA,IAAI,CAACd,QAAQ,CAAC8B,MAAM,GAAG,CAAC,EAAE;cACvF9B,QAAQ,CAACoB,KAAK,GAAGN,IAAI,CAACA,IAAI,CAACd,QAAQ,EAAC;YACtC,CAAC,MAAM;cACLA,QAAQ,CAACoB,KAAK,GAAGnB,YAAY,EAAC;YAChC;YAACgB,QAAA,CAAAE,CAAA;YAAA;UAAA;YAAAF,QAAA,CAAAC,CAAA;YAAAH,EAAA,GAAAE,QAAA,CAAAU,CAAA;YAED3B,QAAQ,CAACoB,KAAK,GAAGnB,YAAY,EAAC;UAAA;YAAA,OAAAgB,QAAA,CAAAc,CAAA;QAAA;MAAA,GAAApB,OAAA;IAAA,CAEjC,GAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}