{"ast":null,"code":"import _regenerator from \"D:/vvvvvvvvvscode_workspace/fronted/883Fronted_Final/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _objectSpread from \"D:/vvvvvvvvvscode_workspace/fronted/883Fronted_Final/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"D:/vvvvvvvvvscode_workspace/fronted/883Fronted_Final/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.parse-int.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport { getStudents, addStudent, updateStudent, deleteStudents as deleteStudentsApi, getStudentById } from '@/api/admin';\nexport default {\n  name: 'StudentManage',\n  data: function data() {\n    return {\n      students: [],\n      loading: false,\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      selectedIds: [],\n      searchForm: {\n        full_name: '',\n        student_id_number: '',\n        major: '',\n        class_name: '',\n        status: ''\n      },\n      showDialog: false,\n      dialogMode: 'add',\n      formData: {\n        user_id: null,\n        username: '',\n        password: '',\n        full_name: '',\n        email: '',\n        phone_number: '',\n        gender: '',\n        major: '',\n        class_name: '',\n        grade: '',\n        enrollment_date: '',\n        status: 1\n      }\n    };\n  },\n  computed: {\n    totalPages: function totalPages() {\n      return Math.ceil(this.total / this.pageSize);\n    },\n    selectAll: {\n      get: function get() {\n        return this.students.length > 0 && this.selectedIds.length === this.students.length;\n      },\n      set: function set(value) {\n        if (value) {\n          this.selectedIds = this.students.map(function (s) {\n            return s.user_id;\n          });\n        } else {\n          this.selectedIds = [];\n        }\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.loadStudents();\n  },\n  methods: {\n    loadStudents: function loadStudents() {\n      var _this = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n        var params, result, _t;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.p = _context.n) {\n            case 0:\n              _this.loading = true;\n              _context.p = 1;\n              params = _objectSpread({\n                page: _this.currentPage,\n                pageSize: _this.pageSize\n              }, _this.searchForm);\n              _context.n = 2;\n              return getStudents(params);\n            case 2:\n              result = _context.v;\n              if (result.code === 1) {\n                // 后端返回的是驼峰命名，需要转换为前端使用的格式\n                _this.students = (result.data.rows || []).map(function (student) {\n                  return {\n                    user_id: student.userId || student.user_id,\n                    username: student.username,\n                    full_name: student.fullName || student.full_name,\n                    email: student.email,\n                    phone_number: student.phoneNumber || student.phone_number,\n                    avatar_url: student.avatarUrl || student.avatar_url,\n                    status: student.status,\n                    student_id_number: student.studentIdNumber || student.student_id_number,\n                    gender: student.gender,\n                    major: student.major,\n                    class_name: student.className || student.class_name,\n                    grade: student.grade,\n                    enrollment_date: student.enrollmentDate || student.enrollment_date\n                  };\n                });\n                _this.total = result.data.total || 0;\n                // 调试：打印学生数据，确保user_id存在\n                if (_this.students.length > 0) {\n                  console.log('学生数据示例:', _this.students[0]);\n                }\n              } else {\n                alert(result.msg || '加载失败');\n              }\n              _context.n = 4;\n              break;\n            case 3:\n              _context.p = 3;\n              _t = _context.v;\n              console.error('加载学生列表失败:', _t);\n              alert('加载失败，请稍后重试');\n            case 4:\n              _context.p = 4;\n              _this.loading = false;\n              return _context.f(4);\n            case 5:\n              return _context.a(2);\n          }\n        }, _callee, null, [[1, 3, 4, 5]]);\n      }))();\n    },\n    showAddModal: function showAddModal() {\n      this.dialogMode = 'add';\n      this.formData = {\n        user_id: null,\n        username: '',\n        password: '',\n        full_name: '',\n        email: '',\n        phone_number: '',\n        gender: '',\n        major: '',\n        class_name: '',\n        grade: '',\n        enrollment_date: '',\n        status: 1\n      };\n      this.showDialog = true;\n    },\n    editStudent: function editStudent(student) {\n      var _this2 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {\n        var userId, result, _data$gender, data, _t2;\n        return _regenerator().w(function (_context2) {\n          while (1) switch (_context2.p = _context2.n) {\n            case 0:\n              _this2.dialogMode = 'edit';\n\n              // 确保有有效的user_id\n              userId = student.user_id || student.userId;\n              if (userId) {\n                _context2.n = 1;\n                break;\n              }\n              alert('学生ID不能为空，无法编辑');\n              console.error('学生对象:', student);\n              return _context2.a(2);\n            case 1:\n              _context2.p = 1;\n              console.log('编辑学生，ID:', userId);\n              _context2.n = 2;\n              return getStudentById(userId);\n            case 2:\n              result = _context2.v;\n              if (result.code === 1 && result.data) {\n                data = result.data; // 后端返回驼峰命名，需要处理\n                _this2.formData = {\n                  user_id: data.userId || data.user_id,\n                  username: data.username,\n                  password: '',\n                  full_name: data.fullName || data.full_name,\n                  email: data.email || '',\n                  phone_number: data.phoneNumber || data.phone_number || '',\n                  gender: ((_data$gender = data.gender) === null || _data$gender === void 0 ? void 0 : _data$gender.toString()) || '',\n                  major: data.major || '',\n                  class_name: data.className || data.class_name || '',\n                  grade: data.grade || '',\n                  enrollment_date: data.enrollmentDate || data.enrollment_date || '',\n                  status: data.status || 1\n                };\n                _this2.showDialog = true;\n              } else {\n                alert(result.msg || '加载学生信息失败');\n              }\n              _context2.n = 4;\n              break;\n            case 3:\n              _context2.p = 3;\n              _t2 = _context2.v;\n              console.error('加载学生信息失败:', _t2);\n              alert(_t2.message || '加载失败，请稍后重试');\n            case 4:\n              return _context2.a(2);\n          }\n        }, _callee2, null, [[1, 3]]);\n      }))();\n    },\n    saveStudent: function saveStudent() {\n      var _this3 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3() {\n        var data, result, _t3;\n        return _regenerator().w(function (_context3) {\n          while (1) switch (_context3.p = _context3.n) {\n            case 0:\n              if (!_this3.loading) {\n                _context3.n = 1;\n                break;\n              }\n              return _context3.a(2);\n            case 1:\n              if (!(_this3.dialogMode === 'edit' && !_this3.formData.user_id)) {\n                _context3.n = 2;\n                break;\n              }\n              alert('学生ID不能为空，无法保存');\n              console.error('formData:', _this3.formData);\n              return _context3.a(2);\n            case 2:\n              _this3.loading = true;\n              _context3.p = 3;\n              data = _objectSpread({}, _this3.formData); // 编辑时不需要传password（除非要修改）\n              if (_this3.dialogMode === 'edit' && !data.password) {\n                delete data.password;\n              }\n\n              // 确保user_id是数字类型（编辑模式）\n              if (!(_this3.dialogMode === 'edit' && data.user_id)) {\n                _context3.n = 4;\n                break;\n              }\n              data.user_id = typeof data.user_id === 'number' ? data.user_id : parseInt(data.user_id);\n              if (!isNaN(data.user_id)) {\n                _context3.n = 4;\n                break;\n              }\n              alert('学生ID格式错误');\n              return _context3.a(2);\n            case 4:\n              console.log('保存学生数据:', _this3.dialogMode, data);\n              if (!(_this3.dialogMode === 'add')) {\n                _context3.n = 6;\n                break;\n              }\n              _context3.n = 5;\n              return addStudent(data);\n            case 5:\n              result = _context3.v;\n              _context3.n = 8;\n              break;\n            case 6:\n              _context3.n = 7;\n              return updateStudent(data);\n            case 7:\n              result = _context3.v;\n            case 8:\n              if (result.code === 1) {\n                alert(_this3.dialogMode === 'add' ? '添加成功' : '修改成功');\n                _this3.closeDialog();\n                _this3.loadStudents();\n              } else {\n                alert(result.msg || '操作失败');\n              }\n              _context3.n = 10;\n              break;\n            case 9:\n              _context3.p = 9;\n              _t3 = _context3.v;\n              console.error('保存失败:', _t3);\n              alert(_t3.message || '保存失败，请稍后重试');\n            case 10:\n              _context3.p = 10;\n              _this3.loading = false;\n              return _context3.f(10);\n            case 11:\n              return _context3.a(2);\n          }\n        }, _callee3, null, [[3, 9, 10, 11]]);\n      }))();\n    },\n    deleteStudent: function deleteStudent(userId) {\n      var _this4 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4() {\n        var id;\n        return _regenerator().w(function (_context4) {\n          while (1) switch (_context4.n) {\n            case 0:\n              if (userId) {\n                _context4.n = 1;\n                break;\n              }\n              alert('学生ID不能为空');\n              return _context4.a(2);\n            case 1:\n              // 确保userId是数字\n              id = typeof userId === 'number' ? userId : parseInt(userId);\n              if (!(isNaN(id) || id <= 0)) {\n                _context4.n = 2;\n                break;\n              }\n              alert('学生ID格式错误: ' + userId);\n              console.error('无效的学生ID:', userId);\n              return _context4.a(2);\n            case 2:\n              if (confirm('确定要删除该学生吗？')) {\n                _context4.n = 3;\n                break;\n              }\n              return _context4.a(2);\n            case 3:\n              _context4.n = 4;\n              return _this4.batchDelete([id]);\n            case 4:\n              return _context4.a(2);\n          }\n        }, _callee4);\n      }))();\n    },\n    batchDelete: function batchDelete() {\n      var _arguments = arguments,\n        _this5 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5() {\n        var userIds, ids, validIds, idsString, result, _t4;\n        return _regenerator().w(function (_context5) {\n          while (1) switch (_context5.p = _context5.n) {\n            case 0:\n              userIds = _arguments.length > 0 && _arguments[0] !== undefined ? _arguments[0] : null;\n              ids = userIds || _this5.selectedIds;\n              if (!(ids.length === 0)) {\n                _context5.n = 1;\n                break;\n              }\n              alert('请选择要删除的学生');\n              return _context5.a(2);\n            case 1:\n              // 过滤掉无效的ID\n              validIds = ids.filter(function (id) {\n                return id != null && id !== '';\n              });\n              if (!(validIds.length === 0)) {\n                _context5.n = 2;\n                break;\n              }\n              alert('请选择有效的学生');\n              return _context5.a(2);\n            case 2:\n              if (confirm(\"\\u786E\\u5B9A\\u8981\\u5220\\u9664\\u9009\\u4E2D\\u7684 \".concat(validIds.length, \" \\u4E2A\\u5B66\\u751F\\u5417\\uFF1F\"))) {\n                _context5.n = 3;\n                break;\n              }\n              return _context5.a(2);\n            case 3:\n              _context5.p = 3;\n              // 确保ID都是数字字符串\n              idsString = validIds.map(function (id) {\n                return String(id);\n              }).join(',');\n              console.log('删除学生ID:', idsString);\n              _context5.n = 4;\n              return deleteStudentsApi(idsString);\n            case 4:\n              result = _context5.v;\n              if (result.code === 1) {\n                alert('删除成功');\n                _this5.selectedIds = [];\n                _this5.loadStudents();\n              } else {\n                alert(result.msg || '删除失败');\n              }\n              _context5.n = 6;\n              break;\n            case 5:\n              _context5.p = 5;\n              _t4 = _context5.v;\n              console.error('删除失败:', _t4);\n              alert(_t4.message || '删除失败，请稍后重试');\n            case 6:\n              return _context5.a(2);\n          }\n        }, _callee5, null, [[3, 5]]);\n      }))();\n    },\n    toggleSelectAll: function toggleSelectAll() {\n      // handled by computed setter\n    },\n    closeDialog: function closeDialog() {\n      this.showDialog = false;\n    },\n    resetSearch: function resetSearch() {\n      this.searchForm = {\n        full_name: '',\n        student_id_number: '',\n        major: '',\n        class_name: '',\n        status: ''\n      };\n      this.currentPage = 1;\n      this.loadStudents();\n    },\n    changePage: function changePage(delta) {\n      var newPage = this.currentPage + delta;\n      if (newPage >= 1 && newPage <= this.totalPages) {\n        this.currentPage = newPage;\n        this.loadStudents();\n      }\n    }\n  }\n};","map":{"version":3,"names":["getStudents","addStudent","updateStudent","deleteStudents","deleteStudentsApi","getStudentById","name","data","students","loading","currentPage","pageSize","total","selectedIds","searchForm","full_name","student_id_number","major","class_name","status","showDialog","dialogMode","formData","user_id","username","password","email","phone_number","gender","grade","enrollment_date","computed","totalPages","Math","ceil","selectAll","get","length","set","value","map","s","mounted","loadStudents","methods","_this","_asyncToGenerator","_regenerator","m","_callee","params","result","_t","w","_context","p","n","_objectSpread","page","v","code","rows","student","userId","fullName","phoneNumber","avatar_url","avatarUrl","studentIdNumber","className","enrollmentDate","console","log","alert","msg","error","f","a","showAddModal","editStudent","_this2","_callee2","_data$gender","_t2","_context2","toString","message","saveStudent","_this3","_callee3","_t3","_context3","parseInt","isNaN","closeDialog","deleteStudent","_this4","_callee4","id","_context4","confirm","batchDelete","_arguments","arguments","_this5","_callee5","userIds","ids","validIds","idsString","_t4","_context5","undefined","filter","concat","String","join","toggleSelectAll","resetSearch","changePage","delta","newPage"],"sources":["D:\\vvvvvvvvvscode_workspace\\fronted\\883Fronted_Final\\src\\views\\Admin\\UserManage\\StudentManage.vue"],"sourcesContent":["<template>\r\n  <div class=\"student-manage\">\r\n    <div class=\"page-header\">\r\n      <h1>学生管理</h1>\r\n      <button class=\"btn-primary\" @click=\"showAddModal\">\r\n        <i class=\"bi bi-plus-lg\"></i> 添加学生\r\n      </button>\r\n    </div>\r\n\r\n    <div class=\"search-bar\">\r\n      <input type=\"text\" v-model=\"searchForm.full_name\" placeholder=\"搜索学生姓名...\" class=\"search-input\">\r\n      <input type=\"text\" v-model=\"searchForm.student_id_number\" placeholder=\"学号\" class=\"search-input\">\r\n      <input type=\"text\" v-model=\"searchForm.major\" placeholder=\"专业\" class=\"search-input\">\r\n      <input type=\"text\" v-model=\"searchForm.class_name\" placeholder=\"班级\" class=\"search-input\">\r\n      <select v-model=\"searchForm.status\" class=\"search-select\">\r\n        <option value=\"\">全部状态</option>\r\n        <option value=\"1\">激活</option>\r\n        <option value=\"2\">禁用</option>\r\n      </select>\r\n      <button class=\"btn-search\" @click=\"loadStudents\">搜索</button>\r\n      <button class=\"btn-reset\" @click=\"resetSearch\">重置</button>\r\n    </div>\r\n\r\n    <div class=\"table-container\">\r\n      <table class=\"data-table\">\r\n        <thead>\r\n          <tr>\r\n            <th><input type=\"checkbox\" v-model=\"selectAll\" @change=\"toggleSelectAll\"></th>\r\n            <th>学号</th>\r\n            <th>姓名</th>\r\n            <th>专业</th>\r\n            <th>班级</th>\r\n            <th>年级</th>\r\n            <th>邮箱</th>\r\n            <th>手机</th>\r\n            <th>状态</th>\r\n            <th>操作</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"student in students\" :key=\"student.user_id\">\r\n            <td><input type=\"checkbox\" :value=\"student.user_id\" v-model=\"selectedIds\"></td>\r\n            <td>{{ student.student_id_number || student.username }}</td>\r\n            <td>{{ student.full_name }}</td>\r\n            <td>{{ student.major || '-' }}</td>\r\n            <td>{{ student.class_name || '-' }}</td>\r\n            <td>{{ student.grade || '-' }}</td>\r\n            <td>{{ student.email || '-' }}</td>\r\n            <td>{{ student.phone_number || '-' }}</td>\r\n            <td>\r\n              <span :class=\"student.status === 1 ? 'status-active' : 'status-inactive'\">\r\n                {{ student.status === 1 ? '激活' : '禁用' }}\r\n              </span>\r\n            </td>\r\n            <td>\r\n              <button class=\"btn-edit\" @click=\"editStudent(student)\">编辑</button>\r\n              <button class=\"btn-delete\" @click=\"deleteStudent(student.user_id)\">删除</button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n\r\n    <div class=\"toolbar\">\r\n      <button class=\"btn-delete\" @click=\"batchDelete\" :disabled=\"selectedIds.length === 0\">\r\n        批量删除\r\n      </button>\r\n      <div class=\"pagination\">\r\n        <button @click=\"changePage(-1)\" :disabled=\"currentPage <= 1\">上一页</button>\r\n        <span>第 {{ currentPage }} 页，共 {{ totalPages }} 页，共 {{ total }} 条</span>\r\n        <button @click=\"changePage(1)\" :disabled=\"currentPage >= totalPages\">下一页</button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 添加/编辑对话框 -->\r\n    <div v-if=\"showDialog\" class=\"dialog-overlay\" @click.self=\"closeDialog\">\r\n      <div class=\"dialog\">\r\n        <h3>{{ dialogMode === 'add' ? '添加学生' : '编辑学生' }}</h3>\r\n        <form @submit.prevent=\"saveStudent\">\r\n          <div class=\"form-row\">\r\n            <div class=\"form-group\">\r\n              <label>学号 *</label>\r\n              <input type=\"text\" v-model=\"formData.username\" required :readonly=\"dialogMode === 'edit'\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label>姓名 *</label>\r\n              <input type=\"text\" v-model=\"formData.full_name\" required>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <div class=\"form-group\">\r\n              <label>密码 {{ dialogMode === 'add' ? '*' : '' }}</label>\r\n              <input type=\"password\" v-model=\"formData.password\" :required=\"dialogMode === 'add'\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label>性别</label>\r\n              <select v-model=\"formData.gender\">\r\n                <option value=\"\">请选择</option>\r\n                <option value=\"0\">未知</option>\r\n                <option value=\"1\">男</option>\r\n                <option value=\"2\">女</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <div class=\"form-group\">\r\n              <label>专业</label>\r\n              <input type=\"text\" v-model=\"formData.major\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label>班级</label>\r\n              <input type=\"text\" v-model=\"formData.class_name\">\r\n            </div>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <div class=\"form-group\">\r\n              <label>年级</label>\r\n              <input type=\"text\" v-model=\"formData.grade\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label>入学日期</label>\r\n              <input type=\"date\" v-model=\"formData.enrollment_date\">\r\n            </div>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <div class=\"form-group\">\r\n              <label>邮箱</label>\r\n              <input type=\"email\" v-model=\"formData.email\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label>手机</label>\r\n              <input type=\"tel\" v-model=\"formData.phone_number\">\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group\" v-if=\"dialogMode === 'edit'\">\r\n            <label>状态</label>\r\n            <select v-model=\"formData.status\">\r\n              <option value=\"1\">激活</option>\r\n              <option value=\"2\">禁用</option>\r\n            </select>\r\n          </div>\r\n          <div class=\"form-actions\">\r\n            <button type=\"button\" class=\"btn-cancel\" @click=\"closeDialog\">取消</button>\r\n            <button type=\"submit\" class=\"btn-submit\" :disabled=\"loading\">保存</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getStudents, addStudent, updateStudent, deleteStudents as deleteStudentsApi, getStudentById } from '@/api/admin'\r\n\r\nexport default {\r\n  name: 'StudentManage',\r\n  data() {\r\n    return {\r\n      students: [],\r\n      loading: false,\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      selectedIds: [],\r\n      searchForm: {\r\n        full_name: '',\r\n        student_id_number: '',\r\n        major: '',\r\n        class_name: '',\r\n        status: ''\r\n      },\r\n      showDialog: false,\r\n      dialogMode: 'add',\r\n      formData: {\r\n        user_id: null,\r\n        username: '',\r\n        password: '',\r\n        full_name: '',\r\n        email: '',\r\n        phone_number: '',\r\n        gender: '',\r\n        major: '',\r\n        class_name: '',\r\n        grade: '',\r\n        enrollment_date: '',\r\n        status: 1\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    totalPages() {\r\n      return Math.ceil(this.total / this.pageSize)\r\n    },\r\n    selectAll: {\r\n      get() {\r\n        return this.students.length > 0 && this.selectedIds.length === this.students.length\r\n      },\r\n      set(value) {\r\n        if (value) {\r\n          this.selectedIds = this.students.map(s => s.user_id)\r\n        } else {\r\n          this.selectedIds = []\r\n        }\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadStudents()\r\n  },\r\n  methods: {\r\n    async loadStudents() {\r\n      this.loading = true\r\n      try {\r\n        const params = {\r\n          page: this.currentPage,\r\n          pageSize: this.pageSize,\r\n          ...this.searchForm\r\n        }\r\n        const result = await getStudents(params)\r\n        if (result.code === 1) {\r\n          // 后端返回的是驼峰命名，需要转换为前端使用的格式\r\n          this.students = (result.data.rows || []).map(student => ({\r\n            user_id: student.userId || student.user_id,\r\n            username: student.username,\r\n            full_name: student.fullName || student.full_name,\r\n            email: student.email,\r\n            phone_number: student.phoneNumber || student.phone_number,\r\n            avatar_url: student.avatarUrl || student.avatar_url,\r\n            status: student.status,\r\n            student_id_number: student.studentIdNumber || student.student_id_number,\r\n            gender: student.gender,\r\n            major: student.major,\r\n            class_name: student.className || student.class_name,\r\n            grade: student.grade,\r\n            enrollment_date: student.enrollmentDate || student.enrollment_date\r\n          }))\r\n          this.total = result.data.total || 0\r\n          // 调试：打印学生数据，确保user_id存在\r\n          if (this.students.length > 0) {\r\n            console.log('学生数据示例:', this.students[0])\r\n          }\r\n        } else {\r\n          alert(result.msg || '加载失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('加载学生列表失败:', error)\r\n        alert('加载失败，请稍后重试')\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    showAddModal() {\r\n      this.dialogMode = 'add'\r\n      this.formData = {\r\n        user_id: null,\r\n        username: '',\r\n        password: '',\r\n        full_name: '',\r\n        email: '',\r\n        phone_number: '',\r\n        gender: '',\r\n        major: '',\r\n        class_name: '',\r\n        grade: '',\r\n        enrollment_date: '',\r\n        status: 1\r\n      }\r\n      this.showDialog = true\r\n    },\r\n    async editStudent(student) {\r\n      this.dialogMode = 'edit'\r\n      \r\n      // 确保有有效的user_id\r\n      const userId = student.user_id || student.userId\r\n      if (!userId) {\r\n        alert('学生ID不能为空，无法编辑')\r\n        console.error('学生对象:', student)\r\n        return\r\n      }\r\n      \r\n      try {\r\n        console.log('编辑学生，ID:', userId)\r\n        const result = await getStudentById(userId)\r\n        if (result.code === 1 && result.data) {\r\n          const data = result.data\r\n          // 后端返回驼峰命名，需要处理\r\n          this.formData = {\r\n            user_id: data.userId || data.user_id,\r\n            username: data.username,\r\n            password: '',\r\n            full_name: data.fullName || data.full_name,\r\n            email: data.email || '',\r\n            phone_number: data.phoneNumber || data.phone_number || '',\r\n            gender: data.gender?.toString() || '',\r\n            major: data.major || '',\r\n            class_name: data.className || data.class_name || '',\r\n            grade: data.grade || '',\r\n            enrollment_date: data.enrollmentDate || data.enrollment_date || '',\r\n            status: data.status || 1\r\n          }\r\n          this.showDialog = true\r\n        } else {\r\n          alert(result.msg || '加载学生信息失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('加载学生信息失败:', error)\r\n        alert(error.message || '加载失败，请稍后重试')\r\n      }\r\n    },\r\n    async saveStudent() {\r\n      if (this.loading) return\r\n      \r\n      // 编辑模式下必须要有user_id\r\n      if (this.dialogMode === 'edit' && !this.formData.user_id) {\r\n        alert('学生ID不能为空，无法保存')\r\n        console.error('formData:', this.formData)\r\n        return\r\n      }\r\n      \r\n      this.loading = true\r\n      try {\r\n        const data = { ...this.formData }\r\n        // 编辑时不需要传password（除非要修改）\r\n        if (this.dialogMode === 'edit' && !data.password) {\r\n          delete data.password\r\n        }\r\n        \r\n        // 确保user_id是数字类型（编辑模式）\r\n        if (this.dialogMode === 'edit' && data.user_id) {\r\n          data.user_id = typeof data.user_id === 'number' ? data.user_id : parseInt(data.user_id)\r\n          if (isNaN(data.user_id)) {\r\n            alert('学生ID格式错误')\r\n            return\r\n          }\r\n        }\r\n        \r\n        console.log('保存学生数据:', this.dialogMode, data)\r\n        \r\n        let result\r\n        if (this.dialogMode === 'add') {\r\n          result = await addStudent(data)\r\n        } else {\r\n          result = await updateStudent(data)\r\n        }\r\n        \r\n        if (result.code === 1) {\r\n          alert(this.dialogMode === 'add' ? '添加成功' : '修改成功')\r\n          this.closeDialog()\r\n          this.loadStudents()\r\n        } else {\r\n          alert(result.msg || '操作失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('保存失败:', error)\r\n        alert(error.message || '保存失败，请稍后重试')\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    async deleteStudent(userId) {\r\n      if (!userId) {\r\n        alert('学生ID不能为空')\r\n        return\r\n      }\r\n      // 确保userId是数字\r\n      const id = typeof userId === 'number' ? userId : parseInt(userId)\r\n      if (isNaN(id) || id <= 0) {\r\n        alert('学生ID格式错误: ' + userId)\r\n        console.error('无效的学生ID:', userId)\r\n        return\r\n      }\r\n      if (!confirm('确定要删除该学生吗？')) return\r\n      await this.batchDelete([id])\r\n    },\r\n    async batchDelete(userIds = null) {\r\n      const ids = userIds || this.selectedIds\r\n      if (ids.length === 0) {\r\n        alert('请选择要删除的学生')\r\n        return\r\n      }\r\n      \r\n      // 过滤掉无效的ID\r\n      const validIds = ids.filter(id => id != null && id !== '')\r\n      if (validIds.length === 0) {\r\n        alert('请选择有效的学生')\r\n        return\r\n      }\r\n      \r\n      if (!confirm(`确定要删除选中的 ${validIds.length} 个学生吗？`)) return\r\n      \r\n      try {\r\n        // 确保ID都是数字字符串\r\n        const idsString = validIds.map(id => String(id)).join(',')\r\n        console.log('删除学生ID:', idsString)\r\n        \r\n        const result = await deleteStudentsApi(idsString)\r\n        if (result.code === 1) {\r\n          alert('删除成功')\r\n          this.selectedIds = []\r\n          this.loadStudents()\r\n        } else {\r\n          alert(result.msg || '删除失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('删除失败:', error)\r\n        alert(error.message || '删除失败，请稍后重试')\r\n      }\r\n    },\r\n    toggleSelectAll() {\r\n      // handled by computed setter\r\n    },\r\n    closeDialog() {\r\n      this.showDialog = false\r\n    },\r\n    resetSearch() {\r\n      this.searchForm = {\r\n        full_name: '',\r\n        student_id_number: '',\r\n        major: '',\r\n        class_name: '',\r\n        status: ''\r\n      }\r\n      this.currentPage = 1\r\n      this.loadStudents()\r\n    },\r\n    changePage(delta) {\r\n      const newPage = this.currentPage + delta\r\n      if (newPage >= 1 && newPage <= this.totalPages) {\r\n        this.currentPage = newPage\r\n        this.loadStudents()\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.student-manage {\r\n  padding: 24px;\r\n}\r\n\r\n.page-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.page-header h1 {\r\n  font-size: 24px;\r\n  color: #333;\r\n}\r\n\r\n.btn-primary {\r\n  padding: 10px 20px;\r\n  background: #2A5CAA;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n}\r\n\r\n.search-bar {\r\n  display: flex;\r\n  gap: 10px;\r\n  margin-bottom: 20px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.search-input, .search-select {\r\n  padding: 10px 15px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 6px;\r\n  font-size: 14px;\r\n}\r\n\r\n.search-input {\r\n  flex: 1;\r\n  min-width: 150px;\r\n}\r\n\r\n.search-select {\r\n  width: 120px;\r\n}\r\n\r\n.btn-search, .btn-reset {\r\n  padding: 10px 20px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  background: white;\r\n}\r\n\r\n.table-container {\r\n  background: white;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  box-shadow: 0 2px 8px rgba(0,0,0,0.1);\r\n}\r\n\r\n.data-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\n.data-table th,\r\n.data-table td {\r\n  padding: 12px;\r\n  text-align: left;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.data-table th {\r\n  background: #f5f7fa;\r\n  font-weight: 600;\r\n}\r\n\r\n.status-active {\r\n  color: #4CAF50;\r\n}\r\n\r\n.status-inactive {\r\n  color: #f44336;\r\n}\r\n\r\n.btn-edit, .btn-delete {\r\n  padding: 6px 12px;\r\n  margin-right: 8px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 12px;\r\n}\r\n\r\n.btn-edit {\r\n  background: #2A5CAA;\r\n  color: white;\r\n}\r\n\r\n.btn-delete {\r\n  background: #f44336;\r\n  color: white;\r\n}\r\n\r\n.toolbar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-top: 20px;\r\n}\r\n\r\n.pagination {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n}\r\n\r\n.pagination button {\r\n  padding: 8px 16px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  background: white;\r\n}\r\n\r\n.pagination button:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.dialog-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.dialog {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 30px;\r\n  width: 90%;\r\n  max-width: 800px;\r\n  max-height: 90vh;\r\n  overflow-y: auto;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.dialog h3 {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.form-row {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 20px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.form-group label {\r\n  margin-bottom: 8px;\r\n  color: #666;\r\n  font-weight: 500;\r\n}\r\n\r\n.form-group input,\r\n.form-group select {\r\n  padding: 10px 15px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 6px;\r\n  font-size: 14px;\r\n}\r\n\r\n.form-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.btn-cancel, .btn-submit {\r\n  padding: 10px 20px;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n}\r\n\r\n.btn-cancel {\r\n  background: #f5f5f5;\r\n  color: #666;\r\n  border: 1px solid #ddd;\r\n}\r\n\r\n.btn-submit {\r\n  background: #2A5CAA;\r\n  color: white;\r\n  border: none;\r\n}\r\n\r\n.btn-submit:disabled {\r\n  background: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n</style>\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}