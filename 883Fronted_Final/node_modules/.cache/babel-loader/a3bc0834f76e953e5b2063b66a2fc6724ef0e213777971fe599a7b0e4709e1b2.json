{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"homework-list-page\"\n};\nvar _hoisted_2 = {\n  \"class\": \"page-header\"\n};\nvar _hoisted_3 = {\n  key: 0,\n  \"class\": \"loading\"\n};\nvar _hoisted_4 = {\n  key: 1,\n  \"class\": \"empty\"\n};\nvar _hoisted_5 = {\n  key: 2,\n  \"class\": \"homework-cards\"\n};\nvar _hoisted_6 = [\"onClick\"];\nvar _hoisted_7 = {\n  \"class\": \"card-left\"\n};\nvar _hoisted_8 = {\n  \"class\": \"title\"\n};\nvar _hoisted_9 = {\n  \"class\": \"deadline\"\n};\nvar _hoisted_10 = {\n  \"class\": \"card-right\"\n};\nvar _hoisted_11 = {\n  key: 0,\n  \"class\": \"grade\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[1] || (_cache[1] = _createElementVNode(\"h2\", null, \"我的作业\", -1 /* CACHED */)), _createElementVNode(\"button\", {\n    \"class\": \"back-btn\",\n    onClick: _cache[0] || (_cache[0] = function ($event) {\n      return $setup.router.back();\n    })\n  }, \"返回\")]), $setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, \"加载中...\")) : $setup.homeworkList.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, \"暂无作业\")) : (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.homeworkList, function (item) {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: item.homework_id,\n      \"class\": \"homework-card\",\n      onClick: function onClick($event) {\n        return $setup.goToDetail(item.homework_id);\n      }\n    }, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"h3\", _hoisted_8, _toDisplayString(item.title), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_9, \"截止时间：\" + _toDisplayString($setup.formatTime(item.due_date)), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"span\", {\n      \"class\": _normalizeClass([\"status-badge\", $setup.getStatusClass(item.my_submission_status)])\n    }, _toDisplayString($setup.getStatusText(item.my_submission_status)), 3 /* TEXT, CLASS */), item.my_grade !== null ? (_openBlock(), _createElementBlock(\"span\", _hoisted_11, _toDisplayString(item.my_grade) + \"分 \", 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])], 8 /* PROPS */, _hoisted_6);\n  }), 128 /* KEYED_FRAGMENT */))]))]);\n}","map":{"version":3,"names":["_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onClick","_cache","$event","$setup","router","back","loading","_hoisted_3","homeworkList","length","_hoisted_4","_hoisted_5","_Fragment","_renderList","item","key","homework_id","goToDetail","_hoisted_7","_hoisted_8","_toDisplayString","title","_hoisted_9","formatTime","due_date","_hoisted_10","_normalizeClass","getStatusClass","my_submission_status","getStatusText","my_grade","_hoisted_11"],"sources":["/Users/zhouzhou/Desktop/883Fronted_Final/src/views/Student/Teaching/StuHomework.vue"],"sourcesContent":["<template>\n  <div class=\"homework-list-page\">\n    <div class=\"page-header\">\n      <h2>我的作业</h2>\n      <button class=\"back-btn\" @click=\"router.back()\">返回</button>\n    </div>\n\n    <div v-if=\"loading\" class=\"loading\">加载中...</div>\n    <div v-else-if=\"homeworkList.length === 0\" class=\"empty\">暂无作业</div>\n\n    <div v-else class=\"homework-cards\">\n      <div v-for=\"item in homeworkList\" :key=\"item.homework_id\" class=\"homework-card\"\n        @click=\"goToDetail(item.homework_id)\">\n        <div class=\"card-left\">\n          <h3 class=\"title\">{{ item.title }}</h3>\n          <p class=\"deadline\">截止时间：{{ formatTime(item.due_date) }}</p>\n        </div>\n\n        <div class=\"card-right\">\n          <span class=\"status-badge\" :class=\"getStatusClass(item.my_submission_status)\">\n            {{ getStatusText(item.my_submission_status) }}\n          </span>\n          <span v-if=\"item.my_grade !== null\" class=\"grade\">\n            {{ item.my_grade }}分\n          </span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted, computed } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\n\nexport default {\n  name: 'StuHomework',\n  setup() {\n    const route = useRoute()\n    const router = useRouter()\n    // 优先从路由参数取，没有则从本地存储取\n    const classId = computed(() => route.query.classId || localStorage.getItem('currentClassId'))\n\n    const homeworkList = ref([])\n    const loading = ref(false)\n\n    onMounted(() => {\n      if (classId.value) {\n        fetchHomeworkList()\n      }\n    })\n\n    // 获取作业列表\n    const fetchHomeworkList = async () => {\n      loading.value = true\n      try {\n        const res = await fetch(`http://127.0.0.1:8081/student/classes/${classId.value}/homeworks?page=1&pageSize=100`)\n        const result = await res.json()\n        if (result.code === 1) {\n          homeworkList.value = result.data.rows || []\n        }\n      } catch (error) {\n        console.error('获取作业列表失败', error)\n      } finally {\n        loading.value = false\n      }\n    }\n\n    const goToDetail = (homeworkId) => {\n      router.push({\n        path: '/student/teaching/homework/detail',\n        query: { homeworkId, classId: classId.value }\n      })\n    }\n\n    const formatTime = (time) => {\n      return time ? new Date(time).toLocaleString() : '无截止日期'\n    }\n\n    // 状态映射，根据接口文档逻辑调整\n    const getStatusText = (status) => {\n      // 假设：0/null=未提交, 1=已提交/准时, 2=迟交\n      const map = { 0: '未提交', 1: '已提交', 2: '迟交', 3: '未提交' }\n      return map[status] || '未提交'\n    }\n\n    const getStatusClass = (status) => {\n      if (status === 1) return 'success'\n      if (status === 2) return 'warning'\n      return 'pending'\n    }\n\n    return {\n      router,\n      classId,\n      homeworkList,\n      loading,\n      fetchHomeworkList,\n      goToDetail,\n      formatTime,\n      getStatusText,\n      getStatusClass\n    }\n  }\n}\n</script>\n\n<style scoped>\n.homework-list-page {\n  padding: 20px;\n}\n\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.homework-cards {\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n}\n\n.homework-card {\n  background: #fff;\n  padding: 20px;\n  border-radius: 8px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n  cursor: pointer;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  transition: transform 0.2s;\n}\n\n.homework-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.title {\n  margin: 0 0 8px 0;\n  font-size: 16px;\n  color: #333;\n}\n\n.deadline {\n  margin: 0;\n  font-size: 13px;\n  color: #999;\n}\n\n.card-right {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  gap: 8px;\n}\n\n.status-badge {\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 12px;\n}\n\n.status-badge.pending {\n  background: #f5f5f5;\n  color: #999;\n}\n\n.status-badge.success {\n  background: #f6ffed;\n  color: #52c41a;\n}\n\n.status-badge.warning {\n  background: #fff7e6;\n  color: #faad14;\n}\n\n.grade {\n  font-weight: bold;\n  color: #1890ff;\n}\n\n.back-btn {\n  padding: 6px 12px;\n  border: 1px solid #ddd;\n  background: white;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.loading,\n.empty {\n  text-align: center;\n  color: #999;\n  padding: 40px;\n}\n</style>"],"mappings":";;EACO,SAAM;AAAoB;;EACxB,SAAM;AAAa;;;EAKJ,SAAM;;;;EACiB,SAAM;;;;EAErC,SAAM;;;;EAGT,SAAM;AAAW;;EAChB,SAAM;AAAO;;EACd,SAAM;AAAU;;EAGhB,SAAM;AAAY;;;EAIe,SAAM;;;uBArBlDA,mBAAA,CA2BM,OA3BNC,UA2BM,GA1BJC,mBAAA,CAGM,OAHNC,UAGM,G,0BAFJD,mBAAA,CAAa,YAAT,MAAI,qBACRA,mBAAA,CAA2D;IAAnD,SAAM,UAAU;IAAEE,OAAK,EAAAC,MAAA,QAAAA,MAAA,gBAAAC,MAAA;MAAA,OAAEC,MAAA,CAAAC,MAAM,CAACC,IAAI;IAAA;KAAI,IAAE,E,GAGzCF,MAAA,CAAAG,OAAO,I,cAAlBV,mBAAA,CAAgD,OAAhDW,UAAgD,EAAZ,QAAM,KAC1BJ,MAAA,CAAAK,YAAY,CAACC,MAAM,U,cAAnCb,mBAAA,CAAmE,OAAnEc,UAAmE,EAAV,MAAI,M,cAE7Dd,mBAAA,CAiBM,OAjBNe,UAiBM,I,kBAhBJf,mBAAA,CAeMgB,SAAA,QAAAC,WAAA,CAfcV,MAAA,CAAAK,YAAY,YAApBM,IAAI;yBAAhBlB,mBAAA,CAeM;MAf6BmB,GAAG,EAAED,IAAI,CAACE,WAAW;MAAE,SAAM,eAAe;MAC5EhB,OAAK,WAALA,OAAKA,CAAAE,MAAA;QAAA,OAAEC,MAAA,CAAAc,UAAU,CAACH,IAAI,CAACE,WAAW;MAAA;QACnClB,mBAAA,CAGM,OAHNoB,UAGM,GAFJpB,mBAAA,CAAuC,MAAvCqB,UAAuC,EAAAC,gBAAA,CAAlBN,IAAI,CAACO,KAAK,kBAC/BvB,mBAAA,CAA4D,KAA5DwB,UAA4D,EAAxC,OAAK,GAAAF,gBAAA,CAAGjB,MAAA,CAAAoB,UAAU,CAACT,IAAI,CAACU,QAAQ,kB,GAGtD1B,mBAAA,CAOM,OAPN2B,WAOM,GANJ3B,mBAAA,CAEO;MAFD,SAAK4B,eAAA,EAAC,cAAc,EAASvB,MAAA,CAAAwB,cAAc,CAACb,IAAI,CAACc,oBAAoB;wBACtEzB,MAAA,CAAA0B,aAAa,CAACf,IAAI,CAACc,oBAAoB,0BAEhCd,IAAI,CAACgB,QAAQ,a,cAAzBlC,mBAAA,CAEO,QAFPmC,WAEO,EAAAX,gBAAA,CADFN,IAAI,CAACgB,QAAQ,IAAG,IACrB,mB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}