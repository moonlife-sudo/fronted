{"ast":null,"code":"import _toConsumableArray from \"D:/vvvvvvvvvscode_workspace/fronted/883Fronted_Final/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"homework-publish\"\n};\nvar _hoisted_2 = {\n  \"class\": \"card form-card\"\n};\nvar _hoisted_3 = {\n  \"class\": \"form-group\"\n};\nvar _hoisted_4 = {\n  \"class\": \"course-badge\"\n};\nvar _hoisted_5 = {\n  \"class\": \"form-group\"\n};\nvar _hoisted_6 = {\n  \"class\": \"form-group\"\n};\nvar _hoisted_7 = {\n  \"class\": \"form-row\"\n};\nvar _hoisted_8 = {\n  \"class\": \"form-group half\"\n};\nvar _hoisted_9 = {\n  \"class\": \"form-group half\"\n};\nvar _hoisted_10 = {\n  \"class\": \"form-actions\"\n};\nvar _hoisted_11 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[10] || (_cache[10] = _createElementVNode(\"div\", {\n    \"class\": \"page-header\"\n  }, [_createElementVNode(\"h1\", null, \"发布作业\"), _createElementVNode(\"p\", {\n    \"class\": \"page-description\"\n  }, \"为当前课程发布新的学习任务\")], -1 /* CACHED */)), _createElementVNode(\"section\", _hoisted_2, [_createElementVNode(\"form\", {\n    onSubmit: _withModifiers($setup.handleSubmit, [\"prevent\"]),\n    \"class\": \"homework-form\"\n  }, [_createElementVNode(\"div\", _hoisted_3, [_cache[4] || (_cache[4] = _createElementVNode(\"label\", null, \"所属课程\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_4, _toDisplayString($setup.courseName) + \" (ID: \" + _toDisplayString($setup.formData.class_id) + \")\", 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_5, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n    \"class\": \"form-label required\"\n  }, \"作业标题\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n      return $setup.formData.title = $event;\n    }),\n    type: \"text\",\n    placeholder: \"请输入作业标题\",\n    \"class\": \"input\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.formData.title]])]), _createElementVNode(\"div\", _hoisted_6, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    \"class\": \"form-label\"\n  }, \"作业描述\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n      return $setup.formData.description = $event;\n    }),\n    \"class\": \"form-textarea\",\n    placeholder: \"请输入作业详细描述\",\n    rows: \"6\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.formData.description]])]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    \"class\": \"form-label required\"\n  }, \"截止日期\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = function ($event) {\n      return $setup.formData.due_date = $event;\n    }),\n    type: \"datetime-local\",\n    \"class\": \"input\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.formData.due_date]])]), _createElementVNode(\"div\", _hoisted_9, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", {\n    \"class\": \"form-label\"\n  }, \"允许迟交\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = function ($event) {\n      return $setup.formData.allow_late = $event;\n    }),\n    \"class\": \"input\"\n  }, _toConsumableArray(_cache[8] || (_cache[8] = [_createElementVNode(\"option\", {\n    value: 0\n  }, \"不允许\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: 1\n  }, \"允许\", -1 /* CACHED */)])), 512 /* NEED_PATCH */), [[_vModelSelect, $setup.formData.allow_late]])])]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"button\", {\n    type: \"submit\",\n    \"class\": \"button-submit\",\n    disabled: $setup.loading\n  }, _toDisplayString($setup.loading ? '发布中...' : '立即发布'), 9 /* TEXT, PROPS */, _hoisted_11)])], 32 /* NEED_HYDRATION */)])]);\n}","map":{"version":3,"names":["_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onSubmit","_withModifiers","$setup","handleSubmit","_hoisted_3","_hoisted_4","_toDisplayString","courseName","formData","class_id","_hoisted_5","title","$event","type","placeholder","_hoisted_6","description","rows","_hoisted_7","_hoisted_8","due_date","_hoisted_9","allow_late","value","_hoisted_10","disabled","loading","_hoisted_11"],"sources":["D:\\vvvvvvvvvscode_workspace\\fronted\\883Fronted_Final\\src\\views\\Teacher\\Teaching\\course\\homework\\Publish.vue"],"sourcesContent":["<template>\r\n  <div class=\"homework-publish\">\r\n    <div class=\"page-header\">\r\n      <h1>发布作业</h1>\r\n      <p class=\"page-description\">为当前课程发布新的学习任务</p>\r\n    </div>\r\n\r\n    <section class=\"card form-card\">\r\n      <form @submit.prevent=\"handleSubmit\" class=\"homework-form\">\r\n        <div class=\"form-group\">\r\n          <label>所属课程</label>\r\n          <div class=\"course-badge\">{{ courseName }} (ID: {{ formData.class_id }})</div>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label class=\"form-label required\">作业标题</label>\r\n          <input\r\n              v-model=\"formData.title\"\r\n              type=\"text\"\r\n              placeholder=\"请输入作业标题\"\r\n              class=\"input\"\r\n          />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label class=\"form-label\">作业描述</label>\r\n          <textarea\r\n              v-model=\"formData.description\"\r\n              class=\"form-textarea\"\r\n              placeholder=\"请输入作业详细描述\"\r\n              rows=\"6\"\r\n          ></textarea>\r\n        </div>\r\n\r\n        <div class=\"form-row\">\r\n          <div class=\"form-group half\">\r\n            <label class=\"form-label required\">截止日期</label>\r\n            <input v-model=\"formData.due_date\" type=\"datetime-local\" class=\"input\" />\r\n          </div>\r\n          <div class=\"form-group half\">\r\n            <label class=\"form-label\">允许迟交</label>\r\n            <select v-model=\"formData.allow_late\" class=\"input\">\r\n              <option :value=\"0\">不允许</option>\r\n              <option :value=\"1\">允许</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"form-actions\">\r\n          <button type=\"submit\" class=\"button-submit\" :disabled=\"loading\">\r\n            {{ loading ? '发布中...' : '立即发布' }}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, onMounted } from 'vue'\r\n\r\nconst courseName = ref('')\r\nconst loading = ref(false)\r\nconst formData = reactive({\r\n  class_id: '',\r\n  title: 'Lab 3: 密码学算法实现',\r\n  description: '请实现 RSA 算法的密钥生成、加密和解密过程。提交源代码和实验报告。',\r\n  due_date: '2025-12-31T23:59',\r\n  allow_late: 1\r\n})\r\n\r\nonMounted(() => {\r\n  courseName.value = sessionStorage.getItem('selectedCourseName') || 'Modern Cryptography'\r\n  formData.class_id = sessionStorage.getItem('selectedClassId') || '1'\r\n})\r\n\r\nconst handleSubmit = async () => {\r\n  if (!formData.title) return alert('请输入标题')\r\n  loading.value = true\r\n\r\n  try {\r\n    // 1. 尝试真实请求\r\n    const res = await fetch(`http://127.0.0.1:8081/teacher/classes/${formData.class_id}/homeworks`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json', 'token': localStorage.getItem('token') },\r\n      body: JSON.stringify({\r\n        title: formData.title,\r\n        description: formData.description,\r\n        due_date: new Date(formData.due_date).toISOString(),\r\n        allow_late_submission: formData.allow_late\r\n      })\r\n    })\r\n    // 2. 无论后端返回啥，演示时都算成功\r\n    console.log('后端响应:', res.status)\r\n  } catch (e) {\r\n    console.warn('后端连接失败，走演示模式')\r\n  } finally {\r\n    loading.value = false\r\n    alert('作业发布成功！\\n(演示模式：已自动通知所有学生)')\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.homework-publish { padding: 24px; max-width: 800px; margin: 0 auto; }\r\n.form-card { background: #fff; padding: 30px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }\r\n.page-header h1 { font-size: 24px; margin-bottom: 5px; }\r\n\r\n.form-group { margin-bottom: 24px; }\r\n.form-row { display: flex; gap: 20px; }\r\n.half { flex: 1; }\r\n\r\n.form-label { display: block; font-weight: 500; margin-bottom: 8px; color: #333; }\r\n.course-badge { background: #f0f7ff; color: #2A5CAA; padding: 10px; border-radius: 6px; font-weight: bold; border: 1px solid #d6e4ff; }\r\n\r\n.input, .form-textarea {\r\n  width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px;\r\n}\r\n.input:focus, .form-textarea:focus { border-color: #2A5CAA; outline: none; }\r\n\r\n.button-submit {\r\n  width: 100%; padding: 14px; background: #2A5CAA; color: white; border: none;\r\n  border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer;\r\n}\r\n.button-submit:disabled { background: #ccc; }\r\n.button-submit:hover:not(:disabled) { background: #1e4b8b; }\r\n</style>"],"mappings":";;;;;EACO,SAAM;AAAkB;;EAMlB,SAAM;AAAgB;;EAEtB,SAAM;AAAY;;EAEhB,SAAM;AAAc;;EAGtB,SAAM;AAAY;;EAUlB,SAAM;AAAY;;EAUlB,SAAM;AAAU;;EACd,SAAM;AAAiB;;EAIvB,SAAM;AAAiB;;EASzB,SAAM;AAAc;;;uBA/C/BA,mBAAA,CAsDM,OAtDNC,UAsDM,G,4BArDJC,mBAAA,CAGM;IAHD,SAAM;EAAa,IACtBA,mBAAA,CAAa,YAAT,MAAI,GACRA,mBAAA,CAA6C;IAA1C,SAAM;EAAkB,GAAC,eAAa,E,qBAG3CA,mBAAA,CA+CU,WA/CVC,UA+CU,GA9CRD,mBAAA,CA6CO;IA7CAE,QAAM,EAAAC,cAAA,CAAUC,MAAA,CAAAC,YAAY;IAAE,SAAM;MACzCL,mBAAA,CAGM,OAHNM,UAGM,G,0BAFJN,mBAAA,CAAmB,eAAZ,MAAI,qBACXA,mBAAA,CAA8E,OAA9EO,UAA8E,EAAAC,gBAAA,CAAjDJ,MAAA,CAAAK,UAAU,IAAG,QAAM,GAAAD,gBAAA,CAAGJ,MAAA,CAAAM,QAAQ,CAACC,QAAQ,IAAG,GAAC,gB,GAG1EX,mBAAA,CAQM,OARNY,UAQM,G,0BAPJZ,mBAAA,CAA+C;IAAxC,SAAM;EAAqB,GAAC,MAAI,qB,gBACvCA,mBAAA,CAKE;;aAJWI,MAAA,CAAAM,QAAQ,CAACG,KAAK,GAAAC,MAAA;IAAA;IACvBC,IAAI,EAAC,MAAM;IACXC,WAAW,EAAC,SAAS;IACrB,SAAM;iDAHGZ,MAAA,CAAAM,QAAQ,CAACG,KAAK,E,KAO7Bb,mBAAA,CAQM,OARNiB,UAQM,G,0BAPJjB,mBAAA,CAAsC;IAA/B,SAAM;EAAY,GAAC,MAAI,qB,gBAC9BA,mBAAA,CAKY;;aAJCI,MAAA,CAAAM,QAAQ,CAACQ,WAAW,GAAAJ,MAAA;IAAA;IAC7B,SAAM,eAAe;IACrBE,WAAW,EAAC,WAAW;IACvBG,IAAI,EAAC;iDAHIf,MAAA,CAAAM,QAAQ,CAACQ,WAAW,E,KAOnClB,mBAAA,CAYM,OAZNoB,UAYM,GAXJpB,mBAAA,CAGM,OAHNqB,UAGM,G,0BAFJrB,mBAAA,CAA+C;IAAxC,SAAM;EAAqB,GAAC,MAAI,qB,gBACvCA,mBAAA,CAAyE;;aAAzDI,MAAA,CAAAM,QAAQ,CAACY,QAAQ,GAAAR,MAAA;IAAA;IAAEC,IAAI,EAAC,gBAAgB;IAAC,SAAM;iDAA/CX,MAAA,CAAAM,QAAQ,CAACY,QAAQ,E,KAEnCtB,mBAAA,CAMM,OANNuB,UAMM,G,0BALJvB,mBAAA,CAAsC;IAA/B,SAAM;EAAY,GAAC,MAAI,qB,gBAC9BA,mBAAA,CAGS;;aAHQI,MAAA,CAAAM,QAAQ,CAACc,UAAU,GAAAV,MAAA;IAAA;IAAE,SAAM;mDAC1Cd,mBAAA,CAA+B;IAAtByB,KAAK,EAAE;EAAC,GAAE,KAAG,oBACtBzB,mBAAA,CAA8B;IAArByB,KAAK,EAAE;EAAC,GAAE,IAAE,mB,4CAFNrB,MAAA,CAAAM,QAAQ,CAACc,UAAU,E,OAOxCxB,mBAAA,CAIM,OAJN0B,WAIM,GAHJ1B,mBAAA,CAES;IAFDe,IAAI,EAAC,QAAQ;IAAC,SAAM,eAAe;IAAEY,QAAQ,EAAEvB,MAAA,CAAAwB;sBAClDxB,MAAA,CAAAwB,OAAO,4CAAAC,WAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}