{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'AppHeader',\n  data() {\n    return {\n      userRole: null,\n      // 'admin', 'teacher', 'student', null\n      searchQuery: '',\n      isDropdownOpen: false\n    };\n  },\n  computed: {\n    userDisplayName() {\n      if (!this.userRole) return '用户入口';\n      switch (this.userRole) {\n        case 'admin':\n          return '管理员';\n        case 'teacher':\n          return '教师';\n        case 'student':\n          return '学生';\n        default:\n          return '用户';\n      }\n    }\n  },\n  methods: {\n    // 根据用户角色显示导航项\n    showNavItem(requiredRoles) {\n      if (requiredRoles.includes('all')) return true;\n      return this.userRole && requiredRoles.includes(this.userRole);\n    },\n    // 搜索处理\n    handleSearch() {\n      if (this.searchQuery.trim()) {\n        console.log('执行搜索:', this.searchQuery);\n        // 这里可以跳转到搜索页面或显示搜索结果\n        alert(`搜索: ${this.searchQuery}`);\n      }\n    },\n    // 切换下拉菜单\n    toggleDropdown() {\n      this.isDropdownOpen = !this.isDropdownOpen;\n    },\n    // 登出处理\n    handleLogout() {\n      console.log('用户登出');\n      this.userRole = null;\n      this.isDropdownOpen = false;\n      // 实际应用中这里应该调用API清除会话\n      alert('您已成功登出');\n      this.$router.push('/login');\n    },\n    // 关闭下拉菜单（点击页面其他位置）\n    closeDropdown() {\n      this.isDropdownOpen = false;\n    }\n  },\n  mounted() {\n    // 模拟获取用户角色（实际应从API获取）\n    // this.userRole = 'admin' // 测试用，可以取消注释测试管理员视图\n\n    // 点击页面其他位置关闭下拉菜单\n    document.addEventListener('click', this.closeDropdown);\n  },\n  beforeUnmount() {\n    // 清理事件监听\n    document.removeEventListener('click', this.closeDropdown);\n  }\n};","map":{"version":3,"names":["name","data","userRole","searchQuery","isDropdownOpen","computed","userDisplayName","methods","showNavItem","requiredRoles","includes","handleSearch","trim","console","log","alert","toggleDropdown","handleLogout","$router","push","closeDropdown","mounted","document","addEventListener","beforeUnmount","removeEventListener"],"sources":["/Users/zhouzhou/Desktop/resource/src/components/Header.vue"],"sourcesContent":["<template>\n  <header class=\"header-component\">\n    <div class=\"header-container\">\n      <!-- Logo -->\n      <div class=\"logo-container\">\n        <router-link to=\"/\">\n          <img \n            loading=\"lazy\" \n            src=\"https://placeholder.pics/svg/150x50/2A5CAA/FFFFFF/资源管理系统\" \n            alt=\"资源管理系统LOGO\" \n            class=\"logo\"\n          >\n        </router-link>\n      </div>\n      \n      <!-- 导航菜单 -->\n      <nav class=\"main-nav\">\n        <ul class=\"nav-list\">\n          <li class=\"nav-item\" :class=\"{ 'hidden': !showNavItem('all') }\">\n            <router-link to=\"/\" class=\"nav-link\">首页</router-link>\n          </li>\n          <li class=\"nav-item\" :class=\"{ 'hidden': !showNavItem('admin teacher student') }\">\n            <router-link to=\"/classroom\" class=\"nav-link\">教室预约</router-link>\n          </li>\n          <li class=\"nav-item\" :class=\"{ 'hidden': !showNavItem('admin student') }\">\n            <router-link to=\"/student/library\" class=\"nav-link\">图书馆</router-link>\n          </li>\n          <li class=\"nav-item\" :class=\"{ 'hidden': !showNavItem('admin') }\">\n            <router-link to=\"/admin/classroom\" class=\"nav-link\">教室管理</router-link>\n          </li>\n          <li class=\"nav-item\" :class=\"{ 'hidden': !showNavItem('admin') }\">\n            <router-link to=\"/admin/approve\" class=\"nav-link\">预约审批</router-link>\n          </li>\n        </ul>\n      </nav>\n      \n      <!-- 搜索框 -->\n      <div class=\"search-container\">\n        <form class=\"search-form\" @submit.prevent=\"handleSearch\">\n          <input \n            type=\"search\" \n            class=\"search-input\" \n            placeholder=\"搜索教室或书籍...\" \n            aria-label=\"搜索教室或书籍\"\n            v-model=\"searchQuery\"\n          >\n          <button type=\"submit\" class=\"search-button\">\n            <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <circle cx=\"11\" cy=\"11\" r=\"8\"></circle>\n              <path d=\"M21 21l-4.35-4.35\"></path>\n            </svg>\n          </button>\n        </form>\n      </div>\n      \n      <!-- 用户入口 -->\n      <div class=\"user-container\">\n        <div class=\"user-dropdown\" @click.stop=\"toggleDropdown\">\n          <button class=\"user-button\">\n            <svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <path d=\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\"></path>\n              <circle cx=\"12\" cy=\"7\" r=\"4\"></circle>\n            </svg>\n            <span class=\"user-text\">{{ userDisplayName }}</span>\n          </button>\n          <div class=\"dropdown-content\" v-show=\"isDropdownOpen\">\n            <router-link to=\"/login\" class=\"dropdown-item\" v-if=\"!userRole\">登录</router-link>\n            <router-link to=\"/profile\" class=\"dropdown-item\" v-if=\"userRole\">个人中心</router-link>\n            <a href=\"#\" class=\"dropdown-item\" v-if=\"userRole\" @click.prevent=\"handleLogout\">退出登录</a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </header>\n</template>\n\n<script>\nexport default {\n  name: 'AppHeader',\n  data() {\n    return {\n      userRole: null, // 'admin', 'teacher', 'student', null\n      searchQuery: '',\n      isDropdownOpen: false\n    }\n  },\n  computed: {\n    userDisplayName() {\n      if (!this.userRole) return '用户入口'\n      switch(this.userRole) {\n        case 'admin': return '管理员'\n        case 'teacher': return '教师'\n        case 'student': return '学生'\n        default: return '用户'\n      }\n    }\n  },\n  methods: {\n    // 根据用户角色显示导航项\n    showNavItem(requiredRoles) {\n      if (requiredRoles.includes('all')) return true\n      return this.userRole && requiredRoles.includes(this.userRole)\n    },\n    \n    // 搜索处理\n    handleSearch() {\n      if (this.searchQuery.trim()) {\n        console.log('执行搜索:', this.searchQuery)\n        // 这里可以跳转到搜索页面或显示搜索结果\n        alert(`搜索: ${this.searchQuery}`)\n      }\n    },\n    \n    // 切换下拉菜单\n    toggleDropdown() {\n      this.isDropdownOpen = !this.isDropdownOpen\n    },\n    \n    // 登出处理\n    handleLogout() {\n      console.log('用户登出')\n      this.userRole = null\n      this.isDropdownOpen = false\n      // 实际应用中这里应该调用API清除会话\n      alert('您已成功登出')\n      this.$router.push('/login')\n    },\n    \n    // 关闭下拉菜单（点击页面其他位置）\n    closeDropdown() {\n      this.isDropdownOpen = false\n    }\n  },\n  mounted() {\n    // 模拟获取用户角色（实际应从API获取）\n    // this.userRole = 'admin' // 测试用，可以取消注释测试管理员视图\n    \n    // 点击页面其他位置关闭下拉菜单\n    document.addEventListener('click', this.closeDropdown)\n  },\n  beforeUnmount() {\n    // 清理事件监听\n    document.removeEventListener('click', this.closeDropdown)\n  }\n}\n</script>\n\n<style scoped>\n/* 复制原来的header.css内容，但做一些调整 */\n.header-component {\n  background-color: #2A5CAA;\n  color: white;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  position: sticky;\n  top: 0;\n  z-index: 1000;\n  font-family: 'Roboto', 'PingFang SC', 'Microsoft YaHei', sans-serif;\n}\n\n.header-container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 20px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 70px;\n}\n\n.logo-container {\n  flex: 0 0 auto;\n}\n\n.logo {\n  height: 40px;\n  transition: opacity 0.2s ease;\n}\n\n.logo:hover {\n  opacity: 0.9;\n}\n\n.main-nav {\n  flex: 1 1 auto;\n  margin: 0 30px;\n}\n\n.nav-list {\n  display: flex;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.nav-item {\n  margin: 0 10px;\n}\n\n.nav-item.hidden {\n  display: none;\n}\n\n.nav-link {\n  color: white;\n  text-decoration: none;\n  font-size: 16px;\n  font-weight: 500;\n  padding: 8px 12px;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n}\n\n.nav-link:hover,\n.nav-link.router-link-active {\n  background-color: rgba(255, 255, 255, 0.1);\n}\n\n.search-container {\n  flex: 0 1 300px;\n  min-width: 200px;\n}\n\n.search-form {\n  display: flex;\n  position: relative;\n}\n\n.search-input {\n  width: 100%;\n  padding: 8px 15px;\n  border: none;\n  border-radius: 20px;\n  font-size: 14px;\n  outline: none;\n  transition: all 0.2s ease;\n}\n\n.search-input:focus {\n  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.3);\n}\n\n.search-button {\n  position: absolute;\n  right: 10px;\n  top: 50%;\n  transform: translateY(-50%);\n  background: none;\n  border: none;\n  color: #2A5CAA;\n  cursor: pointer;\n  padding: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.user-container {\n  flex: 0 0 auto;\n  margin-left: 20px;\n}\n\n.user-button {\n  background: none;\n  border: none;\n  color: white;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  padding: 8px 12px;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n}\n\n.user-button:hover {\n  background-color: rgba(255, 255, 255, 0.1);\n}\n\n.user-text {\n  margin-left: 8px;\n  font-size: 14px;\n}\n\n.user-dropdown {\n  position: relative;\n  display: inline-block;\n}\n\n.dropdown-content {\n  position: absolute;\n  right: 0;\n  background-color: white;\n  min-width: 160px;\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  z-index: 1;\n  overflow: hidden;\n}\n\n.dropdown-item {\n  color: #333;\n  padding: 12px 16px;\n  text-decoration: none;\n  display: block;\n  font-size: 14px;\n  transition: all 0.2s ease;\n}\n\n.dropdown-item:hover {\n  background-color: #f5f5f5;\n  color: #2A5CAA;\n}\n\n/* 响应式设计 */\n@media (max-width: 992px) {\n  .header-container {\n    padding: 0 15px;\n  }\n  \n  .search-container {\n    display: none;\n  }\n}\n\n@media (max-width: 768px) {\n  .header-container {\n    height: 60px;\n  }\n  \n  .logo {\n    height: 35px;\n  }\n  \n  .nav-link {\n    font-size: 14px;\n    padding: 6px 10px;\n  }\n  \n  .user-text {\n    display: none;\n  }\n}\n</style>"],"mappings":";AA6EA,eAAe;EACbA,IAAI,EAAE,WAAW;EACjBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE,IAAI;MAAE;MAChBC,WAAW,EAAE,EAAE;MACfC,cAAc,EAAE;IAClB;EACF,CAAC;EACDC,QAAQ,EAAE;IACRC,eAAeA,CAAA,EAAG;MAChB,IAAI,CAAC,IAAI,CAACJ,QAAQ,EAAE,OAAO,MAAK;MAChC,QAAO,IAAI,CAACA,QAAQ;QAClB,KAAK,OAAO;UAAE,OAAO,KAAI;QACzB,KAAK,SAAS;UAAE,OAAO,IAAG;QAC1B,KAAK,SAAS;UAAE,OAAO,IAAG;QAC1B;UAAS,OAAO,IAAG;MACrB;IACF;EACF,CAAC;EACDK,OAAO,EAAE;IACP;IACAC,WAAWA,CAACC,aAAa,EAAE;MACzB,IAAIA,aAAa,CAACC,QAAQ,CAAC,KAAK,CAAC,EAAE,OAAO,IAAG;MAC7C,OAAO,IAAI,CAACR,QAAO,IAAKO,aAAa,CAACC,QAAQ,CAAC,IAAI,CAACR,QAAQ;IAC9D,CAAC;IAED;IACAS,YAAYA,CAAA,EAAG;MACb,IAAI,IAAI,CAACR,WAAW,CAACS,IAAI,CAAC,CAAC,EAAE;QAC3BC,OAAO,CAACC,GAAG,CAAC,OAAO,EAAE,IAAI,CAACX,WAAW;QACrC;QACAY,KAAK,CAAC,OAAO,IAAI,CAACZ,WAAW,EAAE;MACjC;IACF,CAAC;IAED;IACAa,cAAcA,CAAA,EAAG;MACf,IAAI,CAACZ,cAAa,GAAI,CAAC,IAAI,CAACA,cAAa;IAC3C,CAAC;IAED;IACAa,YAAYA,CAAA,EAAG;MACbJ,OAAO,CAACC,GAAG,CAAC,MAAM;MAClB,IAAI,CAACZ,QAAO,GAAI,IAAG;MACnB,IAAI,CAACE,cAAa,GAAI,KAAI;MAC1B;MACAW,KAAK,CAAC,QAAQ;MACd,IAAI,CAACG,OAAO,CAACC,IAAI,CAAC,QAAQ;IAC5B,CAAC;IAED;IACAC,aAAaA,CAAA,EAAG;MACd,IAAI,CAAChB,cAAa,GAAI,KAAI;IAC5B;EACF,CAAC;EACDiB,OAAOA,CAAA,EAAG;IACR;IACA;;IAEA;IACAC,QAAQ,CAACC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAACH,aAAa;EACvD,CAAC;EACDI,aAAaA,CAAA,EAAG;IACd;IACAF,QAAQ,CAACG,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAACL,aAAa;EAC1D;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}