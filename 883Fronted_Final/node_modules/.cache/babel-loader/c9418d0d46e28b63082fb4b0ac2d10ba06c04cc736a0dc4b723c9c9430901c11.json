{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"homework-list-page\"\n};\nvar _hoisted_2 = {\n  \"class\": \"page-header\"\n};\nvar _hoisted_3 = {\n  \"class\": \"header-actions\"\n};\nvar _hoisted_4 = {\n  key: 0,\n  \"class\": \"loading\"\n};\nvar _hoisted_5 = {\n  key: 1,\n  \"class\": \"empty\"\n};\nvar _hoisted_6 = {\n  key: 2,\n  \"class\": \"homework-cards\"\n};\nvar _hoisted_7 = [\"onClick\"];\nvar _hoisted_8 = {\n  \"class\": \"card-left\"\n};\nvar _hoisted_9 = {\n  \"class\": \"title\"\n};\nvar _hoisted_10 = {\n  \"class\": \"deadline\"\n};\nvar _hoisted_11 = {\n  \"class\": \"card-right\"\n};\nvar _hoisted_12 = {\n  key: 0,\n  \"class\": \"grade\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[1] || (_cache[1] = _createElementVNode(\"h2\", null, \"我的作业\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"button\", {\n    \"class\": \"back-btn\",\n    onClick: _cache[0] || (_cache[0] = function () {\n      return $setup.goBackToCourses && $setup.goBackToCourses.apply($setup, arguments);\n    })\n  }, \"返回课程列表\")])]), $setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, \"加载中...\")) : $setup.homeworkList.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, \"暂无作业\")) : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.homeworkList, function (item) {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: item.homework_id,\n      \"class\": \"homework-card\",\n      onClick: function onClick($event) {\n        return $setup.goToDetail(item.homework_id);\n      }\n    }, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"h3\", _hoisted_9, _toDisplayString(item.title), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_10, \"截止时间：\" + _toDisplayString($setup.formatTime(item.due_date)), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"span\", {\n      \"class\": _normalizeClass([\"status-badge\", $setup.getStatusClass(item.my_submission_status)])\n    }, _toDisplayString($setup.getStatusText(item.my_submission_status)), 3 /* TEXT, CLASS */), item.my_grade !== null ? (_openBlock(), _createElementBlock(\"span\", _hoisted_12, _toDisplayString(item.my_grade) + \"分 \", 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])], 8 /* PROPS */, _hoisted_7);\n  }), 128 /* KEYED_FRAGMENT */))]))]);\n}","map":{"version":3,"names":["_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","onClick","_cache","$setup","goBackToCourses","apply","arguments","loading","_hoisted_4","homeworkList","length","_hoisted_5","_hoisted_6","_Fragment","_renderList","item","key","homework_id","$event","goToDetail","_hoisted_8","_hoisted_9","_toDisplayString","title","_hoisted_10","formatTime","due_date","_hoisted_11","_normalizeClass","getStatusClass","my_submission_status","getStatusText","my_grade","_hoisted_12"],"sources":["D:\\vvvvvvvvvscode_workspace\\fronted\\883Fronted_Final\\src\\views\\Student\\Teaching\\course\\StuHomework.vue"],"sourcesContent":["<template>\r\n  <div class=\"homework-list-page\">\r\n    <div class=\"page-header\">\r\n      <h2>我的作业</h2>\r\n      <div class=\"header-actions\">\r\n        <button class=\"back-btn\" @click=\"goBackToCourses\">返回课程列表</button>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"loading\" class=\"loading\">加载中...</div>\r\n    <div v-else-if=\"homeworkList.length === 0\" class=\"empty\">暂无作业</div>\r\n\r\n    <div v-else class=\"homework-cards\">\r\n      <div v-for=\"item in homeworkList\" :key=\"item.homework_id\" class=\"homework-card\"\r\n        @click=\"goToDetail(item.homework_id)\">\r\n        <div class=\"card-left\">\r\n          <h3 class=\"title\">{{ item.title }}</h3>\r\n          <p class=\"deadline\">截止时间：{{ formatTime(item.due_date) }}</p>\r\n        </div>\r\n\r\n        <div class=\"card-right\">\r\n          <span class=\"status-badge\" :class=\"getStatusClass(item.my_submission_status)\">\r\n            {{ getStatusText(item.my_submission_status) }}\r\n          </span>\r\n          <span v-if=\"item.my_grade !== null\" class=\"grade\">\r\n            {{ item.my_grade }}分\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, computed } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\n\r\nexport default {\r\n  name: 'StuHomework',\r\n  setup() {\r\n    const route = useRoute()\r\n    const router = useRouter()\r\n    // 优先从路由参数取，没有则从本地存储取\r\n    const classId = computed(() => route.query.classId || localStorage.getItem('currentClassId'))\r\n\r\n    const homeworkList = ref([])\r\n    const loading = ref(false)\r\n\r\n    onMounted(() => {\r\n      if (classId.value) {\r\n        fetchHomeworkList()\r\n      }\r\n    })\r\n    const goBackToCourses = () => {\r\n      router.push({ path: '/student/teachinghome' })\r\n    }\r\n    // 获取作业列表\r\n    const fetchHomeworkList = async () => {\r\n      loading.value = true\r\n      try {\r\n        const res = await fetch(`http://127.0.0.1:8081/student/classes/${classId.value}/homeworks?page=1&pageSize=100`)\r\n        const result = await res.json()\r\n        if (result.code === 1) {\r\n          homeworkList.value = result.data.rows || []\r\n        }\r\n      } catch (error) {\r\n        console.error('获取作业列表失败', error)\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n\r\n    const goToDetail = (homeworkId) => {\r\n      router.push({\r\n        path: '/student/teaching/homework/detail',\r\n        query: { homeworkId, classId: classId.value }\r\n      })\r\n    }\r\n\r\n    const formatTime = (time) => {\r\n      return time ? new Date(time).toLocaleString() : '无截止日期'\r\n    }\r\n\r\n    // 状态映射，根据接口文档逻辑调整\r\n    const getStatusText = (status) => {\r\n      // 假设：0/null=未提交, 1=已提交/准时, 2=迟交\r\n      const map = { 0: '未提交', 1: '已提交', 2: '迟交', 3: '未提交' }\r\n      return map[status] || '未提交'\r\n    }\r\n\r\n    const getStatusClass = (status) => {\r\n      if (status === 1) return 'success'\r\n      if (status === 2) return 'warning'\r\n      return 'pending'\r\n    }\r\n\r\n    return {\r\n      router,\r\n      classId,\r\n      homeworkList,\r\n      loading,\r\n      goBackToCourses,\r\n      fetchHomeworkList,\r\n      goToDetail,\r\n      formatTime,\r\n      getStatusText,\r\n      getStatusClass\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.homework-list-page {\r\n  padding: 20px;\r\n}\r\n\r\n.page-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-block-end: 20px;\r\n}\r\n\r\n.homework-cards {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 15px;\r\n}\r\n\r\n.homework-card {\r\n  background: #fff;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.homework-card:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.title {\r\n  margin: 0 0 8px 0;\r\n  font-size: 16px;\r\n  color: #333;\r\n}\r\n\r\n.deadline {\r\n  margin: 0;\r\n  font-size: 13px;\r\n  color: #999;\r\n}\r\n\r\n.card-right {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n  gap: 8px;\r\n}\r\n\r\n.status-badge {\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  font-size: 12px;\r\n}\r\n\r\n.status-badge.pending {\r\n  background: #f5f5f5;\r\n  color: #999;\r\n}\r\n\r\n.status-badge.success {\r\n  background: #f6ffed;\r\n  color: #52c41a;\r\n}\r\n\r\n.status-badge.warning {\r\n  background: #fff7e6;\r\n  color: #faad14;\r\n}\r\n\r\n.grade {\r\n  font-weight: bold;\r\n  color: #1890ff;\r\n}\r\n\r\n.back-btn {\r\n  padding: 6px 12px;\r\n  border: 1px solid #ddd;\r\n  background: white;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.loading,\r\n.empty {\r\n  text-align: center;\r\n  color: #999;\r\n  padding: 40px;\r\n}\r\n</style>"],"mappings":";;EACO,SAAM;AAAoB;;EACxB,SAAM;AAAa;;EAEjB,SAAM;AAAgB;;;EAKT,SAAM;;;;EACiB,SAAM;;;;EAErC,SAAM;;;;EAGT,SAAM;AAAW;;EAChB,SAAM;AAAO;;EACd,SAAM;AAAU;;EAGhB,SAAM;AAAY;;;EAIe,SAAM;;;uBAvBlDA,mBAAA,CA6BM,OA7BNC,UA6BM,GA5BJC,mBAAA,CAKM,OALNC,UAKM,G,0BAJJD,mBAAA,CAAa,YAAT,MAAI,qBACRA,mBAAA,CAEM,OAFNE,UAEM,GADJF,mBAAA,CAAiE;IAAzD,SAAM,UAAU;IAAEG,OAAK,EAAAC,MAAA,QAAAA,MAAA;MAAA,OAAEC,MAAA,CAAAC,eAAA,IAAAD,MAAA,CAAAC,eAAA,CAAAC,KAAA,CAAAF,MAAA,EAAAG,SAAA,CAAe;IAAA;KAAE,QAAM,E,KAIjDH,MAAA,CAAAI,OAAO,I,cAAlBX,mBAAA,CAAgD,OAAhDY,UAAgD,EAAZ,QAAM,KAC1BL,MAAA,CAAAM,YAAY,CAACC,MAAM,U,cAAnCd,mBAAA,CAAmE,OAAnEe,UAAmE,EAAV,MAAI,M,cAE7Df,mBAAA,CAiBM,OAjBNgB,UAiBM,I,kBAhBJhB,mBAAA,CAeMiB,SAAA,QAAAC,WAAA,CAfcX,MAAA,CAAAM,YAAY,YAApBM,IAAI;yBAAhBnB,mBAAA,CAeM;MAf6BoB,GAAG,EAAED,IAAI,CAACE,WAAW;MAAE,SAAM,eAAe;MAC5EhB,OAAK,WAALA,OAAKA,CAAAiB,MAAA;QAAA,OAAEf,MAAA,CAAAgB,UAAU,CAACJ,IAAI,CAACE,WAAW;MAAA;QACnCnB,mBAAA,CAGM,OAHNsB,UAGM,GAFJtB,mBAAA,CAAuC,MAAvCuB,UAAuC,EAAAC,gBAAA,CAAlBP,IAAI,CAACQ,KAAK,kBAC/BzB,mBAAA,CAA4D,KAA5D0B,WAA4D,EAAxC,OAAK,GAAAF,gBAAA,CAAGnB,MAAA,CAAAsB,UAAU,CAACV,IAAI,CAACW,QAAQ,kB,GAGtD5B,mBAAA,CAOM,OAPN6B,WAOM,GANJ7B,mBAAA,CAEO;MAFD,SAAK8B,eAAA,EAAC,cAAc,EAASzB,MAAA,CAAA0B,cAAc,CAACd,IAAI,CAACe,oBAAoB;wBACtE3B,MAAA,CAAA4B,aAAa,CAAChB,IAAI,CAACe,oBAAoB,0BAEhCf,IAAI,CAACiB,QAAQ,a,cAAzBpC,mBAAA,CAEO,QAFPqC,WAEO,EAAAX,gBAAA,CADFP,IAAI,CAACiB,QAAQ,IAAG,IACrB,mB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}