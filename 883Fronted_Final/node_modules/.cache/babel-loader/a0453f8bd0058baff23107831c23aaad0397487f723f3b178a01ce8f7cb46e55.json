{"ast":null,"code":"import { computed } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { useStore } from 'vuex';\n\n// 修正导入路径 - 根据您的实际结构\nimport AdminHeader from './components/layout/headers/AdminHeader.vue';\nimport TeaHeader from './components/layout/headers/TeaHeader.vue';\nimport StuHeader from './components/layout/headers/StuHeader.vue';\nimport AdminSidebar from './components/layout/siderbars/AdminSidebar.vue';\nimport TeaSidebar from './components/layout/siderbars/TeaSidebar.vue';\nimport StuSidebar from './components/layout/siderbars/StuSidebar.vue';\nexport default {\n  name: 'App',\n  components: {\n    AdminHeader,\n    TeaHeader,\n    StuHeader,\n    AdminSidebar,\n    TeaSidebar,\n    StuSidebar\n  },\n  setup() {\n    const route = useRoute();\n    const store = useStore();\n    const userRole = computed(() => {\n      return store.getters.userRole || 'student'; // 默认学生角色\n    });\n    const showSidebar = computed(() => {\n      const sidebarRoutes = [\n      // 学生路由\n      '/student/library', '/student/classroom', '/student/dorm',\n      // 教师路由  \n      '/teacher/library', '/teacher/classroom',\n      // 管理员路由\n      '/admin/dorm', '/admin/approve', '/admin/classroom', '/admin/library'\n      // 兼容旧路由\n      /*\n      '/tea-stu-classroom',\n      '/student-library',\n      '/admin-classroom',\n      '/admin-approve',\n      '/admin-library'\n      */];\n      return sidebarRoutes.some(path => route.path.startsWith(path));\n    });\n    return {\n      userRole,\n      showSidebar\n    };\n  }\n};","map":{"version":3,"names":["computed","useRoute","useStore","AdminHeader","TeaHeader","StuHeader","AdminSidebar","TeaSidebar","StuSidebar","name","components","setup","route","store","userRole","getters","showSidebar","sidebarRoutes","some","path","startsWith"],"sources":["/Users/zhouzhou/Desktop/883Fronted/Resource-Campus/src/App.vue"],"sourcesContent":["<!-- src/App.vue -->\n<template>\n  <div id=\"app\">\n    <!-- 动态显示对应角色的Header -->\n    <AdminHeader v-if=\"userRole === 'admin'\" />\n    <TeaHeader v-else-if=\"userRole === 'teacher'\" />\n    <StuHeader v-else />\n    \n    <!-- 动态显示对应角色的Sidebar -->\n    <AdminSidebar v-if=\"showSidebar && userRole === 'admin'\" />\n    <TeaSidebar v-else-if=\"showSidebar && userRole === 'teacher'\" />\n    <StuSidebar v-else-if=\"showSidebar\" />\n    \n    <main class=\"main-content\" :class=\"{ 'with-sidebar': showSidebar }\">\n      <router-view />\n    </main>\n  </div>\n</template>\n\n<script>\nimport { computed } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { useStore } from 'vuex'\n\n// 修正导入路径 - 根据您的实际结构\nimport AdminHeader from './components/layout/headers/AdminHeader.vue'\nimport TeaHeader from './components/layout/headers/TeaHeader.vue'\nimport StuHeader from './components/layout/headers/StuHeader.vue'\n\nimport AdminSidebar from './components/layout/siderbars/AdminSidebar.vue'\nimport TeaSidebar from './components/layout/siderbars/TeaSidebar.vue'\nimport StuSidebar from './components/layout/siderbars/StuSidebar.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    AdminHeader,\n    TeaHeader,\n    StuHeader,\n    AdminSidebar,\n    TeaSidebar,\n    StuSidebar\n  },\n  setup() {\n    const route = useRoute()\n    const store = useStore()\n    \n    const userRole = computed(() => {\n      return store.getters.userRole || 'student' // 默认学生角色\n    })\n    \n    const showSidebar = computed(() => {\n      const sidebarRoutes = [\n        // 学生路由\n        '/student/library',\n        '/student/classroom',\n        '/student/dorm',\n        // 教师路由  \n        '/teacher/library',\n        '/teacher/classroom',\n        // 管理员路由\n        '/admin/dorm',\n        '/admin/approve',\n        '/admin/classroom',\n        '/admin/library',\n        // 兼容旧路由\n        /*\n        '/tea-stu-classroom',\n        '/student-library',\n        '/admin-classroom',\n        '/admin-approve',\n        '/admin-library'\n        */\n      ]\n      return sidebarRoutes.some(path => route.path.startsWith(path))\n    })\n    \n    return {\n      userRole,\n      showSidebar\n    }\n  }\n}\n</script>\n\n<style>\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n#app {\n  min-height: 100vh;\n  position: relative;\n  background: transparent;\n}\n\n.main-content {\n  margin-top: -20px;\n  padding: 20px;\n  background: #f5f5f5;\n  min-height: calc(100vh - 60px);\n  transition: margin-left 0.3s ease;\n  background-clip: content-box;\n  background-origin: content-box;\n}\n\n.main-content.with-sidebar {\n  margin-left: 240px;\n}\n\n.main-content::before {\n  content: '';\n  position: absolute;\n  top: 50px; \n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: #f5f5f5;\n  z-index: -1;\n}\n\n.main-content.with-sidebar::before {\n  left: 240px;\n}\n</style>"],"mappings":"AAoBA,SAASA,QAAO,QAAS,KAAI;AAC7B,SAASC,QAAO,QAAS,YAAW;AACpC,SAASC,QAAO,QAAS,MAAK;;AAE9B;AACA,OAAOC,WAAU,MAAO,6CAA4C;AACpE,OAAOC,SAAQ,MAAO,2CAA0C;AAChE,OAAOC,SAAQ,MAAO,2CAA0C;AAEhE,OAAOC,YAAW,MAAO,gDAA+C;AACxE,OAAOC,UAAS,MAAO,8CAA6C;AACpE,OAAOC,UAAS,MAAO,8CAA6C;AAEpE,eAAe;EACbC,IAAI,EAAE,KAAK;EACXC,UAAU,EAAE;IACVP,WAAW;IACXC,SAAS;IACTC,SAAS;IACTC,YAAY;IACZC,UAAU;IACVC;EACF,CAAC;EACDG,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIX,QAAQ,CAAC;IACvB,MAAMY,KAAI,GAAIX,QAAQ,CAAC;IAEvB,MAAMY,QAAO,GAAId,QAAQ,CAAC,MAAM;MAC9B,OAAOa,KAAK,CAACE,OAAO,CAACD,QAAO,IAAK,SAAQ,EAAE;IAC7C,CAAC;IAED,MAAME,WAAU,GAAIhB,QAAQ,CAAC,MAAM;MACjC,MAAMiB,aAAY,GAAI;MACpB;MACA,kBAAkB,EAClB,oBAAoB,EACpB,eAAe;MACf;MACA,kBAAkB,EAClB,oBAAoB;MACpB;MACA,aAAa,EACb,gBAAgB,EAChB,kBAAkB,EAClB;MACA;MACA;;;;;;QAAA,CAOF;MACA,OAAOA,aAAa,CAACC,IAAI,CAACC,IAAG,IAAKP,KAAK,CAACO,IAAI,CAACC,UAAU,CAACD,IAAI,CAAC;IAC/D,CAAC;IAED,OAAO;MACLL,QAAQ;MACRE;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}