{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"grades-detail\"\n};\nvar _hoisted_2 = {\n  \"class\": \"page-header\"\n};\nvar _hoisted_3 = {\n  \"class\": \"card\"\n};\nvar _hoisted_4 = {\n  \"class\": \"toolbar\"\n};\nvar _hoisted_5 = {\n  \"class\": \"info\"\n};\nvar _hoisted_6 = {\n  \"class\": \"data-table\"\n};\nvar _hoisted_7 = {\n  \"class\": \"total\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[2] || (_cache[2] = _createElementVNode(\"h1\", null, \"成绩管理\", -1 /* CACHED */)), _createElementVNode(\"p\", null, \"当前课程：\" + _toDisplayString($setup.courseName), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"button\", {\n    \"class\": \"btn btn-primary\",\n    onClick: _cache[0] || (_cache[0] = function ($event) {\n      return _ctx.$router.push('input');\n    })\n  }, \"录入成绩\"), _createElementVNode(\"button\", {\n    \"class\": \"btn btn-outline\",\n    onClick: _cache[1] || (_cache[1] = function ($event) {\n      return _ctx.$router.push('composition');\n    })\n  }, \"设置权重\"), _createElementVNode(\"span\", _hoisted_5, \"总人数: \" + _toDisplayString($setup.students.length), 1 /* TEXT */)]), _createElementVNode(\"table\", _hoisted_6, [_cache[3] || (_cache[3] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"学号\"), _createElementVNode(\"th\", null, \"姓名\"), _createElementVNode(\"th\", null, \"平时 (30%)\"), _createElementVNode(\"th\", null, \"期中 (30%)\"), _createElementVNode(\"th\", null, \"期末 (40%)\"), _createElementVNode(\"th\", null, \"总成绩\"), _createElementVNode(\"th\", null, \"状态\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.students, function (stu) {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: stu.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(stu.id), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(stu.name), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(stu.score1 || '-'), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(stu.score2 || '-'), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(stu.score3 || '-'), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_7, _toDisplayString(stu.total), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"span\", {\n      \"class\": _normalizeClass([\"tag\", stu.total >= 60 ? 'pass' : 'fail'])\n    }, _toDisplayString(stu.total >= 60 ? '及格' : '不及格'), 3 /* TEXT, CLASS */)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])])]);\n}","map":{"version":3,"names":["_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_toDisplayString","$setup","courseName","_hoisted_3","_hoisted_4","onClick","_cache","$event","_ctx","$router","push","_hoisted_5","students","length","_hoisted_6","_Fragment","_renderList","stu","key","id","name","score1","score2","score3","_hoisted_7","total","_normalizeClass"],"sources":["D:\\vvvvvvvvvscode_workspace\\fronted\\883Fronted_Final\\src\\views\\Teacher\\Teaching\\course\\attendance\\Detail.vue"],"sourcesContent":["<template>\r\n  <div class=\"grades-detail\">\r\n    <div class=\"page-header\">\r\n      <h1>成绩管理</h1>\r\n      <p>当前课程：{{ courseName }}</p>\r\n    </div>\r\n\r\n    <div class=\"card\">\r\n      <div class=\"toolbar\">\r\n        <button class=\"btn btn-primary\" @click=\"$router.push('input')\">录入成绩</button>\r\n        <button class=\"btn btn-outline\" @click=\"$router.push('composition')\">设置权重</button>\r\n        <span class=\"info\">总人数: {{ students.length }}</span>\r\n      </div>\r\n\r\n      <table class=\"data-table\">\r\n        <thead>\r\n        <tr>\r\n          <th>学号</th>\r\n          <th>姓名</th>\r\n          <th>平时 (30%)</th>\r\n          <th>期中 (30%)</th>\r\n          <th>期末 (40%)</th>\r\n          <th>总成绩</th>\r\n          <th>状态</th>\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n        <tr v-for=\"stu in students\" :key=\"stu.id\">\r\n          <td>{{ stu.id }}</td>\r\n          <td>{{ stu.name }}</td>\r\n          <td>{{ stu.score1 || '-' }}</td>\r\n          <td>{{ stu.score2 || '-' }}</td>\r\n          <td>{{ stu.score3 || '-' }}</td>\r\n          <td class=\"total\">{{ stu.total }}</td>\r\n          <td><span class=\"tag\" :class=\"stu.total >= 60 ? 'pass' : 'fail'\">{{ stu.total >= 60 ? '及格' : '不及格' }}</span></td>\r\n        </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\n\r\nconst courseName = ref('')\r\nconst students = ref([])\r\n\r\n// 假数据生成器\r\nconst mockStudents = [\r\n  { id: '2023001', name: '陈同学', score1: 85, score2: 88, score3: 90, total: 88.1 },\r\n  { id: '2023002', name: '林同学', score1: 90, score2: 92, score3: 95, total: 92.6 },\r\n  { id: '2023003', name: '张同学', score1: 70, score2: 65, score3: 58, total: 63.7 },\r\n  { id: '2023004', name: '刘同学', score1: 60, score2: 55, score3: 40, total: 50.5 },\r\n  { id: '2023005', name: '王同学', score1: 95, score2: 96, score3: 98, total: 96.5 },\r\n]\r\n\r\nonMounted(async () => {\r\n  courseName.value = sessionStorage.getItem('selectedCourseName') || 'Modern Cryptography'\r\n  const classId = sessionStorage.getItem('selectedClassId')\r\n\r\n  try {\r\n    // 尝试从后端获取\r\n    const res = await fetch(`http://127.0.0.1:8081/teacher/classes/${classId}/gradebook`, {\r\n      headers: { 'token': localStorage.getItem('token') }\r\n    })\r\n    const data = await res.json()\r\n    if (data.code === 1 && data.data && data.data.students && data.data.students.length > 0) {\r\n      students.value = data.data.students // 使用真数据\r\n    } else {\r\n      students.value = mockStudents // 使用假数据\r\n    }\r\n  } catch (e) {\r\n    students.value = mockStudents // 出错也用假数据\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.grades-detail { padding: 24px; }\r\n.card { background: white; padding: 24px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }\r\n.toolbar { display: flex; gap: 10px; margin-bottom: 20px; align-items: center; }\r\n.info { margin-left: auto; color: #666; font-size: 14px; }\r\n\r\n.btn { padding: 8px 16px; border-radius: 4px; cursor: pointer; border: none; font-size: 14px; }\r\n.btn-primary { background: #2A5CAA; color: white; }\r\n.btn-outline { background: white; border: 1px solid #ddd; color: #333; }\r\n\r\n.data-table { width: 100%; border-collapse: collapse; }\r\n.data-table th, .data-table td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }\r\n.data-table th { background: #f9fafb; font-weight: 600; color: #555; }\r\n.total { font-weight: bold; color: #2A5CAA; }\r\n\r\n.tag { padding: 2px 8px; border-radius: 4px; font-size: 12px; }\r\n.tag.pass { background: #f6ffed; color: #52c41a; }\r\n.tag.fail { background: #fff2f0; color: #ff4d4f; }\r\n</style>"],"mappings":";;;;EACO,SAAM;AAAe;;EACnB,SAAM;AAAa;;EAKnB,SAAM;AAAM;;EACV,SAAM;AAAS;;EAGZ,SAAM;AAAM;;EAGb,SAAM;AAAY;;EAmBjB,SAAM;AAAO;;uBAhCzBA,mBAAA,CAsCM,OAtCNC,UAsCM,GArCJC,mBAAA,CAGM,OAHNC,UAGM,G,0BAFJD,mBAAA,CAAa,YAAT,MAAI,qBACRA,mBAAA,CAA4B,WAAzB,OAAK,GAAAE,gBAAA,CAAGC,MAAA,CAAAC,UAAU,iB,GAGvBJ,mBAAA,CA+BM,OA/BNK,UA+BM,GA9BJL,mBAAA,CAIM,OAJNM,UAIM,GAHJN,mBAAA,CAA4E;IAApE,SAAM,iBAAiB;IAAEO,OAAK,EAAAC,MAAA,QAAAA,MAAA,gBAAAC,MAAA;MAAA,OAAEC,IAAA,CAAAC,OAAO,CAACC,IAAI;IAAA;KAAW,MAAI,GACnEZ,mBAAA,CAAkF;IAA1E,SAAM,iBAAiB;IAAEO,OAAK,EAAAC,MAAA,QAAAA,MAAA,gBAAAC,MAAA;MAAA,OAAEC,IAAA,CAAAC,OAAO,CAACC,IAAI;IAAA;KAAiB,MAAI,GACzEZ,mBAAA,CAAoD,QAApDa,UAAoD,EAAjC,OAAK,GAAAX,gBAAA,CAAGC,MAAA,CAAAW,QAAQ,CAACC,MAAM,iB,GAG5Cf,mBAAA,CAuBQ,SAvBRgB,UAuBQ,G,0BAtBNhB,mBAAA,CAUQ,gBATRA,mBAAA,CAQK,aAPHA,mBAAA,CAAW,YAAP,IAAE,GACNA,mBAAA,CAAW,YAAP,IAAE,GACNA,mBAAA,CAAiB,YAAb,UAAQ,GACZA,mBAAA,CAAiB,YAAb,UAAQ,GACZA,mBAAA,CAAiB,YAAb,UAAQ,GACZA,mBAAA,CAAY,YAAR,KAAG,GACPA,mBAAA,CAAW,YAAP,IAAE,E,uBAGRA,mBAAA,CAUQ,iB,kBATRF,mBAAA,CAQKmB,SAAA,QAAAC,WAAA,CARaf,MAAA,CAAAW,QAAQ,YAAfK,GAAG;yBAAdrB,mBAAA,CAQK;MARwBsB,GAAG,EAAED,GAAG,CAACE;QACpCrB,mBAAA,CAAqB,YAAAE,gBAAA,CAAdiB,GAAG,CAACE,EAAE,kBACbrB,mBAAA,CAAuB,YAAAE,gBAAA,CAAhBiB,GAAG,CAACG,IAAI,kBACftB,mBAAA,CAAgC,YAAAE,gBAAA,CAAzBiB,GAAG,CAACI,MAAM,yBACjBvB,mBAAA,CAAgC,YAAAE,gBAAA,CAAzBiB,GAAG,CAACK,MAAM,yBACjBxB,mBAAA,CAAgC,YAAAE,gBAAA,CAAzBiB,GAAG,CAACM,MAAM,yBACjBzB,mBAAA,CAAsC,MAAtC0B,UAAsC,EAAAxB,gBAAA,CAAjBiB,GAAG,CAACQ,KAAK,kBAC9B3B,mBAAA,CAAiH,aAA7GA,mBAAA,CAAwG;MAAlG,SAAK4B,eAAA,EAAC,KAAK,EAAST,GAAG,CAACQ,KAAK;wBAA6BR,GAAG,CAACQ,KAAK,6C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}