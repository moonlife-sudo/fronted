{"ast":null,"code":"import _regenerator from \"D:/vvvvvvvvvscode_workspace/fronted/883Fronted_Final/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"D:/vvvvvvvvvscode_workspace/fronted/883Fronted_Final/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { ref, onMounted } from 'vue';\nexport default {\n  __name: 'Approval',\n  setup: function setup(__props, _ref) {\n    var __expose = _ref.expose;\n    __expose();\n    var courseName = ref('');\n    var requests = ref([]);\n\n    // å‡æ•°æ®\n    var mockRequests = [{\n      id: 101,\n      studentName: 'ææ˜',\n      studentId: '2023001',\n      type: 'sick',\n      typeText: 'ç—…å‡',\n      reason: 'æ˜¨æ™šå‘çƒ§39åº¦ï¼Œç°åœ¨è¿˜åœ¨åŒ»é™¢è¾“æ¶²ï¼Œé™„åŒ»é™¢è¯æ˜ã€‚',\n      startDate: '2025-11-29',\n      endDate: '2025-11-30',\n      days: 2\n    }, {\n      id: 102,\n      studentName: 'ç‹èŠ³',\n      studentId: '2023003',\n      type: 'event',\n      typeText: 'äº‹å‡',\n      reason: 'å®¶ä¸­å§å§ç»“å©šï¼Œéœ€è¦å›å»å¸®å¿™ã€‚',\n      startDate: '2025-12-01',\n      endDate: '2025-12-03',\n      days: 3\n    }, {\n      id: 103,\n      studentName: 'èµµå¼º',\n      studentId: '2023004',\n      type: 'sick',\n      typeText: 'ç—…å‡',\n      reason: 'æ€¥æ€§è‚ èƒƒç‚ã€‚',\n      startDate: '2025-11-29',\n      endDate: '2025-11-29',\n      days: 1\n    }];\n    onMounted(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n      var res, data, _t;\n      return _regenerator().w(function (_context) {\n        while (1) switch (_context.p = _context.n) {\n          case 0:\n            courseName.value = sessionStorage.getItem('selectedCourseName') || 'Modern Cryptography';\n            // åŒæ ·å°è¯•è°ƒæ¥å£ï¼Œå¤±è´¥ç”¨å‡æ•°æ®\n            _context.p = 1;\n            _context.n = 2;\n            return fetch('http://127.0.0.1:8081/teacher/leave-requests/pending', {\n              headers: {\n                'token': localStorage.getItem('token')\n              }\n            });\n          case 2:\n            res = _context.v;\n            _context.n = 3;\n            return res.json();\n          case 3:\n            data = _context.v;\n            if (data.code === 1 && data.data.rows.length > 0) {\n              // è¿™é‡Œå¦‚æœçœŸæœ‰æ•°æ®ï¼Œéœ€è¦é€‚é…å­—æ®µï¼Œä¸ºäº†ä¿é™©ï¼Œæ¼”ç¤ºæ—¶è¿˜æ˜¯æ··å…¥å‡æ•°æ®æ¯”è¾ƒç¨³\n              // çœŸå®æƒ…å†µï¼šå¯ä»¥æŠŠåç«¯æ•°æ® map ä¸€ä¸‹åŠ è¿›å»\n            }\n            requests.value = mockRequests;\n            _context.n = 5;\n            break;\n          case 4:\n            _context.p = 4;\n            _t = _context.v;\n            requests.value = mockRequests;\n          case 5:\n            return _context.a(2);\n        }\n      }, _callee, null, [[1, 4]]);\n    })));\n    var handleAction = function handleAction(id, type) {\n      var actionText = type === 'approve' ? 'å·²æ‰¹å‡†' : 'å·²é©³å›';\n      if (confirm(\"\\u786E\\u5B9A\\u8981\".concat(type === 'approve' ? 'æ‰¹å‡†' : 'é©³å›', \"\\u8BE5\\u7533\\u8BF7\\u5417\\uFF1F\"))) {\n        // è§†è§‰ä¸Šç§»é™¤è¯¥æ¡ç›®\n        requests.value = requests.value.filter(function (r) {\n          return r.id !== id;\n        });\n        alert(\"\".concat(actionText, \"\\uFF01\"));\n        // å¯ä»¥åœ¨è¿™é‡Œå‘ä¸ªå¼‚æ­¥è¯·æ±‚ç»™åç«¯ï¼Œä¸ç®¡ç»“æœ\n      }\n    };\n    var __returned__ = {\n      courseName: courseName,\n      requests: requests,\n      mockRequests: mockRequests,\n      handleAction: handleAction,\n      ref: ref,\n      onMounted: onMounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","courseName","requests","mockRequests","id","studentName","studentId","type","typeText","reason","startDate","endDate","days","_asyncToGenerator","_regenerator","m","_callee","res","data","_t","w","_context","p","n","value","sessionStorage","getItem","fetch","headers","localStorage","v","json","code","rows","length","a","handleAction","actionText","confirm","concat","filter","r","alert"],"sources":["D:/vvvvvvvvvscode_workspace/fronted/883Fronted_Final/src/views/Teacher/Teaching/course/leave/Approval.vue"],"sourcesContent":["<template>\r\n  <div class=\"leave-approval\">\r\n    <div class=\"page-header\">\r\n      <h1>è¯·å‡å®¡æ‰¹</h1>\r\n      <p>å½“å‰è¯¾ç¨‹ï¼š{{ courseName }} (å¾…å¤„ç†: {{ requests.length }})</p>\r\n    </div>\r\n\r\n    <div class=\"card\">\r\n      <div v-if=\"requests.length === 0\" class=\"empty\">ğŸ‰ æ‰€æœ‰ç”³è¯·éƒ½å·²å¤„ç†å®Œæ¯•ï¼</div>\r\n\r\n      <div v-else class=\"request-list\">\r\n        <div v-for=\"req in requests\" :key=\"req.id\" class=\"req-item\">\r\n          <div class=\"req-info\">\r\n            <div class=\"student\">\r\n              <span class=\"name\">{{ req.studentName }}</span>\r\n              <span class=\"id\">{{ req.studentId }}</span>\r\n            </div>\r\n            <div class=\"reason-box\">\r\n              <span class=\"type-tag\" :class=\"req.type\">{{ req.typeText }}</span>\r\n              <p class=\"reason\">{{ req.reason }}</p>\r\n            </div>\r\n            <div class=\"time\">\r\n              ğŸ•’ {{ req.startDate }} è‡³ {{ req.endDate }} (å…±{{ req.days }}å¤©)\r\n            </div>\r\n          </div>\r\n          <div class=\"req-actions\">\r\n            <button class=\"btn-approve\" @click=\"handleAction(req.id, 'approve')\">æ‰¹å‡†</button>\r\n            <button class=\"btn-reject\" @click=\"handleAction(req.id, 'reject')\">é©³å›</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\n\r\nconst courseName = ref('')\r\nconst requests = ref([])\r\n\r\n// å‡æ•°æ®\r\nconst mockRequests = [\r\n  { id: 101, studentName: 'ææ˜', studentId: '2023001', type: 'sick', typeText: 'ç—…å‡', reason: 'æ˜¨æ™šå‘çƒ§39åº¦ï¼Œç°åœ¨è¿˜åœ¨åŒ»é™¢è¾“æ¶²ï¼Œé™„åŒ»é™¢è¯æ˜ã€‚', startDate: '2025-11-29', endDate: '2025-11-30', days: 2 },\r\n  { id: 102, studentName: 'ç‹èŠ³', studentId: '2023003', type: 'event', typeText: 'äº‹å‡', reason: 'å®¶ä¸­å§å§ç»“å©šï¼Œéœ€è¦å›å»å¸®å¿™ã€‚', startDate: '2025-12-01', endDate: '2025-12-03', days: 3 },\r\n  { id: 103, studentName: 'èµµå¼º', studentId: '2023004', type: 'sick', typeText: 'ç—…å‡', reason: 'æ€¥æ€§è‚ èƒƒç‚ã€‚', startDate: '2025-11-29', endDate: '2025-11-29', days: 1 },\r\n]\r\n\r\nonMounted(async () => {\r\n  courseName.value = sessionStorage.getItem('selectedCourseName') || 'Modern Cryptography'\r\n  // åŒæ ·å°è¯•è°ƒæ¥å£ï¼Œå¤±è´¥ç”¨å‡æ•°æ®\r\n  try {\r\n    const res = await fetch('http://127.0.0.1:8081/teacher/leave-requests/pending', {\r\n      headers: { 'token': localStorage.getItem('token') }\r\n    })\r\n    const data = await res.json()\r\n    if (data.code === 1 && data.data.rows.length > 0) {\r\n      // è¿™é‡Œå¦‚æœçœŸæœ‰æ•°æ®ï¼Œéœ€è¦é€‚é…å­—æ®µï¼Œä¸ºäº†ä¿é™©ï¼Œæ¼”ç¤ºæ—¶è¿˜æ˜¯æ··å…¥å‡æ•°æ®æ¯”è¾ƒç¨³\r\n      // çœŸå®æƒ…å†µï¼šå¯ä»¥æŠŠåç«¯æ•°æ® map ä¸€ä¸‹åŠ è¿›å»\r\n    }\r\n    requests.value = mockRequests\r\n  } catch (e) {\r\n    requests.value = mockRequests\r\n  }\r\n})\r\n\r\nconst handleAction = (id, type) => {\r\n  const actionText = type === 'approve' ? 'å·²æ‰¹å‡†' : 'å·²é©³å›'\r\n  if (confirm(`ç¡®å®šè¦${type === 'approve'?'æ‰¹å‡†':'é©³å›'}è¯¥ç”³è¯·å—ï¼Ÿ`)) {\r\n    // è§†è§‰ä¸Šç§»é™¤è¯¥æ¡ç›®\r\n    requests.value = requests.value.filter(r => r.id !== id)\r\n    alert(`${actionText}ï¼`)\r\n    // å¯ä»¥åœ¨è¿™é‡Œå‘ä¸ªå¼‚æ­¥è¯·æ±‚ç»™åç«¯ï¼Œä¸ç®¡ç»“æœ\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.leave-approval { padding: 24px; }\r\n.card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }\r\n.empty { text-align: center; color: #999; padding: 40px; }\r\n\r\n.req-item { display: flex; justify-content: space-between; align-items: center; padding: 20px; border-bottom: 1px solid #eee; }\r\n.req-info { flex: 1; }\r\n\r\n.student { margin-bottom: 8px; font-weight: bold; }\r\n.student .id { color: #999; font-weight: normal; margin-left: 8px; font-size: 13px; }\r\n\r\n.reason-box { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; }\r\n.type-tag { padding: 2px 8px; font-size: 12px; border-radius: 4px; }\r\n.type-tag.sick { background: #fff1f0; color: #ff4d4f; border: 1px solid #ffccc7; }\r\n.type-tag.event { background: #fff7e6; color: #fa8c16; border: 1px solid #ffd591; }\r\n.reason { margin: 0; color: #555; }\r\n\r\n.time { font-size: 13px; color: #888; }\r\n\r\n.req-actions { display: flex; gap: 10px; }\r\n.btn-approve { background: #2A5CAA; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; }\r\n.btn-reject { background: white; border: 1px solid #ff4d4f; color: #ff4d4f; padding: 8px 16px; border-radius: 4px; cursor: pointer; }\r\n.btn-approve:hover { background: #1e4b8b; }\r\n.btn-reject:hover { background: #fff1f0; }\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}