{"ast":null,"code":"// router/index.js\nimport { createRouter, createWebHistory } from 'vue-router';\nimport AdminLayout from '@/layouts/AdminLayout.vue';\nimport TeacherLayout from '@/layouts/TeacherLayout.vue';\nimport StudentLayout from '@/layouts/StudentLayout.vue';\nconst routes = [\n// 根路径重定向 - 根据用户角色重定向到对应首页\n{\n  path: '/',\n  redirect: () => {\n    const userRole = localStorage.getItem('userRole') || 'student';\n    switch (userRole) {\n      case 'admin':\n        return '/admin/home';\n      case 'teacher':\n        return '/teacher/resourcehome';\n      case 'student':\n        return '/student/home';\n      default:\n        return '/student/home';\n    }\n  }\n},\n// 学生路由\n{\n  path: '/student',\n  component: StudentLayout,\n  //meta: { role: 'student' },\n  children: [{\n    path: 'home',\n    name: 'StudentHome',\n    component: () => import('../views/Student/StuResourceHome.vue'),\n    meta: {\n      showSidebar: false\n    }\n  }, {\n    path: 'library',\n    name: 'StudentLibrary',\n    component: () => import('../views/Student/Resource/StudentLibrary.vue'),\n    meta: {\n      showSidebar: true\n    }\n  }, {\n    path: 'classroom',\n    name: 'StudentClassroom',\n    component: () => import('../views/Student/Resource/TeaStuClassroom.vue'),\n    meta: {\n      showSidebar: true\n    }\n  }, {\n    path: 'profile',\n    name: 'StudentProfile',\n    component: () => import('../views/Student/stuProfile.vue'),\n    meta: {\n      showSidebar: false\n    }\n  }]\n},\n// 教师路由\n{\n  path: '/teacher',\n  component: TeacherLayout,\n  //meta: { role: 'teacher' },\n  children: [{\n    path: 'resourcehome',\n    // 注意：这里是 resourcehome，不是 home\n    name: 'TeacherHome',\n    component: () => import('../views/Teacher/TeaResourceHome.vue'),\n    meta: {\n      showSidebar: false\n    }\n  }, {\n    path: 'library',\n    name: 'TeacherLibrary',\n    component: () => import('../views/Teacher/Resource/TeacherLibrary.vue'),\n    meta: {\n      showSidebar: true\n    }\n  }, {\n    path: 'classroom',\n    name: 'TeacherClassroom',\n    component: () => import('../views/Teacher/Resource/TeaStuClassroom.vue'),\n    meta: {\n      showSidebar: true\n    }\n  }, {\n    path: 'profile',\n    name: 'TeacherProfile',\n    component: () => import('../views/Teacher/TeacherProfile.vue'),\n    meta: {\n      showSidebar: false\n    }\n  }]\n},\n// 管理员路由\n{\n  path: '/admin',\n  component: AdminLayout,\n  //meta: { role: 'admin' },\n  children: [{\n    path: 'home',\n    name: 'AdminHome',\n    component: () => import('../views/Admin/AdminResourceHome.vue'),\n    meta: {\n      showSidebar: false\n    }\n  }, {\n    path: 'dorm',\n    name: 'AdminDorm',\n    component: () => import('../views/Admin/Campus/AdminDorm.vue'),\n    meta: {\n      showSidebar: true\n    }\n  }, {\n    path: 'approve',\n    name: 'AdminApprove',\n    component: () => import('../views/Admin/Resource/AdminApprove.vue'),\n    meta: {\n      showSidebar: true\n    }\n  }, {\n    path: 'classroom',\n    name: 'AdminClassroom',\n    component: () => import('../views/Admin/Resource/AdminClassroom.vue'),\n    meta: {\n      showSidebar: true\n    }\n  }, {\n    path: 'library',\n    name: 'AdminLibrary',\n    component: () => import('../views/Admin/Resource/AdminLibrary.vue'),\n    meta: {\n      showSidebar: true\n    }\n  }, {\n    path: 'profile',\n    name: 'AdminProfile',\n    component: () => import('../views/Admin/AdminProfile.vue'),\n    meta: {\n      showSidebar: false\n    }\n  }]\n}];\nconst router = createRouter({\n  history: createWebHistory(),\n  routes\n});\n\n// 路由守卫 - 修正重定向逻辑\n/*\nrouter.beforeEach((to, from, next) => {\n  // 获取用户角色（从Vuex或localStorage）\n  const userRole = localStorage.getItem('userRole') || 'teacher'\n  \n  // 检查路由权限\n  if (to.meta.role && to.meta.role !== userRole) {\n    // 无权限访问，重定向到对应用户的首页\n    switch (userRole) {\n      case 'admin':\n        next('/admin/home')\n        break\n      case 'teacher':\n        next('/teacher/resourcehome')  // 注意：这里是 resourcehome\n        break\n      case 'student':\n        next('/student/home')\n        break\n      default:\n        next('/student/home')\n    }\n    return\n  }\n  \n  next()\n})\n  */\n\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","AdminLayout","TeacherLayout","StudentLayout","routes","path","redirect","userRole","localStorage","getItem","component","children","name","meta","showSidebar","router","history"],"sources":["/Users/zhouzhou/Desktop/883Fronted/Resource-Campus/src/router/index.js"],"sourcesContent":["// router/index.js\nimport { createRouter, createWebHistory } from 'vue-router'\nimport AdminLayout from '@/layouts/AdminLayout.vue'\nimport TeacherLayout from '@/layouts/TeacherLayout.vue'\nimport StudentLayout from '@/layouts/StudentLayout.vue'\n\nconst routes = [\n  // 根路径重定向 - 根据用户角色重定向到对应首页\n  {\n    path: '/',\n    redirect: () => {\n      const userRole = localStorage.getItem('userRole') || 'student'\n      switch (userRole) {\n        case 'admin': return '/admin/home'\n        case 'teacher': return '/teacher/resourcehome'\n        case 'student': return '/student/home'\n        default: return '/student/home'\n      }\n    }\n  },\n  \n  // 学生路由\n  {\n    path: '/student',\n    component: StudentLayout,\n    //meta: { role: 'student' },\n    children: [\n      {\n        path: 'home',\n        name: 'StudentHome',\n        component: () => import('../views/Student/StuResourceHome.vue'),\n        meta: { showSidebar: false }\n      },\n      {\n        path: 'library',\n        name: 'StudentLibrary',\n        component: () => import('../views/Student/Resource/StudentLibrary.vue'),\n        meta: { showSidebar: true }\n      },\n      {\n        path: 'classroom',\n        name: 'StudentClassroom',\n        component: () => import('../views/Student/Resource/TeaStuClassroom.vue'),\n        meta: { showSidebar: true }\n      },\n      {\n        path: 'profile',\n        name: 'StudentProfile',\n        component: () => import('../views/Student/stuProfile.vue'),\n        meta: { showSidebar: false }\n      }\n    ]\n  },\n  \n  // 教师路由\n  {\n    path: '/teacher',\n    component: TeacherLayout,\n    //meta: { role: 'teacher' },\n    children: [\n      {\n        path: 'resourcehome',  // 注意：这里是 resourcehome，不是 home\n        name: 'TeacherHome',\n        component: () => import('../views/Teacher/TeaResourceHome.vue'),\n        meta: { showSidebar: false }\n      },\n      {\n        path: 'library',\n        name: 'TeacherLibrary',\n        component: () => import('../views/Teacher/Resource/TeacherLibrary.vue'),\n        meta: { showSidebar: true }\n      },\n      {\n        path: 'classroom',\n        name: 'TeacherClassroom',\n        component: () => import('../views/Teacher/Resource/TeaStuClassroom.vue'),\n        meta: { showSidebar: true }\n      },\n      {\n        path: 'profile',\n        name: 'TeacherProfile',\n        component: () => import('../views/Teacher/TeacherProfile.vue'),\n        meta: { showSidebar: false }\n      }\n    ]\n  },\n  \n  // 管理员路由\n  {\n    path: '/admin',\n    component: AdminLayout,\n    //meta: { role: 'admin' },\n    children: [\n      {\n        path: 'home',\n        name: 'AdminHome',\n        component: () => import('../views/Admin/AdminResourceHome.vue'),\n        meta: { showSidebar: false }\n      },\n      {\n        path: 'dorm',\n        name: 'AdminDorm',\n        component: () => import('../views/Admin/Campus/AdminDorm.vue'),\n        meta: { showSidebar: true }\n      },\n      {\n        path: 'approve',\n        name: 'AdminApprove',\n        component: () => import('../views/Admin/Resource/AdminApprove.vue'),\n        meta: { showSidebar: true }\n      },\n      {\n        path: 'classroom',\n        name: 'AdminClassroom',\n        component: () => import('../views/Admin/Resource/AdminClassroom.vue'),\n        meta: { showSidebar: true }\n      },\n      {\n        path: 'library',\n        name: 'AdminLibrary',\n        component: () => import('../views/Admin/Resource/AdminLibrary.vue'),\n        meta: { showSidebar: true }\n      },\n      {\n        path: 'profile',\n        name: 'AdminProfile',\n        component: () => import('../views/Admin/AdminProfile.vue'),\n        meta: { showSidebar: false }\n      }\n    ]\n  }\n]\n\nconst router = createRouter({\n  history: createWebHistory(),\n  routes\n})\n\n// 路由守卫 - 修正重定向逻辑\n/*\nrouter.beforeEach((to, from, next) => {\n  // 获取用户角色（从Vuex或localStorage）\n  const userRole = localStorage.getItem('userRole') || 'teacher'\n  \n  // 检查路由权限\n  if (to.meta.role && to.meta.role !== userRole) {\n    // 无权限访问，重定向到对应用户的首页\n    switch (userRole) {\n      case 'admin':\n        next('/admin/home')\n        break\n      case 'teacher':\n        next('/teacher/resourcehome')  // 注意：这里是 resourcehome\n        break\n      case 'student':\n        next('/student/home')\n        break\n      default:\n        next('/student/home')\n    }\n    return\n  }\n  \n  next()\n})\n  */\n\nexport default router"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}