{"ast":null,"code":"import _regenerator from \"D:/vvvvvvvvvscode_workspace/fronted/883Fronted_Final/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"D:/vvvvvvvvvscode_workspace/fronted/883Fronted_Final/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport { getProfile, updateProfile, updatePassword, uploadFile } from '@/api/user';\nexport default {\n  name: 'UserProfile',\n  data: function data() {\n    return {\n      activeSection: 'basic-info',\n      isEditing: false,\n      loading: false,\n      passwordDialog: {\n        visible: false,\n        oldPassword: '',\n        newPassword: '',\n        confirmPassword: ''\n      },\n      originalUserInfo: null,\n      // 保存原始数据用于取消编辑\n      userInfo: {\n        full_name: '',\n        username: '',\n        student_id_number: '',\n        email: '',\n        phone_number: '',\n        avatar_url: '',\n        major: '',\n        class_name: '',\n        grade: '',\n        role: '学生'\n      },\n      navItems: [{\n        id: 'basic-info',\n        text: '基本信息',\n        icon: 'bi bi-person-fill'\n      }, {\n        id: 'account-security',\n        text: '账号安全',\n        icon: 'bi bi-shield-lock-fill'\n      }, {\n        id: 'notifications',\n        text: '消息通知',\n        icon: 'bi bi-bell-fill'\n      }, {\n        id: 'settings',\n        text: '系统设置',\n        icon: 'bi bi-gear-fill'\n      }],\n      notifications: [{\n        id: 1,\n        title: '系统公告：新学期选课通知',\n        content: '新学期选课系统将于2023年9月1日开放，请同学们提前做好准备...',\n        time: '2023-08-25 10:30',\n        icon: 'bi bi-megaphone-fill',\n        unread: true\n      }, {\n        id: 2,\n        title: '课程提醒：计算机组成原理',\n        content: '您的计算机组成原理课程将于明天上午8:00在教三楼301教室上课...',\n        time: '2023-08-24 15:45',\n        icon: 'bi bi-calendar-event-fill',\n        unread: false\n      }, {\n        id: 3,\n        title: '作业提醒：数据结构作业',\n        content: '数据结构课程的第二次作业已发布，截止日期为2023年9月5日...',\n        time: '2023-08-23 09:20',\n        icon: 'bi bi-book-fill',\n        unread: false\n      }],\n      notificationSettings: [{\n        id: 1,\n        name: '课程提醒',\n        description: '课程开始前提醒我',\n        enabled: true\n      }, {\n        id: 2,\n        name: '作业截止提醒',\n        description: '作业截止前提醒我',\n        enabled: true\n      }, {\n        id: 3,\n        name: '系统公告',\n        description: '接收系统公告和通知',\n        enabled: true\n      }],\n      privacySettings: [{\n        id: 1,\n        name: '公开个人信息',\n        description: '允许其他同学查看我的基本信息',\n        enabled: false\n      }],\n      themeColors: ['blue', 'green', 'purple']\n    };\n  },\n  computed: {\n    maskedPhone: function maskedPhone() {\n      return this.userInfo.phone_number ? this.userInfo.phone_number.replace(/(\\d{3})\\d{4}(\\d{4})/, '$1****$2') : '未绑定';\n    },\n    maskedEmail: function maskedEmail() {\n      return this.userInfo.email ? this.userInfo.email.replace(/(.{2}).*@(.*)/, '$1****@$2') : '未绑定';\n    },\n    filteredActivities: function filteredActivities() {\n      // 根据选择的时间范围过滤活动\n      // 这里简化处理，实际项目中需要根据日期计算\n      return this.activities;\n    }\n  },\n  methods: {\n    switchSection: function switchSection(sectionId) {\n      this.activeSection = sectionId;\n    },\n    enableEdit: function enableEdit() {\n      this.isEditing = true;\n    },\n    cancelEdit: function cancelEdit() {\n      this.isEditing = false;\n      // 恢复原始数据\n      if (this.originalUserInfo) {\n        this.userInfo = JSON.parse(JSON.stringify(this.originalUserInfo));\n      }\n    },\n    saveBasicInfo: function saveBasicInfo() {\n      var _this = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n        var token, basicInfo, profileInfo, result, _t;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.p = _context.n) {\n            case 0:\n              if (!_this.loading) {\n                _context.n = 1;\n                break;\n              }\n              return _context.a(2);\n            case 1:\n              // 检查token是否存在\n              token = localStorage.getItem('token');\n              if (token) {\n                _context.n = 2;\n                break;\n              }\n              alert('未登录，请先登录');\n              _this.$router.push('/login');\n              return _context.a(2);\n            case 2:\n              _this.loading = true;\n              _context.p = 3;\n              basicInfo = {\n                email: _this.userInfo.email || null,\n                phone_number: _this.userInfo.phone_number || null\n              };\n              profileInfo = {\n                major: _this.userInfo.major || null,\n                class_name: _this.userInfo.class_name || null,\n                grade: _this.userInfo.grade || null\n              };\n              _context.n = 4;\n              return updateProfile({\n                basicInfo: basicInfo,\n                profileInfo: profileInfo\n              });\n            case 4:\n              result = _context.v;\n              if (!(result.code === 1)) {\n                _context.n = 6;\n                break;\n              }\n              alert('个人信息已保存成功！');\n              _this.isEditing = false;\n              // 重新加载用户信息\n              _context.n = 5;\n              return _this.loadUserInfo();\n            case 5:\n              _context.n = 7;\n              break;\n            case 6:\n              alert(result.msg || '保存失败，请重试');\n            case 7:\n              _context.n = 9;\n              break;\n            case 8:\n              _context.p = 8;\n              _t = _context.v;\n              console.error('保存失败:', _t);\n              if (_t.message && _t.message.includes('未登录')) {\n                alert('登录已过期，请重新登录');\n                _this.$router.push('/login');\n              } else {\n                alert(_t.message || '保存失败，请稍后重试');\n              }\n            case 9:\n              _context.p = 9;\n              _this.loading = false;\n              return _context.f(9);\n            case 10:\n              return _context.a(2);\n          }\n        }, _callee, null, [[3, 8, 9, 10]]);\n      }))();\n    },\n    modifyPassword: function modifyPassword() {\n      this.passwordDialog.visible = true;\n      this.passwordDialog.oldPassword = '';\n      this.passwordDialog.newPassword = '';\n      this.passwordDialog.confirmPassword = '';\n    },\n    savePassword: function savePassword() {\n      var _this2 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {\n        var result, _t2;\n        return _regenerator().w(function (_context2) {\n          while (1) switch (_context2.p = _context2.n) {\n            case 0:\n              if (!(!_this2.passwordDialog.oldPassword || !_this2.passwordDialog.newPassword)) {\n                _context2.n = 1;\n                break;\n              }\n              alert('请填写完整信息');\n              return _context2.a(2);\n            case 1:\n              if (!(_this2.passwordDialog.newPassword !== _this2.passwordDialog.confirmPassword)) {\n                _context2.n = 2;\n                break;\n              }\n              alert('两次输入的密码不一致');\n              return _context2.a(2);\n            case 2:\n              if (!(_this2.passwordDialog.newPassword.length < 6)) {\n                _context2.n = 3;\n                break;\n              }\n              alert('密码长度至少6位');\n              return _context2.a(2);\n            case 3:\n              _this2.loading = true;\n              _context2.p = 4;\n              _context2.n = 5;\n              return updatePassword({\n                oldPassword: _this2.passwordDialog.oldPassword,\n                newPassword: _this2.passwordDialog.newPassword\n              });\n            case 5:\n              result = _context2.v;\n              if (result.code === 1) {\n                alert('密码修改成功！');\n                _this2.passwordDialog.visible = false;\n              } else {\n                alert(result.msg || '密码修改失败');\n              }\n              _context2.n = 7;\n              break;\n            case 6:\n              _context2.p = 6;\n              _t2 = _context2.v;\n              console.error('修改密码失败:', _t2);\n              alert(_t2.message || '修改密码失败，请稍后重试');\n            case 7:\n              _context2.p = 7;\n              _this2.loading = false;\n              return _context2.f(7);\n            case 8:\n              return _context2.a(2);\n          }\n        }, _callee2, null, [[4, 6, 7, 8]]);\n      }))();\n    },\n    loadUserInfo: function loadUserInfo() {\n      var _this3 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3() {\n        var token, result, _data$profile, _data$profile2, _data$profile3, _data$profile4, data, _t3;\n        return _regenerator().w(function (_context3) {\n          while (1) switch (_context3.p = _context3.n) {\n            case 0:\n              _this3.loading = true;\n              _context3.p = 1;\n              // 检查token是否存在\n              token = localStorage.getItem('token');\n              if (token) {\n                _context3.n = 2;\n                break;\n              }\n              alert('未登录，请先登录');\n              _this3.$router.push('/login');\n              return _context3.a(2);\n            case 2:\n              _context3.n = 3;\n              return getProfile();\n            case 3:\n              result = _context3.v;\n              if (result.code === 1 && result.data) {\n                data = result.data;\n                _this3.userInfo = {\n                  full_name: data.full_name || '',\n                  username: data.username || '',\n                  student_id_number: ((_data$profile = data.profile) === null || _data$profile === void 0 ? void 0 : _data$profile.student_id_number) || '',\n                  email: data.email || '',\n                  phone_number: data.phone_number || '',\n                  avatar_url: data.avatar_url || '',\n                  major: ((_data$profile2 = data.profile) === null || _data$profile2 === void 0 ? void 0 : _data$profile2.major) || '',\n                  class_name: ((_data$profile3 = data.profile) === null || _data$profile3 === void 0 ? void 0 : _data$profile3.class_name) || '',\n                  grade: ((_data$profile4 = data.profile) === null || _data$profile4 === void 0 ? void 0 : _data$profile4.grade) || '',\n                  role: '学生'\n                };\n                // 保存原始数据\n                _this3.originalUserInfo = JSON.parse(JSON.stringify(_this3.userInfo));\n              } else {\n                alert(result.msg || '加载用户信息失败');\n              }\n              _context3.n = 5;\n              break;\n            case 4:\n              _context3.p = 4;\n              _t3 = _context3.v;\n              console.error('加载用户信息失败:', _t3);\n              if (_t3.message && _t3.message.includes('未登录')) {\n                alert('登录已过期，请重新登录');\n                _this3.$router.push('/login');\n              } else {\n                alert(_t3.message || '加载用户信息失败，请刷新页面重试');\n              }\n            case 5:\n              _context3.p = 5;\n              _this3.loading = false;\n              return _context3.f(5);\n            case 6:\n              return _context3.a(2);\n          }\n        }, _callee3, null, [[1, 4, 5, 6]]);\n      }))();\n    },\n    markAllAsRead: function markAllAsRead() {\n      this.notifications.forEach(function (notification) {\n        notification.unread = false;\n      });\n      alert('所有通知已标记为已读');\n    },\n    changeViewMode: function changeViewMode(mode) {\n      this.viewMode = mode;\n    },\n    removeFavorite: function removeFavorite(id) {\n      if (confirm('确定要删除此收藏项吗？')) {\n        this.favorites = this.favorites.filter(function (favorite) {\n          return favorite.id !== id;\n        });\n      }\n    },\n    filterActivities: function filterActivities() {\n      // 根据时间范围过滤活动\n      // 实际项目中需要实现具体的过滤逻辑\n      console.log('过滤活动，时间范围:', this.selectedTimeRange);\n    },\n    updateSetting: function updateSetting(setting) {\n      console.log('更新设置:', setting);\n      // 实际项目中这里会发送API请求保存设置\n    },\n    changeTheme: function changeTheme(color) {\n      this.selectedTheme = color;\n      // 实际项目中这里会应用主题颜色\n      alert(\"\\u4E3B\\u9898\\u989C\\u8272\\u5DF2\\u5207\\u6362\\u4E3A: \".concat(color));\n    },\n    changeFontSize: function changeFontSize() {\n      // 实际项目中这里会更改字体大小\n      alert(\"\\u5B57\\u4F53\\u5927\\u5C0F\\u5DF2\\u66F4\\u6539\\u4E3A: \".concat(this.selectedFontSize));\n    },\n    triggerAvatarUpload: function triggerAvatarUpload() {\n      var _this4 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5() {\n        var input;\n        return _regenerator().w(function (_context5) {\n          while (1) switch (_context5.n) {\n            case 0:\n              input = document.createElement('input');\n              input.type = 'file';\n              input.accept = 'image/*';\n              input.onchange = /*#__PURE__*/function () {\n                var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4(e) {\n                  var file, result, avatarImg, _t4;\n                  return _regenerator().w(function (_context4) {\n                    while (1) switch (_context4.p = _context4.n) {\n                      case 0:\n                        file = e.target.files[0];\n                        if (!file) {\n                          _context4.n = 6;\n                          break;\n                        }\n                        if (!(file.size > 5 * 1024 * 1024)) {\n                          _context4.n = 1;\n                          break;\n                        }\n                        alert('图片大小不能超过5MB');\n                        return _context4.a(2);\n                      case 1:\n                        _this4.loading = true;\n                        _context4.p = 2;\n                        _context4.n = 3;\n                        return uploadFile(file);\n                      case 3:\n                        result = _context4.v;\n                        if (result.code === 1 && result.data) {\n                          _this4.userInfo.avatar_url = result.data;\n                          // 更新头像显示\n                          avatarImg = document.querySelector('.avatar');\n                          if (avatarImg) {\n                            avatarImg.src = result.data;\n                          }\n                          alert('头像上传成功！');\n                        } else {\n                          alert(result.msg || '头像上传失败');\n                        }\n                        _context4.n = 5;\n                        break;\n                      case 4:\n                        _context4.p = 4;\n                        _t4 = _context4.v;\n                        console.error('上传头像失败:', _t4);\n                        alert(_t4.message || '上传头像失败，请稍后重试');\n                      case 5:\n                        _context4.p = 5;\n                        _this4.loading = false;\n                        return _context4.f(5);\n                      case 6:\n                        return _context4.a(2);\n                    }\n                  }, _callee4, null, [[2, 4, 5, 6]]);\n                }));\n                return function (_x) {\n                  return _ref.apply(this, arguments);\n                };\n              }();\n              input.click();\n            case 1:\n              return _context5.a(2);\n          }\n        }, _callee5);\n      }))();\n    }\n  },\n  mounted: function mounted() {\n    var _this5 = this;\n    return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee6() {\n      return _regenerator().w(function (_context6) {\n        while (1) switch (_context6.n) {\n          case 0:\n            _context6.n = 1;\n            return _this5.loadUserInfo();\n          case 1:\n            return _context6.a(2);\n        }\n      }, _callee6);\n    }))();\n  }\n};","map":{"version":3,"names":["getProfile","updateProfile","updatePassword","uploadFile","name","data","activeSection","isEditing","loading","passwordDialog","visible","oldPassword","newPassword","confirmPassword","originalUserInfo","userInfo","full_name","username","student_id_number","email","phone_number","avatar_url","major","class_name","grade","role","navItems","id","text","icon","notifications","title","content","time","unread","notificationSettings","description","enabled","privacySettings","themeColors","computed","maskedPhone","replace","maskedEmail","filteredActivities","activities","methods","switchSection","sectionId","enableEdit","cancelEdit","JSON","parse","stringify","saveBasicInfo","_this","_asyncToGenerator","_regenerator","m","_callee","token","basicInfo","profileInfo","result","_t","w","_context","p","n","a","localStorage","getItem","alert","$router","push","v","code","loadUserInfo","msg","console","error","message","includes","f","modifyPassword","savePassword","_this2","_callee2","_t2","_context2","length","_this3","_callee3","_data$profile","_data$profile2","_data$profile3","_data$profile4","_t3","_context3","profile","markAllAsRead","forEach","notification","changeViewMode","mode","viewMode","removeFavorite","confirm","favorites","filter","favorite","filterActivities","log","selectedTimeRange","updateSetting","setting","changeTheme","color","selectedTheme","concat","changeFontSize","selectedFontSize","triggerAvatarUpload","_this4","_callee5","input","_context5","document","createElement","type","accept","onchange","_ref","_callee4","e","file","avatarImg","_t4","_context4","target","files","size","querySelector","src","_x","apply","arguments","click","mounted","_this5","_callee6","_context6"],"sources":["D:\\vvvvvvvvvscode_workspace\\fronted\\883Fronted_Final\\src\\views\\Student\\stuProfile.vue"],"sourcesContent":["<template>\r\n  <div class=\"profile-container\">\r\n    <div class=\"profile-sidebar\">\r\n      <div class=\"user-card\">\r\n          <div class=\"avatar-container\">\r\n          <img \r\n            loading=\"lazy\" \r\n            :src=\"userInfo.avatar_url || 'https://placeholder.pics/svg/150x150/DEDEDE/555555/用户头像'\" \r\n            alt=\"用户头像\" \r\n            class=\"avatar\"\r\n          >\r\n          <button class=\"avatar-upload\" @click=\"triggerAvatarUpload\">\r\n            <i class=\"bi bi-camera-fill\"></i>\r\n          </button>\r\n        </div>\r\n        <h3 class=\"username\">{{ userInfo.full_name || '加载中...' }}</h3>\r\n        <p class=\"user-role\">{{ userInfo.role }}</p>\r\n      </div>\r\n      \r\n      <nav class=\"profile-nav\">\r\n        <ul>\r\n          <li \r\n            v-for=\"nav in navItems\" \r\n            :key=\"nav.id\"\r\n            :class=\"{ active: activeSection === nav.id }\"\r\n          >\r\n            <a href=\"#\" @click.prevent=\"switchSection(nav.id)\">\r\n              <i :class=\"nav.icon\"></i> {{ nav.text }}\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    </div>\r\n    \r\n    <div class=\"profile-content\">\r\n      <!-- 基本信息 -->\r\n      <section id=\"basic-info\" class=\"content-section\" :class=\"{ active: activeSection === 'basic-info' }\">\r\n        <div class=\"section-header\">\r\n          <h2>基本信息</h2>\r\n          <button class=\"edit-btn\" @click=\"enableEdit\">\r\n            <i class=\"bi bi-pencil-fill\"></i> 编辑\r\n          </button>\r\n        </div>\r\n        \r\n        <form class=\"info-form\" @submit.prevent=\"saveBasicInfo\">\r\n          <div class=\"form-group\">\r\n            <label for=\"name\">姓名</label>\r\n            <input \r\n              type=\"text\" \r\n              id=\"name\" \r\n              v-model=\"userInfo.full_name\" \r\n              :readonly=\"!isEditing\"\r\n            >\r\n          </div>\r\n          \r\n          <div class=\"form-group\">\r\n            <label for=\"student-id\">学号</label>\r\n            <input \r\n              type=\"text\" \r\n              id=\"student-id\" \r\n              v-model=\"userInfo.student_id_number\" \r\n              readonly\r\n            >\r\n          </div>\r\n          \r\n          <div class=\"form-group\">\r\n            <label for=\"major\">专业</label>\r\n            <input \r\n              type=\"text\" \r\n              id=\"major\" \r\n              v-model=\"userInfo.major\" \r\n              :readonly=\"!isEditing\"\r\n            >\r\n          </div>\r\n          \r\n          <div class=\"form-group\">\r\n            <label for=\"class-name\">班级</label>\r\n            <input \r\n              type=\"text\" \r\n              id=\"class-name\" \r\n              v-model=\"userInfo.class_name\" \r\n              :readonly=\"!isEditing\"\r\n            >\r\n          </div>\r\n          \r\n          <div class=\"form-group\">\r\n            <label for=\"grade\">年级</label>\r\n            <input \r\n              type=\"text\" \r\n              id=\"grade\" \r\n              v-model=\"userInfo.grade\" \r\n              :readonly=\"!isEditing\"\r\n            >\r\n          </div>\r\n          \r\n          <div class=\"form-group\">\r\n            <label for=\"email\">电子邮箱</label>\r\n            <input \r\n              type=\"email\" \r\n              id=\"email\" \r\n              v-model=\"userInfo.email\" \r\n              :readonly=\"!isEditing\"\r\n            >\r\n          </div>\r\n          \r\n          <div class=\"form-group\">\r\n            <label for=\"phone\">手机号码</label>\r\n            <input \r\n              type=\"tel\" \r\n              id=\"phone\" \r\n              v-model=\"userInfo.phone_number\" \r\n              :readonly=\"!isEditing\"\r\n            >\r\n          </div>\r\n          \r\n          <div class=\"form-actions\" v-if=\"isEditing\">\r\n            <button type=\"button\" class=\"cancel-btn\" @click=\"cancelEdit\">取消</button>\r\n            <button type=\"submit\" class=\"save-btn\">保存</button>\r\n          </div>\r\n        </form>\r\n      </section>\r\n      \r\n      <!-- 账号安全 -->\r\n      <section id=\"account-security\" class=\"content-section\" :class=\"{ active: activeSection === 'account-security' }\">\r\n        <div class=\"section-header\">\r\n          <h2>账号安全</h2>\r\n        </div>\r\n        \r\n        <div class=\"security-item\">\r\n          <div class=\"security-info\">\r\n            <i class=\"bi bi-shield-lock-fill\"></i>\r\n            <div>\r\n              <h3>登录密码</h3>\r\n              <p>定期更改密码以确保账号安全</p>\r\n            </div>\r\n          </div>\r\n          <button class=\"modify-btn\" @click=\"modifyPassword\">修改密码</button>\r\n        </div>\r\n        \r\n        <div class=\"security-item\">\r\n          <div class=\"security-info\">\r\n            <i class=\"bi bi-phone-fill\"></i>\r\n            <div>\r\n              <h3>手机绑定</h3>\r\n              <p>已绑定手机：{{ maskedPhone }}</p>\r\n            </div>\r\n          </div>\r\n          <button class=\"modify-btn\" @click=\"enableEdit\">编辑信息</button>\r\n        </div>\r\n        \r\n        <div class=\"security-item\">\r\n          <div class=\"security-info\">\r\n            <i class=\"bi bi-envelope-fill\"></i>\r\n            <div>\r\n              <h3>邮箱绑定</h3>\r\n              <p>已绑定邮箱：{{ maskedEmail }}</p>\r\n            </div>\r\n          </div>\r\n          <button class=\"modify-btn\" @click=\"enableEdit\">编辑信息</button>\r\n        </div>\r\n        \r\n        <!-- 修改密码对话框 -->\r\n        <div v-if=\"passwordDialog.visible\" class=\"password-dialog-overlay\" @click.self=\"passwordDialog.visible = false\">\r\n          <div class=\"password-dialog\">\r\n            <h3>修改密码</h3>\r\n            <div class=\"form-group\">\r\n              <label>旧密码</label>\r\n              <input type=\"password\" v-model=\"passwordDialog.oldPassword\" placeholder=\"请输入旧密码\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label>新密码</label>\r\n              <input type=\"password\" v-model=\"passwordDialog.newPassword\" placeholder=\"请输入新密码（至少6位）\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label>确认新密码</label>\r\n              <input type=\"password\" v-model=\"passwordDialog.confirmPassword\" placeholder=\"请再次输入新密码\">\r\n            </div>\r\n            <div class=\"dialog-actions\">\r\n              <button class=\"cancel-btn\" @click=\"passwordDialog.visible = false\">取消</button>\r\n              <button class=\"save-btn\" @click=\"savePassword\" :disabled=\"loading\">保存</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"security-tips\">\r\n          <i class=\"bi bi-info-circle-fill\"></i>\r\n          <p>为保障您的账号安全，建议定期修改密码并绑定手机和邮箱</p>\r\n        </div>\r\n      </section>\r\n      \r\n      <!-- 消息通知 -->\r\n      <section id=\"notifications\" class=\"content-section\" :class=\"{ active: activeSection === 'notifications' }\">\r\n        <div class=\"section-header\">\r\n          <h2>消息通知</h2>\r\n          <button class=\"mark-all-read\" @click=\"markAllAsRead\">全部标记为已读</button>\r\n        </div>\r\n        \r\n        <div class=\"notification-list\">\r\n          <div \r\n            v-for=\"notification in notifications\" \r\n            :key=\"notification.id\"\r\n            class=\"notification-item\" \r\n            :class=\"{ unread: notification.unread }\"\r\n          >\r\n            <div class=\"notification-icon\">\r\n              <i :class=\"notification.icon\"></i>\r\n            </div>\r\n            <div class=\"notification-content\">\r\n              <h3>{{ notification.title }}</h3>\r\n              <p>{{ notification.content }}</p>\r\n              <span class=\"notification-time\">{{ notification.time }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n      \r\n      <!-- 系统设置 -->\r\n      <section id=\"settings\" class=\"content-section\" :class=\"{ active: activeSection === 'settings' }\">\r\n        \r\n        <div class=\"settings-group\">\r\n          <h3>通知设置</h3>\r\n          <div \r\n            v-for=\"setting in notificationSettings\" \r\n            :key=\"setting.id\"\r\n            class=\"setting-item\"\r\n          >\r\n            <div class=\"setting-info\">\r\n              <h4>{{ setting.name }}</h4>\r\n              <p>{{ setting.description }}</p>\r\n            </div>\r\n            <label class=\"switch\">\r\n              <input \r\n                type=\"checkbox\" \r\n                v-model=\"setting.enabled\"\r\n                @change=\"updateSetting(setting)\"\r\n              >\r\n              <span class=\"slider\"></span>\r\n            </label>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"settings-group\">\r\n          <h3>隐私设置</h3>\r\n          <div \r\n            v-for=\"setting in privacySettings\" \r\n            :key=\"setting.id\"\r\n            class=\"setting-item\"\r\n          >\r\n            <div class=\"setting-info\">\r\n              <h4>{{ setting.name }}</h4>\r\n              <p>{{ setting.description }}</p>\r\n            </div>\r\n            <label class=\"switch\">\r\n              <input \r\n                type=\"checkbox\" \r\n                v-model=\"setting.enabled\"\r\n                @change=\"updateSetting(setting)\"\r\n              >\r\n              <span class=\"slider\"></span>\r\n            </label>\r\n          </div>\r\n        </div>\r\n        \r\n      </section>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getProfile, updateProfile, updatePassword, uploadFile } from '@/api/user'\r\n\r\nexport default {\r\n  name: 'UserProfile',\r\n  data() {\r\n    return {\r\n      activeSection: 'basic-info',\r\n      isEditing: false,\r\n      loading: false,\r\n      passwordDialog: {\r\n        visible: false,\r\n        oldPassword: '',\r\n        newPassword: '',\r\n        confirmPassword: ''\r\n      },\r\n      originalUserInfo: null, // 保存原始数据用于取消编辑\r\n      userInfo: {\r\n        full_name: '',\r\n        username: '',\r\n        student_id_number: '',\r\n        email: '',\r\n        phone_number: '',\r\n        avatar_url: '',\r\n        major: '',\r\n        class_name: '',\r\n        grade: '',\r\n        role: '学生'\r\n      },\r\n      navItems: [\r\n        { id: 'basic-info', text: '基本信息', icon: 'bi bi-person-fill' },\r\n        { id: 'account-security', text: '账号安全', icon: 'bi bi-shield-lock-fill' },\r\n        { id: 'notifications', text: '消息通知', icon: 'bi bi-bell-fill' },\r\n        { id: 'settings', text: '系统设置', icon: 'bi bi-gear-fill' }\r\n      ],\r\n      notifications: [\r\n        {\r\n          id: 1,\r\n          title: '系统公告：新学期选课通知',\r\n          content: '新学期选课系统将于2023年9月1日开放，请同学们提前做好准备...',\r\n          time: '2023-08-25 10:30',\r\n          icon: 'bi bi-megaphone-fill',\r\n          unread: true\r\n        },\r\n        {\r\n          id: 2,\r\n          title: '课程提醒：计算机组成原理',\r\n          content: '您的计算机组成原理课程将于明天上午8:00在教三楼301教室上课...',\r\n          time: '2023-08-24 15:45',\r\n          icon: 'bi bi-calendar-event-fill',\r\n          unread: false\r\n        },\r\n        {\r\n          id: 3,\r\n          title: '作业提醒：数据结构作业',\r\n          content: '数据结构课程的第二次作业已发布，截止日期为2023年9月5日...',\r\n          time: '2023-08-23 09:20',\r\n          icon: 'bi bi-book-fill',\r\n          unread: false\r\n        }\r\n      ],\r\n      \r\n      notificationSettings: [\r\n        {\r\n          id: 1,\r\n          name: '课程提醒',\r\n          description: '课程开始前提醒我',\r\n          enabled: true\r\n        },\r\n        {\r\n          id: 2,\r\n          name: '作业截止提醒',\r\n          description: '作业截止前提醒我',\r\n          enabled: true\r\n        },\r\n        {\r\n          id: 3,\r\n          name: '系统公告',\r\n          description: '接收系统公告和通知',\r\n          enabled: true\r\n        }\r\n      ],\r\n      privacySettings: [\r\n        {\r\n          id: 1,\r\n          name: '公开个人信息',\r\n          description: '允许其他同学查看我的基本信息',\r\n          enabled: false\r\n        },\r\n      ],\r\n      themeColors: ['blue', 'green', 'purple']\r\n    }\r\n  },\r\n  computed: {\r\n    maskedPhone() {\r\n      return this.userInfo.phone_number ? this.userInfo.phone_number.replace(/(\\d{3})\\d{4}(\\d{4})/, '$1****$2') : '未绑定'\r\n    },\r\n    maskedEmail() {\r\n      return this.userInfo.email ? this.userInfo.email.replace(/(.{2}).*@(.*)/, '$1****@$2') : '未绑定'\r\n    },\r\n    filteredActivities() {\r\n      // 根据选择的时间范围过滤活动\r\n      // 这里简化处理，实际项目中需要根据日期计算\r\n      return this.activities\r\n    }\r\n  },\r\n  methods: {\r\n    switchSection(sectionId) {\r\n      this.activeSection = sectionId\r\n    },\r\n    enableEdit() {\r\n      this.isEditing = true\r\n    },\r\n    cancelEdit() {\r\n      this.isEditing = false\r\n      // 恢复原始数据\r\n      if (this.originalUserInfo) {\r\n        this.userInfo = JSON.parse(JSON.stringify(this.originalUserInfo))\r\n      }\r\n    },\r\n    async saveBasicInfo() {\r\n      if (this.loading) return\r\n      \r\n      // 检查token是否存在\r\n      const token = localStorage.getItem('token')\r\n      if (!token) {\r\n        alert('未登录，请先登录')\r\n        this.$router.push('/login')\r\n        return\r\n      }\r\n      \r\n      this.loading = true\r\n      try {\r\n        const basicInfo = {\r\n          email: this.userInfo.email || null,\r\n          phone_number: this.userInfo.phone_number || null\r\n        }\r\n        \r\n        const profileInfo = {\r\n          major: this.userInfo.major || null,\r\n          class_name: this.userInfo.class_name || null,\r\n          grade: this.userInfo.grade || null\r\n        }\r\n        \r\n        const result = await updateProfile({\r\n          basicInfo,\r\n          profileInfo\r\n        })\r\n        \r\n        if (result.code === 1) {\r\n          alert('个人信息已保存成功！')\r\n          this.isEditing = false\r\n          // 重新加载用户信息\r\n          await this.loadUserInfo()\r\n        } else {\r\n          alert(result.msg || '保存失败，请重试')\r\n        }\r\n      } catch (error) {\r\n        console.error('保存失败:', error)\r\n        if (error.message && error.message.includes('未登录')) {\r\n          alert('登录已过期，请重新登录')\r\n          this.$router.push('/login')\r\n        } else {\r\n          alert(error.message || '保存失败，请稍后重试')\r\n        }\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    modifyPassword() {\r\n      this.passwordDialog.visible = true\r\n      this.passwordDialog.oldPassword = ''\r\n      this.passwordDialog.newPassword = ''\r\n      this.passwordDialog.confirmPassword = ''\r\n    },\r\n    async savePassword() {\r\n      if (!this.passwordDialog.oldPassword || !this.passwordDialog.newPassword) {\r\n        alert('请填写完整信息')\r\n        return\r\n      }\r\n      \r\n      if (this.passwordDialog.newPassword !== this.passwordDialog.confirmPassword) {\r\n        alert('两次输入的密码不一致')\r\n        return\r\n      }\r\n      \r\n      if (this.passwordDialog.newPassword.length < 6) {\r\n        alert('密码长度至少6位')\r\n        return\r\n      }\r\n      \r\n      this.loading = true\r\n      try {\r\n        const result = await updatePassword({\r\n          oldPassword: this.passwordDialog.oldPassword,\r\n          newPassword: this.passwordDialog.newPassword\r\n        })\r\n        \r\n        if (result.code === 1) {\r\n          alert('密码修改成功！')\r\n          this.passwordDialog.visible = false\r\n        } else {\r\n          alert(result.msg || '密码修改失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('修改密码失败:', error)\r\n        alert(error.message || '修改密码失败，请稍后重试')\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    async loadUserInfo() {\r\n      this.loading = true\r\n      try {\r\n        // 检查token是否存在\r\n        const token = localStorage.getItem('token')\r\n        if (!token) {\r\n          alert('未登录，请先登录')\r\n          this.$router.push('/login')\r\n          return\r\n        }\r\n        \r\n        const result = await getProfile()\r\n        if (result.code === 1 && result.data) {\r\n          const data = result.data\r\n          this.userInfo = {\r\n            full_name: data.full_name || '',\r\n            username: data.username || '',\r\n            student_id_number: data.profile?.student_id_number || '',\r\n            email: data.email || '',\r\n            phone_number: data.phone_number || '',\r\n            avatar_url: data.avatar_url || '',\r\n            major: data.profile?.major || '',\r\n            class_name: data.profile?.class_name || '',\r\n            grade: data.profile?.grade || '',\r\n            role: '学生'\r\n          }\r\n          // 保存原始数据\r\n          this.originalUserInfo = JSON.parse(JSON.stringify(this.userInfo))\r\n        } else {\r\n          alert(result.msg || '加载用户信息失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('加载用户信息失败:', error)\r\n        if (error.message && error.message.includes('未登录')) {\r\n          alert('登录已过期，请重新登录')\r\n          this.$router.push('/login')\r\n        } else {\r\n          alert(error.message || '加载用户信息失败，请刷新页面重试')\r\n        }\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    markAllAsRead() {\r\n      this.notifications.forEach(notification => {\r\n        notification.unread = false\r\n      })\r\n      alert('所有通知已标记为已读')\r\n    },\r\n    changeViewMode(mode) {\r\n      this.viewMode = mode\r\n    },\r\n    removeFavorite(id) {\r\n      if (confirm('确定要删除此收藏项吗？')) {\r\n        this.favorites = this.favorites.filter(favorite => favorite.id !== id)\r\n      }\r\n    },\r\n    filterActivities() {\r\n      // 根据时间范围过滤活动\r\n      // 实际项目中需要实现具体的过滤逻辑\r\n      console.log('过滤活动，时间范围:', this.selectedTimeRange)\r\n    },\r\n    updateSetting(setting) {\r\n      console.log('更新设置:', setting)\r\n      // 实际项目中这里会发送API请求保存设置\r\n    },\r\n    changeTheme(color) {\r\n      this.selectedTheme = color\r\n      // 实际项目中这里会应用主题颜色\r\n      alert(`主题颜色已切换为: ${color}`)\r\n    },\r\n    changeFontSize() {\r\n      // 实际项目中这里会更改字体大小\r\n      alert(`字体大小已更改为: ${this.selectedFontSize}`)\r\n    },\r\n    async triggerAvatarUpload() {\r\n      const input = document.createElement('input')\r\n      input.type = 'file'\r\n      input.accept = 'image/*'\r\n      input.onchange = async (e) => {\r\n        const file = e.target.files[0]\r\n        if (file) {\r\n          // 检查文件大小（限制5MB）\r\n          if (file.size > 5 * 1024 * 1024) {\r\n            alert('图片大小不能超过5MB')\r\n            return\r\n          }\r\n          \r\n          this.loading = true\r\n          try {\r\n            const result = await uploadFile(file)\r\n            if (result.code === 1 && result.data) {\r\n              this.userInfo.avatar_url = result.data\r\n              // 更新头像显示\r\n              const avatarImg = document.querySelector('.avatar')\r\n              if (avatarImg) {\r\n                avatarImg.src = result.data\r\n              }\r\n              alert('头像上传成功！')\r\n            } else {\r\n              alert(result.msg || '头像上传失败')\r\n            }\r\n          } catch (error) {\r\n            console.error('上传头像失败:', error)\r\n            alert(error.message || '上传头像失败，请稍后重试')\r\n          } finally {\r\n            this.loading = false\r\n          }\r\n        }\r\n      }\r\n      input.click()\r\n    }\r\n  },\r\n  async mounted() {\r\n    await this.loadUserInfo()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n@import '@/assets/css/profile.css';\r\n\r\n/* 密码对话框样式 */\r\n.password-dialog-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.password-dialog {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 30px;\r\n  width: 90%;\r\n  max-width: 500px;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.password-dialog h3 {\r\n  margin-bottom: 20px;\r\n  color: #333;\r\n  font-size: 20px;\r\n}\r\n\r\n.password-dialog .form-group {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.password-dialog .form-group label {\r\n  display: block;\r\n  margin-bottom: 8px;\r\n  color: #666;\r\n  font-weight: 500;\r\n}\r\n\r\n.password-dialog .form-group input {\r\n  width: 100%;\r\n  padding: 10px 15px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 6px;\r\n  font-size: 14px;\r\n}\r\n\r\n.password-dialog .form-group input:focus {\r\n  outline: none;\r\n  border-color: #2A5CAA;\r\n  box-shadow: 0 0 0 3px rgba(42, 92, 170, 0.1);\r\n}\r\n\r\n.password-dialog .dialog-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.password-dialog .cancel-btn,\r\n.password-dialog .save-btn {\r\n  padding: 10px 20px;\r\n  border-radius: 6px;\r\n  font-size: 14px;\r\n  cursor: pointer;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.password-dialog .cancel-btn {\r\n  background: #f5f5f5;\r\n  color: #666;\r\n}\r\n\r\n.password-dialog .cancel-btn:hover {\r\n  background: #e0e0e0;\r\n}\r\n\r\n.password-dialog .save-btn {\r\n  background: #2A5CAA;\r\n  color: white;\r\n}\r\n\r\n.password-dialog .save-btn:hover {\r\n  background: #1e4b8b;\r\n}\r\n\r\n.password-dialog .save-btn:disabled {\r\n  background: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}