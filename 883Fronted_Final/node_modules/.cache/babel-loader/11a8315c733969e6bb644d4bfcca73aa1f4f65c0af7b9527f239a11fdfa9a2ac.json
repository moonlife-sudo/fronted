{"ast":null,"code":"// router/index.js\nimport { createRouter, createWebHistory } from 'vue-router';\nconst routes = [{\n  path: '/',\n  name: 'Home',\n  redirect: '/resource-home'\n},\n// 公共路由 - 根据用户角色重定向到对应的首页\n{\n  path: '/resource-home',\n  name: 'ResourceHome',\n  component: () => import('../views/ResourceHome.vue'),\n  meta: {\n    showSidebar: false\n  }\n},\n// 学生路由\n{\n  path: '/student',\n  meta: {\n    role: 'student'\n  },\n  children: [{\n    path: 'home',\n    name: 'StudentHome',\n    component: () => import('../views/Student/StuResourceHome.vue'),\n    meta: {\n      showSidebar: false\n    }\n  }, {\n    path: 'library',\n    name: 'StudentLibrary',\n    component: () => import('../views/Student/Resource/StudentLibrary.vue'),\n    meta: {\n      showSidebar: true\n    }\n  }, {\n    path: 'classroom',\n    name: 'StudentClassroom',\n    component: () => import('../views/Student/Resource/TeaStuClassroom.vue'),\n    meta: {\n      showSidebar: true\n    }\n  }, {\n    path: 'profile',\n    name: 'StudentProfile',\n    component: () => import('../views/Student/stuProfile.vue'),\n    meta: {\n      showSidebar: false\n    }\n  }\n  /*\n  {\n    path: 'dorm',\n    name: 'StudentDorm',\n    component: () => import('../views/Student/Campus/StudentDorm.vue'),\n    meta: { showSidebar: true }\n  }*/]\n},\n// 教师路由\n{\n  path: '/teacher',\n  meta: {\n    role: 'teacher'\n  },\n  children: [{\n    path: 'home',\n    name: 'TeacherHome',\n    component: () => import('../views/Teacher/TeaResourceHome.vue'),\n    meta: {\n      showSidebar: false\n    }\n  }, {\n    path: 'library',\n    name: 'TeacherLibrary',\n    component: () => import('../views/Teacher/Resource/TeacherLibrary.vue'),\n    meta: {\n      showSidebar: true\n    }\n  }, {\n    path: 'classroom',\n    name: 'TeacherClassroom',\n    component: () => import('../views/Teacher/Resource/TeaStuClassroom.vue'),\n    meta: {\n      showSidebar: true\n    }\n  }, {\n    path: 'profile',\n    name: 'TeacherProfile',\n    component: () => import('../views/Teacher/TeacherProfile.vue'),\n    meta: {\n      showSidebar: false\n    }\n  }]\n},\n// 管理员路由\n{\n  path: '/admin',\n  meta: {\n    role: 'admin'\n  },\n  children: [{\n    path: 'home',\n    name: 'AdminHome',\n    component: () => import('../views/Admin/AdminResourceHome.vue'),\n    meta: {\n      showSidebar: false\n    }\n  }, {\n    path: 'dorm',\n    name: 'AdminDorm',\n    component: () => import('../views/Admin/Campus/AdminDorm.vue'),\n    meta: {\n      showSidebar: true\n    }\n  }, {\n    path: 'approve',\n    name: 'AdminApprove',\n    component: () => import('../views/Admin/Resource/AdminApprove.vue'),\n    meta: {\n      showSidebar: true\n    }\n  }, {\n    path: 'classroom',\n    name: 'AdminClassroom',\n    component: () => import('../views/Admin/Resource/AdminClassroom.vue'),\n    meta: {\n      showSidebar: true\n    }\n  }, {\n    path: 'library',\n    name: 'AdminLibrary',\n    component: () => import('../views/Admin/Resource/AdminLibrary.vue'),\n    meta: {\n      showSidebar: true\n    }\n  }, {\n    path: 'profile',\n    name: 'AdminProfile',\n    component: () => import('../views/Admin/AdminProfile.vue'),\n    meta: {\n      showSidebar: false\n    }\n  }]\n}\n\n// 兼容旧路由（重定向到新路由）\n/*\n{\n  path: '/student-library',\n  redirect: '/student/library'\n},\n{\n  path: '/tea-stu-classroom',\n  redirect: '/student/classroom'\n},\n{\n  path: '/stu-profile',\n  redirect: '/student/profile'\n},\n\n// 404 页面\n{\n  path: '/:pathMatch(.*)*',\n  name: 'NotFound',\n  component: () => import('../views/NotFound.vue')\n}\n*/];\nconst router = createRouter({\n  history: createWebHistory(),\n  routes\n});\n\n// 路由守卫\nrouter.beforeEach((to, from, next) => {\n  // 获取用户角色（从Vuex或localStorage）\n  const userRole = localStorage.getItem('userRole') || 'student';\n\n  // 检查路由权限\n  if (to.meta.role && to.meta.role !== userRole) {\n    // 无权限访问，重定向到首页或权限错误页面\n    next('/resource-home');\n    return;\n  }\n  next();\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","routes","path","name","redirect","component","meta","showSidebar","role","children","router","history","beforeEach","to","from","next","userRole","localStorage","getItem"],"sources":["/Users/zhouzhou/Desktop/883Fronted/Resource-Campus/src/router/index.js"],"sourcesContent":["// router/index.js\nimport { createRouter, createWebHistory } from 'vue-router'\n\nconst routes = [\n  {\n    path: '/',\n    name: 'Home',\n    redirect: '/resource-home'  \n  },\n  \n  // 公共路由 - 根据用户角色重定向到对应的首页\n  {\n    path: '/resource-home',\n    name: 'ResourceHome',\n    component: () => import('../views/ResourceHome.vue'),\n    meta: { showSidebar: false }\n  },\n  \n  // 学生路由\n  {\n    path: '/student',\n    meta: { role: 'student' },\n    children: [\n      {\n        path: 'home',\n        name: 'StudentHome',\n        component: () => import('../views/Student/StuResourceHome.vue'),\n        meta: { showSidebar: false }\n      },\n      {\n        path: 'library',\n        name: 'StudentLibrary',\n        component: () => import('../views/Student/Resource/StudentLibrary.vue'),\n        meta: { showSidebar: true }\n      },\n      {\n        path: 'classroom',\n        name: 'StudentClassroom',\n        component: () => import('../views/Student/Resource/TeaStuClassroom.vue'),\n        meta: { showSidebar: true }\n      },\n      {\n        path: 'profile',\n        name: 'StudentProfile',\n        component: () => import('../views/Student/stuProfile.vue'),\n        meta: { showSidebar: false }\n      },\n      /*\n      {\n        path: 'dorm',\n        name: 'StudentDorm',\n        component: () => import('../views/Student/Campus/StudentDorm.vue'),\n        meta: { showSidebar: true }\n      }*/\n    ]\n  },\n  \n  // 教师路由\n  {\n    path: '/teacher',\n    meta: { role: 'teacher' },\n    children: [\n      {\n        path: 'home',\n        name: 'TeacherHome',\n        component: () => import('../views/Teacher/TeaResourceHome.vue'),\n        meta: { showSidebar: false }\n      },\n      {\n        path: 'library',\n        name: 'TeacherLibrary',\n        component: () => import('../views/Teacher/Resource/TeacherLibrary.vue'),\n        meta: { showSidebar: true }\n      },\n      {\n        path: 'classroom',\n        name: 'TeacherClassroom',\n        component: () => import('../views/Teacher/Resource/TeaStuClassroom.vue'),\n        meta: { showSidebar: true }\n      },\n      {\n        path: 'profile',\n        name: 'TeacherProfile',\n        component: () => import('../views/Teacher/TeacherProfile.vue'),\n        meta: { showSidebar: false }\n      }\n    ]\n  },\n  \n  // 管理员路由\n  {\n    path: '/admin',\n    meta: { role: 'admin' },\n    children: [\n      {\n        path: 'home',\n        name: 'AdminHome',\n        component: () => import('../views/Admin/AdminResourceHome.vue'),\n        meta: { showSidebar: false }\n      },\n      {\n        path: 'dorm',\n        name: 'AdminDorm',\n        component: () => import('../views/Admin/Campus/AdminDorm.vue'),\n        meta: { showSidebar: true }\n      },\n      {\n        path: 'approve',\n        name: 'AdminApprove',\n        component: () => import('../views/Admin/Resource/AdminApprove.vue'),\n        meta: { showSidebar: true }\n      },\n      {\n        path: 'classroom',\n        name: 'AdminClassroom',\n        component: () => import('../views/Admin/Resource/AdminClassroom.vue'),\n        meta: { showSidebar: true }\n      },\n      {\n        path: 'library',\n        name: 'AdminLibrary',\n        component: () => import('../views/Admin/Resource/AdminLibrary.vue'),\n        meta: { showSidebar: true }\n      },\n      {\n        path: 'profile',\n        name: 'AdminProfile',\n        component: () => import('../views/Admin/AdminProfile.vue'),\n        meta: { showSidebar: false }\n      }\n    ]\n  },\n  \n  // 兼容旧路由（重定向到新路由）\n  /*\n  {\n    path: '/student-library',\n    redirect: '/student/library'\n  },\n  {\n    path: '/tea-stu-classroom',\n    redirect: '/student/classroom'\n  },\n  {\n    path: '/stu-profile',\n    redirect: '/student/profile'\n  },\n  \n  // 404 页面\n  {\n    path: '/:pathMatch(.*)*',\n    name: 'NotFound',\n    component: () => import('../views/NotFound.vue')\n  }\n  */\n]\n\nconst router = createRouter({\n  history: createWebHistory(),\n  routes\n})\n\n// 路由守卫\nrouter.beforeEach((to, from, next) => {\n  // 获取用户角色（从Vuex或localStorage）\n  const userRole = localStorage.getItem('userRole') || 'student'\n  \n  // 检查路由权限\n  if (to.meta.role && to.meta.role !== userRole) {\n    // 无权限访问，重定向到首页或权限错误页面\n    next('/resource-home')\n    return\n  }\n  \n  next()\n})\n\nexport default router"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}