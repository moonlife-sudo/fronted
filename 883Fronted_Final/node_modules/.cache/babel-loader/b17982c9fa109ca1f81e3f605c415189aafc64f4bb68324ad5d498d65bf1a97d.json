{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport { createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"resources-page\"\n};\nvar _hoisted_2 = {\n  \"class\": \"page-header\"\n};\nvar _hoisted_3 = {\n  \"class\": \"header-actions\"\n};\nvar _hoisted_4 = {\n  \"class\": \"breadcrumb\"\n};\nvar _hoisted_5 = [\"onClick\"];\nvar _hoisted_6 = {\n  key: 0,\n  \"class\": \"loading\"\n};\nvar _hoisted_7 = {\n  key: 1,\n  \"class\": \"resource-list\"\n};\nvar _hoisted_8 = [\"onClick\"];\nvar _hoisted_9 = {\n  \"class\": \"info\"\n};\nvar _hoisted_10 = {\n  \"class\": \"name\"\n};\nvar _hoisted_11 = [\"onClick\"];\nvar _hoisted_12 = {\n  \"class\": \"info\"\n};\nvar _hoisted_13 = {\n  \"class\": \"name\"\n};\nvar _hoisted_14 = {\n  \"class\": \"meta\"\n};\nvar _hoisted_15 = {\n  key: 0,\n  \"class\": \"empty\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[2] || (_cache[2] = _createElementVNode(\"h2\", null, \"ËØæÁ®ãËµÑÊ∫ê\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"button\", {\n    \"class\": \"back-btn\",\n    onClick: _cache[0] || (_cache[0] = function () {\n      return $setup.goBackToCourses && $setup.goBackToCourses.apply($setup, arguments);\n    })\n  }, \"ËøîÂõûËØæÁ®ãÂàóË°®\")])]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"span\", {\n    \"class\": _normalizeClass([\"crumb-item\", {\n      active: $setup.currentFolderId === null\n    }]),\n    onClick: _cache[1] || (_cache[1] = function ($event) {\n      return $setup.navigateToFolder(null, 'Ê†πÁõÆÂΩï');\n    })\n  }, \" üìÅ Ê†πÁõÆÂΩï \", 2 /* CLASS */), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.breadcrumbStack, function (folder, index) {\n    return _openBlock(), _createElementBlock(\"span\", {\n      key: folder.id,\n      \"class\": \"crumb-separator\"\n    }, [_cache[3] || (_cache[3] = _createTextVNode(\" / \", -1 /* CACHED */)), _createElementVNode(\"span\", {\n      \"class\": _normalizeClass([\"crumb-item\", {\n        active: index === $setup.breadcrumbStack.length - 1\n      }]),\n      onClick: function onClick($event) {\n        return $setup.navigateToFolder(folder.id, folder.name, index);\n      }\n    }, _toDisplayString(folder.name), 11 /* TEXT, CLASS, PROPS */, _hoisted_5)]);\n  }), 128 /* KEYED_FRAGMENT */))]), $setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, \"Âä†ËΩΩËµÑÊ∫ê‰∏≠...\")) : (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.folders, function (folder) {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: folder.folder_id,\n      \"class\": \"resource-item folder\",\n      onClick: function onClick($event) {\n        return $setup.enterFolder(folder);\n      }\n    }, [_cache[5] || (_cache[5] = _createElementVNode(\"span\", {\n      \"class\": \"icon\"\n    }, \"üìÇ\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, _toDisplayString(folder.folder_name), 1 /* TEXT */), _cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n      \"class\": \"meta\"\n    }, \"Êñá‰ª∂Â§π\", -1 /* CACHED */))]), _cache[6] || (_cache[6] = _createElementVNode(\"span\", {\n      \"class\": \"arrow\"\n    }, \"‚Ä∫\", -1 /* CACHED */))], 8 /* PROPS */, _hoisted_8);\n  }), 128 /* KEYED_FRAGMENT */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.files, function (file) {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: file.resource_id,\n      \"class\": \"resource-item file\",\n      onClick: function onClick($event) {\n        return $setup.downloadFile(file);\n      }\n    }, [_cache[7] || (_cache[7] = _createElementVNode(\"span\", {\n      \"class\": \"icon\"\n    }, \"üìÑ\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, _toDisplayString(file.file_name), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_14, _toDisplayString($setup.formatSize(file.file_size)) + \" | \" + _toDisplayString($setup.formatTime(file.upload_at)), 1 /* TEXT */)]), _cache[8] || (_cache[8] = _createElementVNode(\"span\", {\n      \"class\": \"download-icon\"\n    }, \"‚¨áÔ∏è\", -1 /* CACHED */))], 8 /* PROPS */, _hoisted_11);\n  }), 128 /* KEYED_FRAGMENT */)), $setup.folders.length === 0 && $setup.files.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, \" Ê≠§Êñá‰ª∂Â§π‰∏ãÊöÇÊó†ÂÜÖÂÆπ \")) : _createCommentVNode(\"v-if\", true)]))]);\n}","map":{"version":3,"names":["_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","onClick","_cache","$setup","goBackToCourses","apply","arguments","_hoisted_4","_normalizeClass","active","currentFolderId","$event","navigateToFolder","_Fragment","_renderList","breadcrumbStack","folder","index","key","id","length","name","_hoisted_5","loading","_hoisted_6","_hoisted_7","folders","folder_id","enterFolder","_hoisted_9","_hoisted_10","_toDisplayString","folder_name","files","file","resource_id","downloadFile","_hoisted_12","_hoisted_13","file_name","_hoisted_14","formatSize","file_size","formatTime","upload_at","_hoisted_15"],"sources":["D:\\vvvvvvvvvscode_workspace\\fronted\\883Fronted_Final\\src\\views\\Student\\Teaching\\course\\resources\\List.vue"],"sourcesContent":["<template>\r\n  <div class=\"resources-page\">\r\n    <div class=\"page-header\">\r\n      <h2>ËØæÁ®ãËµÑÊ∫ê</h2>\r\n      <div class=\"header-actions\">\r\n        <button class=\"back-btn\" @click=\"goBackToCourses\">ËøîÂõûËØæÁ®ãÂàóË°®</button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"breadcrumb\">\r\n      <span class=\"crumb-item\" :class=\"{ active: currentFolderId === null }\" @click=\"navigateToFolder(null, 'Ê†πÁõÆÂΩï')\">\r\n        üìÅ Ê†πÁõÆÂΩï\r\n      </span>\r\n      <span v-for=\"(folder, index) in breadcrumbStack\" :key=\"folder.id\" class=\"crumb-separator\">\r\n        /\r\n        <span class=\"crumb-item\" :class=\"{ active: index === breadcrumbStack.length - 1 }\"\r\n          @click=\"navigateToFolder(folder.id, folder.name, index)\">\r\n          {{ folder.name }}\r\n        </span>\r\n      </span>\r\n    </div>\r\n\r\n    <div v-if=\"loading\" class=\"loading\">Âä†ËΩΩËµÑÊ∫ê‰∏≠...</div>\r\n\r\n    <div v-else class=\"resource-list\">\r\n      <div v-for=\"folder in folders\" :key=\"folder.folder_id\" class=\"resource-item folder\" @click=\"enterFolder(folder)\">\r\n        <span class=\"icon\">üìÇ</span>\r\n        <div class=\"info\">\r\n          <div class=\"name\">{{ folder.folder_name }}</div>\r\n          <div class=\"meta\">Êñá‰ª∂Â§π</div>\r\n        </div>\r\n        <span class=\"arrow\">‚Ä∫</span>\r\n      </div>\r\n\r\n      <div v-for=\"file in files\" :key=\"file.resource_id\" class=\"resource-item file\" @click=\"downloadFile(file)\">\r\n        <span class=\"icon\">üìÑ</span>\r\n        <div class=\"info\">\r\n          <div class=\"name\">{{ file.file_name }}</div>\r\n          <div class=\"meta\">\r\n            {{ formatSize(file.file_size) }} | {{ formatTime(file.upload_at) }}\r\n          </div>\r\n        </div>\r\n        <span class=\"download-icon\">‚¨áÔ∏è</span>\r\n      </div>\r\n\r\n      <div v-if=\"folders.length === 0 && files.length === 0\" class=\"empty\">\r\n        Ê≠§Êñá‰ª∂Â§π‰∏ãÊöÇÊó†ÂÜÖÂÆπ\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, computed } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\n\r\nexport default {\r\n  name: 'StuClassResource',\r\n  setup() {\r\n    const route = useRoute()\r\n    const router = useRouter()\r\n    const classId = computed(() => route.query.classId || localStorage.getItem('currentClassId'))\r\n\r\n    // Áä∂ÊÄÅÁÆ°ÁêÜ\r\n    const currentFolderId = ref(null)\r\n    const breadcrumbStack = ref([])\r\n    const folders = ref([])\r\n    const files = ref([])\r\n    const loading = ref(false)\r\n\r\n    onMounted(() => {\r\n      if (classId.value) fetchResources()\r\n    })\r\n    const goBackToCourses = () => {\r\n      router.push({ path: '/student/teachinghome' })\r\n    }\r\n    // Ëé∑ÂèñËµÑÊ∫êÂàóË°® (Êé•Âè£ÊñáÊ°£ 5.1)\r\n    const fetchResources = async () => {\r\n      loading.value = true\r\n      try {\r\n        let url = `http://127.0.0.1:8081/classes/${classId.value}/resources`\r\n        if (currentFolderId.value) {\r\n          url += `?folder_id=${currentFolderId.value}`\r\n        }\r\n\r\n        const res = await fetch(url)\r\n        const result = await res.json()\r\n        if (result.code === 1) {\r\n          folders.value = result.data.folders || []\r\n          files.value = result.data.files || []\r\n        }\r\n      } catch (e) {\r\n        console.error(e)\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n\r\n    // ËøõÂÖ•Êñá‰ª∂Â§π\r\n    const enterFolder = (folder) => {\r\n      currentFolderId.value = folder.folder_id\r\n      breadcrumbStack.value.push({ id: folder.folder_id, name: folder.folder_name })\r\n      fetchResources()\r\n    }\r\n\r\n    // ÂØºËà™Ë∑≥ËΩ¨ÔºàÈù¢ÂåÖÂ±ëÁÇπÂáªÔºâ\r\n    const navigateToFolder = (folderId, name, index) => {\r\n      currentFolderId.value = folderId\r\n      if (folderId === null) {\r\n        breadcrumbStack.value = []\r\n      } else if (index !== undefined) {\r\n        breadcrumbStack.value = breadcrumbStack.value.slice(0, index + 1)\r\n      }\r\n      fetchResources()\r\n    }\r\n\r\n    // ‰∏ãËΩΩÊñá‰ª∂\r\n    const downloadFile = (file) => {\r\n      if (file.file_url) {\r\n        window.open(file.file_url, '_blank')\r\n      } else {\r\n        alert('Êñá‰ª∂ÈìæÊé•Êó†Êïà')\r\n      }\r\n    }\r\n\r\n    // Â∑•ÂÖ∑ÂáΩÊï∞\r\n    const formatSize = (bytes) => {\r\n      if (!bytes) return '0 B'\r\n      const k = 1024\r\n      const sizes = ['B', 'KB', 'MB', 'GB']\r\n      const i = Math.floor(Math.log(bytes) / Math.log(k))\r\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\r\n    }\r\n    \r\n    const formatTime = (t) => new Date(t).toLocaleDateString()\r\n\r\n    return {\r\n      router,\r\n      classId,\r\n      currentFolderId,\r\n      breadcrumbStack,\r\n      folders,\r\n      files,\r\n      loading,\r\n      goBackToCourses,\r\n      fetchResources,\r\n      enterFolder,\r\n      navigateToFolder,\r\n      downloadFile,\r\n      formatSize,\r\n      formatTime\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.resources-page {\r\n  padding: 24px;\r\n  max-inline-size: 900px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.page-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-block-end: 20px;\r\n}\r\n\r\n.back-btn {\r\n  padding: 8px 16px;\r\n  border: 1px solid #ddd;\r\n  background: white;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.breadcrumb {\r\n  background: #f5f7fa;\r\n  padding: 10px 15px;\r\n  border-radius: 6px;\r\n  margin-block-end: 20px;\r\n  color: #666;\r\n  font-size: 14px;\r\n}\r\n\r\n.crumb-item {\r\n  cursor: pointer;\r\n  color: #2A5CAA;\r\n}\r\n\r\n.crumb-item:hover {\r\n  text-decoration: underline;\r\n}\r\n\r\n.crumb-item.active {\r\n  color: #666;\r\n  cursor: default;\r\n  text-decoration: none;\r\n}\r\n\r\n.crumb-separator {\r\n  margin: 0 5px;\r\n  color: #ccc;\r\n}\r\n\r\n.resource-list {\r\n  background: white;\r\n  border: 1px solid #eee;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n}\r\n\r\n.resource-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 15px 20px;\r\n  border-block-end: 1px solid #f0f0f0;\r\n  cursor: pointer;\r\n  transition: background 0.2s;\r\n}\r\n\r\n.resource-item:hover {\r\n  background: #f9f9f9;\r\n}\r\n\r\n.resource-item:last-child {\r\n  border-block-end: none;\r\n}\r\n\r\n.icon {\r\n  font-size: 24px;\r\n  margin-inline-end: 15px;\r\n}\r\n\r\n.info {\r\n  flex: 1;\r\n}\r\n\r\n.name {\r\n  font-size: 15px;\r\n  color: #333;\r\n  margin-block-end: 4px;\r\n}\r\n\r\n.meta {\r\n  font-size: 12px;\r\n  color: #999;\r\n}\r\n\r\n.arrow,\r\n.download-icon {\r\n  color: #ccc;\r\n  font-size: 18px;\r\n}\r\n\r\n.download-icon:hover {\r\n  color: #2A5CAA;\r\n}\r\n\r\n.loading,\r\n.empty {\r\n  text-align: center;\r\n  padding: 40px;\r\n  color: #999;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}