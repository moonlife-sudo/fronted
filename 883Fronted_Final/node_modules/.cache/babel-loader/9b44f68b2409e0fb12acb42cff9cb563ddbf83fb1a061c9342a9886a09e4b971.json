{"ast":null,"code":"import _regenerator from \"D:/vvvvvvvvvscode_workspace/fronted/883Fronted_Final/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"D:/vvvvvvvvvscode_workspace/fronted/883Fronted_Final/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { ref, onMounted, computed } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nexport default {\n  name: 'StuHomework',\n  setup: function setup() {\n    var route = useRoute();\n    var router = useRouter();\n    // 优先从路由参数取，没有则从本地存储取\n    var classId = computed(function () {\n      return route.query.classId || localStorage.getItem('currentClassId');\n    });\n    var homeworkList = ref([]);\n    var loading = ref(false);\n    onMounted(function () {\n      if (classId.value) {\n        fetchHomeworkList();\n      }\n    });\n    var goBackToCourses = function goBackToCourses() {\n      router.push({\n        path: '/student/teachinghome'\n      });\n    };\n    // 获取作业列表\n    var fetchHomeworkList = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n        var res, result, _t;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.p = _context.n) {\n            case 0:\n              loading.value = true;\n              _context.p = 1;\n              _context.n = 2;\n              return fetch(\"http://127.0.0.1:8081/student/classes/\".concat(classId.value, \"/homeworks?page=1&pageSize=100\"));\n            case 2:\n              res = _context.v;\n              _context.n = 3;\n              return res.json();\n            case 3:\n              result = _context.v;\n              if (result.code === 1) {\n                homeworkList.value = result.data.rows || [];\n              }\n              _context.n = 5;\n              break;\n            case 4:\n              _context.p = 4;\n              _t = _context.v;\n              console.error('获取作业列表失败', _t);\n            case 5:\n              _context.p = 5;\n              loading.value = false;\n              return _context.f(5);\n            case 6:\n              return _context.a(2);\n          }\n        }, _callee, null, [[1, 4, 5, 6]]);\n      }));\n      return function fetchHomeworkList() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var goToDetail = function goToDetail(homeworkId) {\n      router.push({\n        path: '/student/teaching/homework/detail',\n        // 注意需要在路由中配置这个路径\n        query: {\n          homeworkId: homeworkId,\n          classId: classId.value\n        }\n      });\n    };\n    var formatTime = function formatTime(time) {\n      return time ? new Date(time).toLocaleString() : '无截止日期';\n    };\n\n    // 状态映射，根据接口文档逻辑调整\n    var getStatusText = function getStatusText(status) {\n      // 假设：0/null=未提交, 1=已提交/准时, 2=迟交\n      var map = {\n        0: '未提交',\n        1: '已提交',\n        2: '迟交',\n        3: '未提交'\n      };\n      return map[status] || '未提交';\n    };\n    var getStatusClass = function getStatusClass(status) {\n      if (status === 1) return 'success';\n      if (status === 2) return 'warning';\n      return 'pending';\n    };\n    return {\n      router: router,\n      classId: classId,\n      homeworkList: homeworkList,\n      loading: loading,\n      goBackToCourses: goBackToCourses,\n      fetchHomeworkList: fetchHomeworkList,\n      goToDetail: goToDetail,\n      formatTime: formatTime,\n      getStatusText: getStatusText,\n      getStatusClass: getStatusClass\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","useRoute","useRouter","name","setup","route","router","classId","query","localStorage","getItem","homeworkList","loading","value","fetchHomeworkList","goBackToCourses","push","path","_ref","_asyncToGenerator","_regenerator","m","_callee","res","result","_t","w","_context","p","n","fetch","concat","v","json","code","data","rows","console","error","f","a","apply","arguments","goToDetail","homeworkId","formatTime","time","Date","toLocaleString","getStatusText","status","map","getStatusClass"],"sources":["D:\\vvvvvvvvvscode_workspace\\fronted\\883Fronted_Final\\src\\views\\Student\\Teaching\\StuGrades.vue"],"sourcesContent":["<template>\r\n  <div class=\"homework-list-page\">\r\n    <div class=\"page-header\">\r\n      <h2>我的作业</h2>\r\n      <div class=\"header-actions\">\r\n        <button class=\"back-btn\" @click=\"goBackToCourses\">返回课程列表</button>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"loading\" class=\"loading\">加载中...</div>\r\n    <div v-else-if=\"homeworkList.length === 0\" class=\"empty\">暂无作业</div>\r\n\r\n    <div v-else class=\"homework-cards\">\r\n      <div v-for=\"item in homeworkList\" :key=\"item.homework_id\" class=\"homework-card\"\r\n        @click=\"goToDetail(item.homework_id)\">\r\n        <div class=\"card-left\">\r\n          <h3 class=\"title\">{{ item.title }}</h3>\r\n          <p class=\"deadline\">截止时间：{{ formatTime(item.due_date) }}</p>\r\n        </div>\r\n\r\n        <div class=\"card-right\">\r\n          <span class=\"status-badge\" :class=\"getStatusClass(item.my_submission_status)\">\r\n            {{ getStatusText(item.my_submission_status) }}\r\n          </span>\r\n          <span v-if=\"item.my_grade !== null\" class=\"grade\">\r\n            {{ item.my_grade }}分\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, computed } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\n\r\nexport default {\r\n  name: 'StuHomework',\r\n  setup() {\r\n    const route = useRoute()\r\n    const router = useRouter()\r\n    // 优先从路由参数取，没有则从本地存储取\r\n    const classId = computed(() => route.query.classId || localStorage.getItem('currentClassId'))\r\n\r\n    const homeworkList = ref([])\r\n    const loading = ref(false)\r\n\r\n    onMounted(() => {\r\n      if (classId.value) {\r\n        fetchHomeworkList()\r\n      }\r\n    })\r\n    const goBackToCourses = () => {\r\n      router.push({ path: '/student/teachinghome' })\r\n    }\r\n    // 获取作业列表\r\n    const fetchHomeworkList = async () => {\r\n      loading.value = true\r\n      try {\r\n        const res = await fetch(`http://127.0.0.1:8081/student/classes/${classId.value}/homeworks?page=1&pageSize=100`)\r\n        const result = await res.json()\r\n        if (result.code === 1) {\r\n          homeworkList.value = result.data.rows || []\r\n        }\r\n      } catch (error) {\r\n        console.error('获取作业列表失败', error)\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n\r\n    const goToDetail = (homeworkId) => {\r\n      router.push({\r\n        path: '/student/teaching/homework/detail', // 注意需要在路由中配置这个路径\r\n        query: { homeworkId, classId: classId.value }\r\n      })\r\n    }\r\n\r\n    const formatTime = (time) => {\r\n      return time ? new Date(time).toLocaleString() : '无截止日期'\r\n    }\r\n\r\n    // 状态映射，根据接口文档逻辑调整\r\n    const getStatusText = (status) => {\r\n      // 假设：0/null=未提交, 1=已提交/准时, 2=迟交\r\n      const map = { 0: '未提交', 1: '已提交', 2: '迟交', 3: '未提交' }\r\n      return map[status] || '未提交'\r\n    }\r\n\r\n    const getStatusClass = (status) => {\r\n      if (status === 1) return 'success'\r\n      if (status === 2) return 'warning'\r\n      return 'pending'\r\n    }\r\n\r\n    return {\r\n      router,\r\n      classId,\r\n      homeworkList,\r\n      loading,\r\n      goBackToCourses,\r\n      fetchHomeworkList,\r\n      goToDetail,\r\n      formatTime,\r\n      getStatusText,\r\n      getStatusClass\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.homework-list-page {\r\n  padding: 20px;\r\n}\r\n\r\n.page-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.homework-cards {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 15px;\r\n}\r\n\r\n.homework-card {\r\n  background: #fff;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.homework-card:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.title {\r\n  margin: 0 0 8px 0;\r\n  font-size: 16px;\r\n  color: #333;\r\n}\r\n\r\n.deadline {\r\n  margin: 0;\r\n  font-size: 13px;\r\n  color: #999;\r\n}\r\n\r\n.card-right {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n  gap: 8px;\r\n}\r\n\r\n.status-badge {\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  font-size: 12px;\r\n}\r\n\r\n.status-badge.pending {\r\n  background: #f5f5f5;\r\n  color: #999;\r\n}\r\n\r\n.status-badge.success {\r\n  background: #f6ffed;\r\n  color: #52c41a;\r\n}\r\n\r\n.status-badge.warning {\r\n  background: #fff7e6;\r\n  color: #faad14;\r\n}\r\n\r\n.grade {\r\n  font-weight: bold;\r\n  color: #1890ff;\r\n}\r\n\r\n.back-btn {\r\n  padding: 6px 12px;\r\n  border: 1px solid #ddd;\r\n  background: white;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.loading,\r\n.empty {\r\n  text-align: center;\r\n  color: #999;\r\n  padding: 40px;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}