{"ast":null,"code":"import _regenerator from \"D:/vvvvvvvvvscode_workspace/fronted/883Fronted_Final/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"D:/vvvvvvvvvscode_workspace/fronted/883Fronted_Final/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.date.now.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport \"core-js/modules/web.timers.js\";\nimport { ref, reactive } from 'vue';\nimport { useRouter } from 'vue-router';\n// import { useStore } from 'vuex' // æš‚æ—¶æ³¨é‡Šæ‰ï¼Œå¦‚æœä½ æ²¡é… Vuex å°±ä¸éœ€è¦å®ƒ\n\nexport default {\n  name: 'Login',\n  setup: function setup() {\n    var router = useRouter();\n    // const store = useStore()\n    var loading = ref(false);\n\n    // ç™»å½•è¡¨å•æ•°æ®\n    var loginForm = reactive({\n      username: '',\n      password: '',\n      rememberMe: false\n    });\n\n    // ç™»å½•å¤„ç†é€»è¾‘\n    var handleLogin = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n        var role, name, userData, _t;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.p = _context.n) {\n            case 0:\n              if (!(!loginForm.username || !loginForm.password)) {\n                _context.n = 1;\n                break;\n              }\n              alert('è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ');\n              return _context.a(2);\n            case 1:\n              loading.value = true;\n\n              // === æ¨¡æ‹Ÿç™»å½•é€»è¾‘ (ä¸ºäº†è®©ä½ å…ˆè·‘é€š) ===\n              _context.p = 2;\n              _context.n = 3;\n              return new Promise(function (resolve) {\n                return setTimeout(resolve, 800);\n              });\n            case 3:\n              // 1. æ„é€ æ¨¡æ‹Ÿçš„ç”¨æˆ·æ•°æ®\n              role = 'student';\n              name = 'åŒå­¦'; // æ ¹æ®ç”¨æˆ·åç®€å•åˆ¤æ–­è§’è‰²ï¼ˆå®é™…å¼€å‘ä¸­ç”±åç«¯è¿”å›ï¼‰\n              if (loginForm.username === 'admin') {\n                role = 'admin';\n                name = 'ç®¡ç†å‘˜';\n              } else if (loginForm.username.toLowerCase().startsWith('t')) {\n                role = 'teacher';\n                name = 'è€å¸ˆ';\n              }\n              userData = {\n                username: loginForm.username,\n                name: loginForm.username + name,\n                role: role,\n                token: 'mock-token-' + Date.now()\n              }; // 2. ä¿å­˜çŠ¶æ€ (å…³é”®ï¼šè¿™ä¼šè®©è·¯ç”±å®ˆå«æ”¾è¡Œ)\n              localStorage.setItem('token', userData.token);\n              localStorage.setItem('userInfo', JSON.stringify(userData));\n\n              // å¦‚æœä½ æœ‰ Vuexï¼Œå¯ä»¥å–æ¶ˆæ³¨é‡Šä¸‹é¢è¿™è¡Œ\n              // store.commit('SET_USER', userData)\n\n              // 3. æ ¹æ®è§’è‰²è·³è½¬åˆ°ä¸åŒé¦–é¡µ\n              if (role === 'admin') {\n                router.push('/admin/home'); // æ³¨æ„è·¯å¾„è¦å¯¹é½ä½ çš„ router/index.js\n              } else if (role === 'teacher') {\n                router.push('/teacher/home');\n              } else {\n                router.push('/student/home');\n              }\n              _context.n = 5;\n              break;\n            case 4:\n              _context.p = 4;\n              _t = _context.v;\n              console.error('ç™»å½•é”™è¯¯:', _t);\n              alert('ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•');\n            case 5:\n              _context.p = 5;\n              loading.value = false;\n              return _context.f(5);\n            case 6:\n              return _context.a(2);\n          }\n        }, _callee, null, [[2, 4, 5, 6]]);\n      }));\n      return function handleLogin() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var handleForgotPassword = function handleForgotPassword() {\n      alert('è¯·è”ç³»ç®¡ç†å‘˜é‡ç½®å¯†ç ');\n    };\n    return {\n      loginForm: loginForm,\n      loading: loading,\n      handleLogin: handleLogin,\n      handleForgotPassword: handleForgotPassword\n    };\n  }\n};","map":{"version":3,"names":["ref","reactive","useRouter","name","setup","router","loading","loginForm","username","password","rememberMe","handleLogin","_ref","_asyncToGenerator","_regenerator","m","_callee","role","userData","_t","w","_context","p","n","alert","a","value","Promise","resolve","setTimeout","toLowerCase","startsWith","token","Date","now","localStorage","setItem","JSON","stringify","push","v","console","error","f","apply","arguments","handleForgotPassword"],"sources":["D:\\vvvvvvvvvscode_workspace\\fronted\\883Fronted_Final\\src\\views\\Login.vue"],"sourcesContent":["<template>\r\n    <div class=\"login-container\">\r\n        <div class=\"login-content\">\r\n            <div class=\"login-left\">\r\n                <div class=\"campus-image\">\r\n                    <img src=\"@/assets/images/login_left_image.jpg\" alt=\"æ ¡å›­å›¾ç‰‡\" class=\"cover-img\">\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"login-right\">\r\n                <div class=\"login-form-wrapper\">\r\n                    <div class=\"login-header\">\r\n                        <h1>æ¬¢è¿ç™»å½• æ™ºæ…§æ ¡å›­</h1>\r\n                        <p>Smart Campus Management System</p>\r\n                    </div>\r\n\r\n                    <form @submit.prevent=\"handleLogin\">\r\n                        <div class=\"form-group\">\r\n                            <label for=\"username\">å­¦å·/å·¥å·</label>\r\n                            <input type=\"text\" id=\"username\" v-model=\"loginForm.username\" placeholder=\"è¯·è¾“å…¥å­¦å·æˆ–å·¥å·\"\r\n                                class=\"form-input\" required>\r\n                        </div>\r\n\r\n                        <div class=\"form-group\">\r\n                            <label for=\"password\">å¯†ç </label>\r\n                            <input type=\"password\" id=\"password\" v-model=\"loginForm.password\" placeholder=\"è¯·è¾“å…¥å¯†ç \"\r\n                                class=\"form-input\" required>\r\n                        </div>\r\n\r\n                        <div class=\"form-options\">\r\n                            <label class=\"checkbox-label\">\r\n                                <input type=\"checkbox\" v-model=\"loginForm.rememberMe\">\r\n                                è®°ä½æˆ‘\r\n                            </label>\r\n                            <a href=\"#\" class=\"forgot-password\" @click.prevent=\"handleForgotPassword\">å¿˜è®°å¯†ç ï¼Ÿ</a>\r\n                        </div>\r\n\r\n                        <button type=\"submit\" class=\"login-btn\" :disabled=\"loading\">\r\n                            {{ loading ? 'ç™»å½•ä¸­...' : 'ç™»å½•' }}\r\n                        </button>\r\n                    </form>\r\n\r\n                    <div class=\"account-help\">\r\n                        <p>ğŸ“‹ <strong>è´¦å·è¯´æ˜</strong></p>\r\n                        <p>â€¢ å­¦ç”Ÿè´¦å·ï¼šå­¦å·ï¼ˆå¦‚ï¼š2021001001ï¼‰</p>\r\n                        <p>â€¢ æ•™å¸ˆè´¦å·ï¼šå·¥å·ï¼ˆä»¥Tå¼€å¤´ï¼Œå¦‚ï¼šT2025001ï¼‰</p>\r\n                        <p>â€¢ ç®¡ç†å‘˜è´¦å·ï¼šadmin</p>\r\n                        <p>â€¢ åˆå§‹å¯†ç ï¼š123456</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\n// import { useStore } from 'vuex' // æš‚æ—¶æ³¨é‡Šæ‰ï¼Œå¦‚æœä½ æ²¡é… Vuex å°±ä¸éœ€è¦å®ƒ\r\n\r\nexport default {\r\n    name: 'Login',\r\n    setup() {\r\n        const router = useRouter()\r\n        // const store = useStore()\r\n        const loading = ref(false)\r\n\r\n        // ç™»å½•è¡¨å•æ•°æ®\r\n        const loginForm = reactive({\r\n            username: '',\r\n            password: '',\r\n            rememberMe: false\r\n        })\r\n\r\n        // ç™»å½•å¤„ç†é€»è¾‘\r\n        const handleLogin = async () => {\r\n            if (!loginForm.username || !loginForm.password) {\r\n                alert('è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ')\r\n                return\r\n            }\r\n\r\n            loading.value = true\r\n\r\n            // === æ¨¡æ‹Ÿç™»å½•é€»è¾‘ (ä¸ºäº†è®©ä½ å…ˆè·‘é€š) ===\r\n            try {\r\n                // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ\r\n                await new Promise(resolve => setTimeout(resolve, 800))\r\n\r\n                // 1. æ„é€ æ¨¡æ‹Ÿçš„ç”¨æˆ·æ•°æ®\r\n                let role = 'student'\r\n                let name = 'åŒå­¦'\r\n\r\n                // æ ¹æ®ç”¨æˆ·åç®€å•åˆ¤æ–­è§’è‰²ï¼ˆå®é™…å¼€å‘ä¸­ç”±åç«¯è¿”å›ï¼‰\r\n                if (loginForm.username === 'admin') {\r\n                    role = 'admin'\r\n                    name = 'ç®¡ç†å‘˜'\r\n                } else if (loginForm.username.toLowerCase().startsWith('t')) {\r\n                    role = 'teacher'\r\n                    name = 'è€å¸ˆ'\r\n                }\r\n\r\n                const userData = {\r\n                    username: loginForm.username,\r\n                    name: loginForm.username + name,\r\n                    role: role,\r\n                    token: 'mock-token-' + Date.now()\r\n                }\r\n\r\n                // 2. ä¿å­˜çŠ¶æ€ (å…³é”®ï¼šè¿™ä¼šè®©è·¯ç”±å®ˆå«æ”¾è¡Œ)\r\n                localStorage.setItem('token', userData.token)\r\n                localStorage.setItem('userInfo', JSON.stringify(userData))\r\n\r\n                // å¦‚æœä½ æœ‰ Vuexï¼Œå¯ä»¥å–æ¶ˆæ³¨é‡Šä¸‹é¢è¿™è¡Œ\r\n                // store.commit('SET_USER', userData)\r\n\r\n                // 3. æ ¹æ®è§’è‰²è·³è½¬åˆ°ä¸åŒé¦–é¡µ\r\n                if (role === 'admin') {\r\n                    router.push('/admin/home') // æ³¨æ„è·¯å¾„è¦å¯¹é½ä½ çš„ router/index.js\r\n                } else if (role === 'teacher') {\r\n                    router.push('/teacher/home')\r\n                } else {\r\n                    router.push('/student/home')\r\n                }\r\n\r\n            } catch (error) {\r\n                console.error('ç™»å½•é”™è¯¯:', error)\r\n                alert('ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•')\r\n            } finally {\r\n                loading.value = false\r\n            }\r\n        }\r\n\r\n        const handleForgotPassword = () => {\r\n            alert('è¯·è”ç³»ç®¡ç†å‘˜é‡ç½®å¯†ç ')\r\n        }\r\n\r\n        return {\r\n            loginForm,\r\n            loading,\r\n            handleLogin,\r\n            handleForgotPassword\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.login-container {\r\n    min-height: 100vh;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    background: #f0f2f5;\r\n}\r\n\r\n.login-content {\r\n    display: flex;\r\n    width: 85%;\r\n    max-width: 1000px;\r\n    height: 600px;\r\n    background: white;\r\n    border-radius: 16px;\r\n    overflow: hidden;\r\n    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n/* å·¦ä¾§å›¾ç‰‡åŒº */\r\n.login-left {\r\n    flex: 1.2;\r\n    background: #f8f9fa;\r\n    position: relative;\r\n    overflow: hidden;\r\n}\r\n\r\n.campus-image {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.cover-img {\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: cover;\r\n    display: block;\r\n}\r\n\r\n/* å³ä¾§è¡¨å•åŒº */\r\n.login-right {\r\n    flex: 1;\r\n    padding: 40px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    background: white;\r\n}\r\n\r\n.login-form-wrapper {\r\n    width: 100%;\r\n    max-width: 360px;\r\n    margin: 0 auto;\r\n}\r\n\r\n.login-header {\r\n    text-align: center;\r\n    margin-bottom: 30px;\r\n}\r\n\r\n.login-header h1 {\r\n    color: #2c3e50;\r\n    font-size: 26px;\r\n    font-weight: 600;\r\n    margin-bottom: 8px;\r\n}\r\n\r\n.login-header p {\r\n    color: #7f8c8d;\r\n    font-size: 14px;\r\n}\r\n\r\n.form-group {\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.form-group label {\r\n    display: block;\r\n    margin-bottom: 8px;\r\n    font-weight: 500;\r\n    color: #2d3748;\r\n    font-size: 14px;\r\n}\r\n\r\n.form-input {\r\n    width: 100%;\r\n    padding: 12px 16px;\r\n    border: 1px solid #e2e8f0;\r\n    border-radius: 8px;\r\n    font-size: 14px;\r\n    transition: all 0.3s ease;\r\n    background: #fafafa;\r\n    box-sizing: border-box;\r\n}\r\n\r\n.form-input:focus {\r\n    outline: none;\r\n    border-color: #2A5CAA;\r\n    box-shadow: 0 0 0 3px rgba(42, 92, 170, 0.1);\r\n    background: #fff;\r\n}\r\n\r\n.form-options {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 25px;\r\n    font-size: 14px;\r\n}\r\n\r\n.checkbox-label {\r\n    display: flex;\r\n    align-items: center;\r\n    cursor: pointer;\r\n    color: #5a6c7d;\r\n}\r\n\r\n.checkbox-label input {\r\n    margin-right: 8px;\r\n}\r\n\r\n.forgot-password {\r\n    color: #2A5CAA;\r\n    text-decoration: none;\r\n    transition: color 0.2s;\r\n}\r\n\r\n.forgot-password:hover {\r\n    color: #1e4b8b;\r\n    text-decoration: underline;\r\n}\r\n\r\n.login-btn {\r\n    width: 100%;\r\n    padding: 12px;\r\n    background: #2A5CAA;\r\n    color: white;\r\n    border: none;\r\n    border-radius: 8px;\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    cursor: pointer;\r\n    transition: all 0.3s ease;\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.login-btn:hover {\r\n    background: #1e4b8b;\r\n    transform: translateY(-1px);\r\n    box-shadow: 0 4px 12px rgba(42, 92, 170, 0.3);\r\n}\r\n\r\n.login-btn:disabled {\r\n    background: #a0aec0;\r\n    cursor: not-allowed;\r\n}\r\n\r\n/* è´¦å·è¯´æ˜åŒºåŸŸ */\r\n.account-help {\r\n    font-size: 12px;\r\n    color: #7f8c8d;\r\n    margin-top: 20px;\r\n    line-height: 1.6;\r\n    padding: 15px;\r\n    background-color: #f8f9fa;\r\n    border-radius: 8px;\r\n    border: 1px solid #eee;\r\n}\r\n\r\n.account-help p {\r\n    margin: 4px 0;\r\n}\r\n\r\n.account-help strong {\r\n    color: #2c3e50;\r\n}\r\n\r\n/* å“åº”å¼è®¾è®¡ */\r\n@media (max-width: 768px) {\r\n    .login-content {\r\n        flex-direction: column;\r\n        height: auto;\r\n        width: 90%;\r\n        margin: 20px 0;\r\n    }\r\n\r\n    .login-left {\r\n        height: 200px;\r\n        flex: none;\r\n    }\r\n\r\n    .login-right {\r\n        padding: 30px 20px;\r\n    }\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}