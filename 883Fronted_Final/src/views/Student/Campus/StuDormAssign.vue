<template>
  <div class="dorm-assign-page">
    <main class="container">
      <section class="view-section">
        <div class="student-container">
          <!-- å®¿èˆåå¥½é—®å·æ¨¡å— -->
          <div class="questionnaire-card">
            <h2><i class="bi bi-clipboard2-pulse"></i> å®¿èˆåå¥½é—®å·</h2>
            <form @submit.prevent="submitQuestionnaire">
              <!-- ä¸€ã€ä½œæ¯ä¹ æƒ¯ -->
              <div class="form-section">
                <h3>ä¸€ã€ä½œæ¯ä¹ æƒ¯</h3>
                
                <div class="form-group">
                  <label>1. ç¡è§‰æ—¶é—´ï¼š</label>
                  <div class="radio-group">
                    <label>
                      <input type="radio" value="before12" v-model="questionnaire.sleepTime" required> 
                      12ç‚¹å‰ç¡è§‰
                    </label>
                    <label>
                      <input type="radio" value="after12" v-model="questionnaire.sleepTime"> 
                      12ç‚¹åç¡è§‰
                    </label>
                  </div>
                </div>
                
                <div class="form-group">
                  <label>2. èµ·åºŠæ—¶é—´ï¼š</label>
                  <div class="radio-group">
                    <label>
                      <input type="radio" value="before7" v-model="questionnaire.wakeUpTime" required> 
                      7ç‚¹å‰èµ·åºŠ
                    </label>
                    <label>
                      <input type="radio" value="after7" v-model="questionnaire.wakeUpTime"> 
                      7ç‚¹åèµ·åºŠ
                    </label>
                  </div>
                </div>
                
                <div class="form-group">
                  <label>3. æ˜¯å¦åˆç¡ï¼š</label>
                  <div class="radio-group">
                    <label>
                      <input type="radio" value="yes" v-model="questionnaire.nap" required> 
                      æœ‰åˆç¡ä¹ æƒ¯
                    </label>
                    <label>
                      <input type="radio" value="no" v-model="questionnaire.nap"> 
                      æ²¡æœ‰åˆç¡ä¹ æƒ¯
                    </label>
                  </div>
                </div>
              </div>

              <!-- äºŒã€ç”Ÿæ´»ä¹ æƒ¯ -->
              <div class="form-section">
                <h3>äºŒã€ç”Ÿæ´»ä¹ æƒ¯</h3>
                
                <div class="form-group">
                  <label>4. æ˜¯å¦æŠ½çƒŸï¼š</label>
                  <div class="radio-group">
                    <label>
                      <input type="radio" value="yes" v-model="questionnaire.smoking" required> 
                      æŠ½çƒŸ
                    </label>
                    <label>
                      <input type="radio" value="no" v-model="questionnaire.smoking"> 
                      ä¸æŠ½çƒŸ
                    </label>
                  </div>
                </div>
                
                <div class="form-group">
                  <label>5. æ˜¯å¦ä»‹æ„å®¤å‹æŠ½çƒŸï¼š</label>
                  <div class="radio-group">
                    <label>
                      <input type="radio" value="yes" v-model="questionnaire.mindSmoking" required> 
                      ä»‹æ„
                    </label>
                    <label>
                      <input type="radio" value="no" v-model="questionnaire.mindSmoking"> 
                      ä¸ä»‹æ„
                    </label>
                  </div>
                </div>
                
                <div class="form-group">
                  <label>6. æ˜¯å¦æ‰“æ¸¸æˆï¼š</label>
                  <div class="radio-group">
                    <label>
                      <input type="radio" value="often" v-model="questionnaire.gaming" required> 
                      ç»å¸¸ç©æ¸¸æˆï¼ˆæ¯å¤© â‰¥1 å°æ—¶ï¼‰
                    </label>
                    <label>
                      <input type="radio" value="rarely" v-model="questionnaire.gaming"> 
                      å¾ˆå°‘/å‡ ä¹ä¸ç©
                    </label>
                  </div>
                </div>
                
                <div class="form-group">
                  <label>7. æ˜¯å¦æˆ´è€³æœºå¬å£°éŸ³ï¼š</label>
                  <div class="radio-group">
                    <label>
                      <input type="radio" value="often" v-model="questionnaire.headphone" required> 
                      å¤§å¤šæ•°æ—¶å€™æˆ´è€³æœº
                    </label>
                    <label>
                      <input type="radio" value="rarely" v-model="questionnaire.headphone"> 
                      ä¸ç»å¸¸æˆ´è€³æœº
                    </label>
                  </div>
                </div>
              </div>

              <!-- ä¸‰ã€ç¤¾äº¤åå¥½ -->
              <div class="form-section">
                <h3>ä¸‰ã€ç¤¾äº¤åå¥½</h3>
                
                <div class="form-group">
                  <label>8. æ˜¯å¦å–œæ¬¢ä¸å®¤å‹é—²èŠï¼š</label>
                  <div class="radio-group">
                    <label>
                      <input type="radio" value="like" v-model="questionnaire.chatting" required> 
                      å–œæ¬¢èŠå¤©/ç¤¾äº¤å¼€æ”¾
                    </label>
                    <label>
                      <input type="radio" value="dislike" v-model="questionnaire.chatting"> 
                      ä¸å–œæ¬¢èŠå¤©/å¸Œæœ›è¾ƒå®‰é™
                    </label>
                  </div>
                </div>
                
                <div class="form-group">
                  <label>9. æ˜¯å¦èƒ½æ¥å—å®¤å‹å¸¦æœ‹å‹æ¥å®¿èˆï¼š</label>
                  <div class="radio-group">
                    <label>
                      <input type="radio" value="accept" v-model="questionnaire.friendsVisit" required> 
                      å¯ä»¥æ¥å—
                    </label>
                    <label>
                      <input type="radio" value="notAccept" v-model="questionnaire.friendsVisit"> 
                      ä¸å¤ªèƒ½æ¥å—
                    </label>
                  </div>
                </div>
                
                <div class="form-group">
                  <label>10. æ˜¯å¦æ„¿æ„å‚ä¸å®¿èˆé›†ä½“æ´»åŠ¨ï¼ˆå¦‚èšé¤ï¼‰ï¼š</label>
                  <div class="radio-group">
                    <label>
                      <input type="radio" value="willing" v-model="questionnaire.groupActivities" required> 
                      æ„¿æ„
                    </label>
                    <label>
                      <input type="radio" value="notWilling" v-model="questionnaire.groupActivities"> 
                      ä¸å¤ªæ„¿æ„
                    </label>
                  </div>
                </div>
              </div>

              <!-- å››ã€å«ç”Ÿæ•´ç† -->
              <div class="form-section">
                <h3>å››ã€å«ç”Ÿæ•´ç†</h3>
                
                <div class="form-group">
                  <label>11. å¯¹å«ç”Ÿçš„è¦æ±‚ï¼š</label>
                  <div class="radio-group">
                    <label>
                      <input type="radio" value="high" v-model="questionnaire.cleanliness" required> 
                      è¾ƒé«˜ï¼ˆç»å¸¸æ‰“æ‰«ï¼‰
                    </label>
                    <label>
                      <input type="radio" value="casual" v-model="questionnaire.cleanliness"> 
                      éšæ„ï¼ˆæ¯å‘¨ 1 æ¬¡æˆ–ä»¥ä¸‹ï¼‰
                    </label>
                  </div>
                </div>
                
                <div class="form-group">
                  <label>12. æ•´ç†ä¸ªäººç‰©å“ï¼š</label>
                  <div class="radio-group">
                    <label>
                      <input type="radio" value="tidy" v-model="questionnaire.organization" required> 
                      æ•´é½ï¼ˆç»å¸¸å½’ä½ï¼‰
                    </label>
                    <label>
                      <input type="radio" value="casual" v-model="questionnaire.organization"> 
                      æ¯”è¾ƒéšæ„
                    </label>
                  </div>
                </div>
                
                <div class="form-group">
                  <label>13. æ˜¯å¦ä»‹æ„å®¤å‹çš„å«ç”Ÿä¸ä½³ï¼š</label>
                  <div class="radio-group">
                    <label>
                      <input type="radio" value="mind" v-model="questionnaire.mindMessy" required> 
                      ä»‹æ„
                    </label>
                    <label>
                      <input type="radio" value="notMind" v-model="questionnaire.mindMessy"> 
                      ä¸å¤ªä»‹æ„
                    </label>
                  </div>
                </div>
              </div>

              <!-- äº”ã€å­¦ä¹ ä¸å™ªéŸ³ -->
              <div class="form-section">
                <h3>äº”ã€å­¦ä¹ ä¸å™ªéŸ³</h3>
                
                <div class="form-group">
                  <label>14. æ˜¯å¦éœ€è¦å®‰é™çš„å­¦ä¹ ç¯å¢ƒï¼š</label>
                  <div class="radio-group">
                    <label>
                      <input type="radio" value="yes" v-model="questionnaire.quietStudy" required> 
                      æ˜¯
                    </label>
                    <label>
                      <input type="radio" value="no" v-model="questionnaire.quietStudy"> 
                      å¦
                    </label>
                  </div>
                </div>
                
                <div class="form-group">
                  <label>15. å¯¹å®¤å†…å™ªéŸ³ï¼ˆèŠå¤©/é”®ç›˜/éŸ³ä¹ï¼‰çš„å®¹å¿åº¦ï¼š</label>
                  <div class="radio-group">
                    <label>
                      <input type="radio" value="low" v-model="questionnaire.noiseTolerance" required> 
                      ä½å®¹å¿
                    </label>
                    <label>
                      <input type="radio" value="high" v-model="questionnaire.noiseTolerance"> 
                      é«˜å®¹å¿
                    </label>
                  </div>
                </div>
              </div>

              <!-- å…­ã€å…¶ä»–åå¥½ -->
              <div class="form-section">
                <h3>å…­ã€å…¶ä»–åå¥½</h3>
                
                <div class="form-group">
                  <label>16. æ˜¯å¦åœ¨å®¿èˆåƒä¸œè¥¿ï¼š</label>
                  <div class="radio-group">
                    <label>
                      <input type="radio" value="often" v-model="questionnaire.eatingInRoom" required> 
                      ç»å¸¸åƒ
                    </label>
                    <label>
                      <input type="radio" value="rarely" v-model="questionnaire.eatingInRoom"> 
                      ä¸å¸¸åƒ
                    </label>
                  </div>
                </div>
                
                <div class="form-group">
                  <label>17. æ˜¯å¦ä½¿ç”¨é¦™æ°´/é¦™æ°›ï¼š</label>
                  <div class="radio-group">
                    <label>
                      <input type="radio" value="often" v-model="questionnaire.fragrance" required> 
                      ç»å¸¸ä½¿ç”¨
                    </label>
                    <label>
                      <input type="radio" value="never" v-model="questionnaire.fragrance"> 
                      ä¸ä½¿ç”¨
                    </label>
                  </div>
                </div>
                
                <div class="form-group">
                  <label>18. æ˜¯å¦ä»‹æ„æ°”å‘³ï¼ˆé£Ÿç‰©/é¦™æ°›ï¼‰ï¼š</label>
                  <div class="radio-group">
                    <label>
                      <input type="radio" value="mind" v-model="questionnaire.mindSmell" required> 
                      ä»‹æ„
                    </label>
                    <label>
                      <input type="radio" value="notMind" v-model="questionnaire.mindSmell"> 
                      ä¸ä»‹æ„
                    </label>
                  </div>
                </div>
              </div>

              <!-- ç‰¹æ®Šéœ€æ±‚ -->
              <div class="form-group">
                <label for="special-request">ç‰¹æ®Šéœ€æ±‚è¯´æ˜ï¼ˆé€‰å¡«ï¼‰ï¼š</label>
                <textarea 
                  id="special-request" 
                  rows="3" 
                  placeholder="å¦‚ï¼šéœ€è¦ä¸‹é“ºã€èº«ä½“åŸå› éœ€è¦ç‰¹æ®Šç…§é¡¾ç­‰"
                  v-model="questionnaire.specialRequest"
                ></textarea>
              </div>
              
              <button 
                type="submit" 
                class="btn-submit"
                :disabled="isSubmitting"
              >
                <i class="bi" :class="submitIcon"></i> {{ submitText }}
              </button>
            </form>
          </div>
          
          <!-- æˆ‘çš„å®¿èˆåˆ†é…ç»“æœæ¨¡å— -->
          <div class="result-card">
            <h2><i class="bi bi-house-check"></i> æˆ‘çš„å®¿èˆåˆ†é…ç»“æœ</h2>
            <div class="result-content">
              <div v-if="!assignmentResult" class="result-pending">
                <i class="bi bi-hourglass-split"></i>
                <p>æ‚¨çš„å®¿èˆåˆ†é…ç»“æœå°šæœªå…¬å¸ƒ</p>
                <p class="small-text">è¯·å…ˆå®Œæˆå®¿èˆåå¥½é—®å·</p>
              </div>
              
              <div v-else class="result-detail">
                <div class="result-item">
                  <span>å®¿èˆæ¥¼ï¼š</span>
                  <strong>{{ assignmentResult.building }}</strong>
                </div>
                <div class="result-item">
                  <span>æˆ¿é—´å·ï¼š</span>
                  <strong>{{ assignmentResult.room }}</strong>
                </div>
                <div class="result-item">
                  <span>åºŠä½å·ï¼š</span>
                  <strong>{{ assignmentResult.bed }}</strong>
                </div>
                <div class="result-item">
                  <span>å®¤å‹ï¼š</span>
                  <strong>{{ assignmentResult.roommate }}</strong>
                </div>
                <button class="btn-contact">
                  <i class="bi bi-chat-left-text"></i> è”ç³»å®¤å‹
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>
</template>

<script>
import { submitDormSurvey, getDormSurvey } from '@/api/student'

export default {
  name: 'DormAssign',
  data() {
    return {
      isSubmitting: false,
      
      // é—®å·æ•°æ® - æ ¹æ®markdownæ–‡æ¡£çš„18ä¸ªé—®é¢˜
      questionnaire: {
        // ä¸€ã€ä½œæ¯ä¹ æƒ¯
        sleepTime: '',
        wakeUpTime: '',
        nap: '',
        
        // äºŒã€ç”Ÿæ´»ä¹ æƒ¯
        smoking: '',
        mindSmoking: '',
        gaming: '',
        headphone: '',
        
        // ä¸‰ã€ç¤¾äº¤åå¥½
        chatting: '',
        friendsVisit: '',
        groupActivities: '',
        
        // å››ã€å«ç”Ÿæ•´ç†
        cleanliness: '',
        organization: '',
        mindMessy: '',
        
        // äº”ã€å­¦ä¹ ä¸å™ªéŸ³
        quietStudy: '',
        noiseTolerance: '',
        
        // å…­ã€å…¶ä»–åå¥½
        eatingInRoom: '',
        fragrance: '',
        mindSmell: '',
        
        // ç‰¹æ®Šéœ€æ±‚
        specialRequest: ''
      },
      
      // åˆ†é…ç»“æœ
      assignmentResult: null
    }
  },
  computed: {
    submitText() {
      if (this.isSubmitting) return 'æäº¤ä¸­...'
      return 'æäº¤é—®å·'
    },
    submitIcon() {
      if (this.isSubmitting) return 'bi-arrow-repeat'
      return 'bi-send-check'
    }
  },
  methods: {
    async submitQuestionnaire() {
      if (this.isSubmitting) return
      
      // éªŒè¯æ‰€æœ‰å¿…å¡«é¡¹
      // éªŒè¯æ‰€æœ‰å¿…å¡«é¡¹
      const requiredFields = [
        'sleepTime', 'wakeUpTime', 'nap',
        'smoking', 'mindSmoking', 'gaming', 'headphone',
        'chatting', 'friendsVisit', 'groupActivities', // æ³¨æ„è¿™é‡Œå­—æ®µåè¦è·Ÿdataé‡Œçš„ä¸€è‡´
        'cleanliness', 'organization', 'mindMessy',
        'quietStudy', 'noiseTolerance',
        'eatingInRoom', 'fragrance', 'mindSmell'
      ]
      
      for (const field of requiredFields) {
        if (!this.questionnaire[field]) {
          alert('è¯·å®Œæˆæ‰€æœ‰å¿…å¡«é—®é¢˜')
          return
        }
      }
      
      this.isSubmitting = true
      try {
        // è½¬æ¢è¡¨å•æ•°æ®ä¸ºAPIæ ¼å¼
        const surveyData = {
          sleep_time_pref: this.questionnaire.sleepTime === 'before12' ? 1 : 2,
          wake_time_pref: this.questionnaire.wakeUpTime === 'before7' ? 1 : 2,
          nap_habit: this.questionnaire.nap === 'yes' ? 1 : 2,
          smoking_status: this.questionnaire.smoking === 'yes' ? 1 : 2,
          roommate_smoke_accept: this.questionnaire.mindSmoking === 'no' ? 1 : 2,
          gaming_freq: this.questionnaire.gaming === 'often' ? 1 : 2,
          headphone_usage: this.questionnaire.headphone === 'often' ? 1 : 2,
          chatting_pref: this.questionnaire.chatting === 'like' ? 1 : 2,
          guest_acceptance: this.questionnaire.friendsVisit === 'accept' ? 1 : 2,
          group_activity_willingness: this.questionnaire.groupActivities === 'willing' ? 1 : 2,
          hygiene_requirement: this.questionnaire.cleanliness === 'high' ? 1 : (this.questionnaire.cleanliness === 'casual' ? 3 : 2),
          organization_level: this.questionnaire.organization === 'tidy' ? 1 : 2,
          roommate_hygiene_tolerance: this.questionnaire.mindMessy === 'mind' ? 1 : 2,
          quiet_study_need: this.questionnaire.quietStudy === 'yes' ? 1 : 2,
          noise_tolerance_level: this.questionnaire.noiseTolerance === 'low' ? 1 : 2,
          dorm_food_freq: this.questionnaire.eatingInRoom === 'often' ? 1 : 2,
          fragrance_usage: this.questionnaire.fragrance === 'often' ? 1 : 2,
          smell_sensitivity: this.questionnaire.mindSmell === 'mind' ? 1 : 2,

          // ğŸ”¥ å…³é”®ä¿®æ”¹ï¼šå°†ç‰¹æ®Šéœ€æ±‚å‘ç»™åç«¯å¯¹åº”çš„ self_introduction å­—æ®µ
          self_introduction: this.questionnaire.specialRequest
        }

        // è¡¥å……å…·ä½“æ—¶é—´å­—æ®µï¼Œé˜²æ­¢åç«¯æŠ¥é”™
        if (this.questionnaire.sleepTime === 'before12') {
          surveyData.sleep_time = '23:00:00'
        } else {
          surveyData.sleep_time = '00:30:00'
        }

        if (this.questionnaire.wakeUpTime === 'before7') {
          surveyData.wake_up_time = '06:30:00'
        } else {
          surveyData.wake_up_time = '07:30:00'
        }

        const result = await submitDormSurvey(surveyData)

        if (result.code === 1) {
          // âœ… ä¿®æ”¹ä¸ºç­‰å¾…æç¤º
          alert('é—®å·æäº¤æˆåŠŸï¼æ‚¨çš„åå¥½å·²å½•å…¥ç³»ç»Ÿï¼Œè¯·è€å¿ƒç­‰å¾…ç®¡ç†å‘˜è¿›è¡Œ AI æ™ºèƒ½åˆ†é…ã€‚')
          await this.loadQuestionnaire() // ä»…å›æ˜¾é—®å·

          // âŒ ä¸è¦è°ƒç”¨ loadMyDormResult()ï¼Œå› ä¸ºè¿˜æ²¡åˆ†é…
        } else {
          alert(result.msg || 'æäº¤å¤±è´¥')
        }
      } catch (error) {
        console.error('æäº¤é—®å·å¤±è´¥:', error)
        alert(error.message || 'æäº¤å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•')
      } finally {
        this.isSubmitting = false
      }
    },
    async loadQuestionnaire() {
      try {
        const result = await getDormSurvey()
        if (result.code === 1 && result.data) {
          const data = result.data
          // å›æ˜¾æ•°æ®åˆ°è¡¨å•
          this.questionnaire.sleepTime = data.sleep_time_pref === 1 ? 'before12' : 'after12'
          this.questionnaire.wakeUpTime = data.wake_time_pref === 1 ? 'before7' : 'after7'
          this.questionnaire.nap = data.nap_habit === 1 ? 'yes' : 'no'
          this.questionnaire.smoking = data.smoking_status === 1 ? 'yes' : 'no'
          this.questionnaire.mindSmoking = data.roommate_smoke_accept === 1 ? 'no' : 'yes'
          this.questionnaire.gaming = data.gaming_freq === 1 ? 'often' : 'rarely'
          this.questionnaire.headphone = data.headphone_usage === 1 ? 'often' : 'rarely'
          this.questionnaire.chatting = data.chatting_pref === 1 ? 'like' : 'quiet'
          this.questionnaire.guest = data.guest_acceptance === 1 ? 'accept' : 'mind'
          this.questionnaire.activity = data.group_activity_willingness === 1 ? 'willing' : 'reluctant'
          this.questionnaire.cleanliness = data.hygiene_requirement === 1 ? 'strict' : (data.hygiene_requirement === 2 ? 'normal' : 'casual')
          this.questionnaire.organization = data.organization_level === 1 ? 'high' : 'low'
          this.questionnaire.mindMessy = data.roommate_hygiene_tolerance === 1 ? 'notMind' : 'mind'
          this.questionnaire.quietStudy = data.quiet_study_need === 1 ? 'yes' : 'no'
          this.questionnaire.noiseTolerance = data.noise_tolerance_level === 1 ? 'low' : 'high'
          this.questionnaire.eatingInRoom = data.dorm_food_freq === 1 ? 'often' : 'rarely'
          this.questionnaire.fragrance = data.fragrance_usage === 1 ? 'often' : 'never'
          this.questionnaire.mindSmell = data.smell_sensitivity === 1 ? 'mind' : 'notMind'
        }
      } catch (error) {
        console.error('åŠ è½½é—®å·å¤±è´¥:', error)
      }
    }
  },
  async mounted() {
    await this.loadQuestionnaire()
  }
}
</script>

<style scoped>
.dorm-assign-page {
  --primary-color: #2A5CAA;
  --secondary-color: #4CAF50;
  --light-color: #F5F7FA;
  --dark-color: #333333;
  --gray-color: #E0E0E0;
  --border-radius: 8px;
  --box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  --transition: all 0.3s ease;
}

.dorm-assign-page {
  font-family: 'Roboto', 'PingFang SC', 'Microsoft YaHei', sans-serif;
  color: var(--dark-color);
  background-color: var(--light-color);
  line-height: 1.6;
  min-block-size: 100vh;
}

.container {
  max-inline-size: 1000px;
  margin: 0 auto;
  padding: 80px 1rem 2rem;
}

/* è§†å›¾åŒºåŸŸ */
.view-section {
  background-color: white;
  border-radius: var(--border-radius);
  padding: 1.5rem;
  box-shadow: var(--box-shadow);
  margin-block-end: 2rem;
}

.view-section h1, .view-section h2 {
  color: var(--primary-color);
  margin-block-end: 1.5rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

/* å­¦ç”Ÿè§†å›¾æ ·å¼ - æ”¹ä¸ºä¸Šä¸‹æ’åˆ— */
.student-container {
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

.questionnaire-card, .result-card {
  background-color: white;
  border-radius: var(--border-radius);
  padding: 1.5rem;
  box-shadow: var(--box-shadow);
}

.result-card {
  display: flex;
  flex-direction: column;
}

/* è¡¨å•æ ·å¼ */
.form-section {
  margin-block-end: 2rem;
  padding-block-end: 1.5rem;
  border-block-end: 1px solid var(--gray-color);
}

.form-section:last-of-type {
  border-block-end: none;
}

.form-section h3 {
  color: var(--primary-color);
  margin-block-end: 1rem;
  font-size: 1.1rem;
  padding-inline-start: 0.5rem;
  border-inline-start: 3px solid var(--primary-color);
}

.form-group {
  margin-block-end: 1.5rem;
}

.form-group label {
  display: block;
  margin-block-end: 0.8rem;
  font-weight: 500;
  color: var(--dark-color);
}

.radio-group {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
}

.radio-group label {
  display: flex;
  align-items: center;
  gap: 0.8rem;
  font-weight: normal;
  cursor: pointer;
  margin-block-end: 0;
  padding: 0.5rem;
  border-radius: 4px;
  transition: var(--transition);
}

.radio-group label:hover {
  background-color: #f8f9fa;
}

.radio-group input[type="radio"] {
  margin: 0;
}

.form-group textarea {
  inline-size: 100%;
  padding: 0.8rem 1rem;
  border: 1px solid var(--gray-color);
  border-radius: var(--border-radius);
  transition: var(--transition);
  font-family: inherit;
  resize: vertical;
}

.form-group textarea:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 2px rgba(42, 92, 170, 0.2);
}

.btn-submit {
  inline-size: 100%;
  padding: 1rem;
  background-color: var(--secondary-color);
  color: white;
  border: none;
  border-radius: var(--border-radius);
  font-weight: 500;
  font-size: 1.1rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  transition: var(--transition);
  margin-block-start: 1rem;
}

.btn-submit:hover:not(:disabled) {
  background-color: #3e8e41;
  transform: translateY(-2px);
}

.btn-submit:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

/* ç»“æœå¡ç‰‡æ ·å¼ */
.result-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.result-pending {
  text-align: center;
  padding: 3rem 0;
  color: #666;
}

.result-pending i {
  font-size: 3rem;
  color: var(--primary-color);
  margin-block-end: 1rem;
}

.small-text {
  font-size: 0.9rem;
  color: #999;
  margin-block-start: 0.5rem;
}

.result-detail {
  padding: 1rem 0;
}

.result-item {
  display: flex;
  justify-content: space-between;
  padding: 1rem 0;
  border-block-end: 1px solid var(--gray-color);
  align-items: center;
}

.result-item:last-child {
  border-block-end: none;
}

.btn-contact {
  inline-size: 100%;
  padding: 1rem;
  margin-block-start: 1.5rem;
  background-color: var(--primary-color);
  color: white;
  border: none;
  border-radius: var(--border-radius);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  transition: var(--transition);
  font-weight: 500;
}

.btn-contact:hover {
  background-color: #1e4b8a;
  transform: translateY(-2px);
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .container {
    padding: 80px 0.5rem 1rem;
  }
  
  .view-section {
    padding: 1rem;
  }
  
  .questionnaire-card, .result-card {
    padding: 1rem;
  }
  
  .radio-group label {
    padding: 0.8rem;
  }
}

@media (max-width: 480px) {
  .form-section h3 {
    font-size: 1rem;
  }
  
  .result-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.5rem;
  }
}
</style>